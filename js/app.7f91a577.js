(function(e){function t(t){for(var o,n,i=t[0],c=t[1],l=t[2],u=0,p=[];u<i.length;u++)n=i[u],s[n]&&p.push(s[n][0]),s[n]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(o=!1)}o&&(a.splice(t--,1),e=n(n.s=r[0]))}return e}var o={},s={app:0},a=[];function n(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var o=r("64a9"),s=r.n(o);s.a},1:function(e,t){},"184b":function(e,t,r){"use strict";r.r(t);r("28a5"),r("ac6a"),r("456d"),r("7f7f"),r("6b54");var o=r("2b0e"),s=(r("c0d6"),r("41cb"),r("ce96"),r("ee2e")),a=r("c198"),n=r("f8d5");o["default"].mixin({data:function(){return{dismissSecs:10,dismissCountDown:0,pageMessage:"",pageMessageType:"default",showLoader:!1,loaderName:"ball-spin-fade-loader",isAuth:!1,fb:s,AES:a,UTF8:n,envKeys:{user_encryption_key:"encrypted user",order_encryption_key:"encrypt order",logout_encryption_key:"31"},draggable:!0,showSideBar:!0,countries:[{text:"United States",value:"United States"}],regions:[{text:"Select State",value:null},{text:"A laska",value:"A laska"},{text:"Alabama",value:"Alabama"},{text:"Arkansas",value:"Arkansas"},{text:"Arizona",value:"Arizona"},{text:"California",value:"California"},{text:"Colorado",value:"Colorado"},{text:"Connecticut",value:"Connecticut"},{text:"District of Columbia",value:"District of Columbia"},{text:"Delaware",value:"Delaware"},{text:"Florida",value:"Florida"},{text:"Georgia",value:"Georgia"},{text:"Hawaii",value:"Hawaii"},{text:"Iowa",value:"Iowa"},{text:"Idaho",value:"Idaho"},{text:"Illinois",value:"Illinois"},{text:"Indiana",value:"Indiana"},{text:"Kansas",value:"Kansas"},{text:"Kentucky",value:"Kentucky"},{text:"Louisiana",value:"Louisiana"},{text:"Massachusetts",value:"Massachusetts"},{text:"Maryland",value:"Maryland"},{text:"Maine",value:"Maine"},{text:"Michigan",value:"Michigan"},{text:"Minnesota",value:"Minnesota"},{text:"Missouri",value:"Missouri"},{text:"Mississippi",value:"Mississippi"},{text:"Montana",value:"Montana"},{text:"North Carolina",value:"North Carolina"},{text:"North Dakota",value:"North Dakota"},{text:"Nebraska",value:"Nebraska"},{text:"New Hampshire",value:"New Hampshire"},{text:"New Jersey",value:"New Jersey"},{text:"New Mexico",value:"New Mexico"},{text:"Nevada",value:"Nevada"},{text:"New York",value:"New York"},{text:"Ohio",value:"Ohio"},{text:"Oklahoma",value:"Oklahoma"},{text:"Oregon",value:"Oregon"},{text:"Pennsylvania",value:"Pennsylvania"},{text:"Rhode Island",value:"Rhode Island"},{text:"South Carolina",value:"South Carolina"},{text:"South Dakota",value:"South Dakota"},{text:"Tennessee",value:"Tennessee"},{text:"Texas",value:"Texas"},{text:"Utah",value:"Utah"},{text:"Virginia",value:"Virginia"},{text:"Vermont",value:"Vermont"},{text:"Washington",value:"Washington"},{text:"Wisconsin",value:"Wisconsin"},{text:"West Virginia",value:"West Virginia"},{text:"Wyoming",value:"Wyoming"}]}},computed:{authUser:{get:function(){return this.currentUser},set:function(){var e=this,t=e.getCurrentUser();return e.emptyOrNull(t)?(e.isAuth=!1,{}):(e.isAuth=!0,t)}}},watch:{showLoader:function(e,t){e?$("body").addClass("loaderOpen"):$("body").removeClass("loaderOpen")}},methods:{getCurrentUser:function(){var e=this;if(e.$cookies.isKey("currentUser")){e.isAuth=!0;var t=e.AES.decrypt(e.$cookies.get("currentUser"),e.envKeys.user_encryption_key),r=JSON.parse(t.toString(e.UTF8));return e.authUser=!0,r}return e.isAuth=!1,{}},countDownChanged:function(e){var t=this;t.dismissCountDown=e},dismissAlert:function(){var e=this;e.dismissCountDown=0,e.pageMessages=[],e.$store.commit("clearFlashMessage")},simpleAlert:function(e){var t=this,r={type:e.type?e.type:"success",text:e.text?e.text:""};e.title&&(r["title"]=e.title),t.$swal.fire(r)},consoleData:function(e){console.log(e)},emptyOrNull:function(e){return null==e||("Object"==e.constructor.name?!(Object.keys(e).length>0):"Array"==e.constructor.name?!(e.length>0):"String"==e.constructor.name?!(e.length>0):(console.error("The checking value should be of type null, object, array, or string"),void console.error("The emptyOrNull method got "+e.constructor.name+"Instead of above mentioned types")))},logOutUser:function(){var e=this;e.consoleData("Logging out user..."),e.$store.dispatch("clearData"),e.$router.push({name:"LoginPage"})},refreshCurrentUser:function(e){var t=this,r=this;s.usersCollection.doc(e).get().then(function(e){var o=e.data();o["uid"]=e.id,o=r.removeColumnsFromUserObject(o),t.$store.commit("setCurrentUser",o)})},getStringTerms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=e.split(""),o=[];return r.forEach(function(e,s){for(var a=s;a<r.length;a++){var n=r.slice(s,a+1);n.length>t&&o.push(r.slice(s,a+1).join(""))}}),o},arrayToObject:function(e){if("Array"==e.constructor.name){if(e.length>0){var t=e.reduce(function(e,t){return e[t]=!0,e},{});return t}console.warn("Empty array is given to arrayToObject method ")}else console.error("arrayToObject method accepts array. But "+e.constructor.name+" is given")},isFlashMessage:function(e){var t=this;return!t.$helpers.emptyOrNull(t.$store.state.flashMessage)&&t.$store.state.flashMessage.component==e},isFloat:function(e){e=e||window.event;var t=e.which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)&&46!==t))return!0;e.preventDefault()},isInteger:function(e){e=e||window.event;e.which?e.which:e.keyCode;if(8==e.which||0==e.which||!(e.which<48||e.which>57))return!0;e.preventDefault()},removeFlashMessage:function(e){var t=this;t.emptyOrNull(t.$store.state.flashMessage)||t.$store.state.flashMessage.component!=e&&t.$store.commit("clearFlashMessage")},removeColumnsFromUserObject:function(e){return delete e.name_terms,delete e.email_terms,delete e.ordered_projects,e},toggleSideBar:function(){var e=this;e.$store.commit("toggleSideBar")}}})},2:function(e,t){},3:function(e,t){},"35d4":function(e,t,r){e.exports=r.p+"img/thumb-default.8322af9d.jpg"},"41cb":function(e,t,r){"use strict";var o=r("2b0e"),s=r("8c4f"),a=r("c0d6"),n=(r("8aa5"),r("ce96")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"signup"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("h1",[e._v("Create A New Account")]),""!==e.errorMsg?r("div",{staticClass:"error-msg"},[r("p",[e._v(e._s(e.errorMsg))])]):e._e(),r("div",{staticClass:"form-wrap"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[r("div",{staticClass:"control has-icons-left"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.signupForm.email,expression:"signupForm.email",modifiers:{trim:!0}}],staticClass:"input is-medium",attrs:{type:"email",placeholder:"Email Address",required:""},domProps:{value:e.signupForm.email},on:{input:function(t){t.target.composing||e.$set(e.signupForm,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(0)]),r("div",{staticClass:"control has-icons-left"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.signupForm.password,expression:"signupForm.password",modifiers:{trim:!0}}],staticClass:"input is-medium",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.signupForm.password},on:{input:function(t){t.target.composing||e.$set(e.signupForm,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(1)]),r("input",{staticClass:"button",attrs:{type:"submit",value:"Sign Up"}})])]),r("div",{staticClass:"extras"},[r("router-link",{attrs:{to:"/login"}},[e._v("Already have an account? Sign In")])],1)])},c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-small is-left"},[r("i",{staticClass:"fas fa-envelope"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-small is-left"},[r("i",{staticClass:"fas fa-lock"})])}],l=(r("6b54"),r("ee2e")),d={name:"signup",data:function(){return{signupForm:{email:"",password:""},errorMsg:""}},methods:{signup:function(){var e=this,t=this;t.showLoader=!0,l.auth.createUserWithEmailAndPassword(this.signupForm.email,this.signupForm.password).then(function(r){var o={email:t.signupForm.email.toLowerCase(),password:e.signupForm.password,user_type:"customer",total_orders:0,ordered_projects:[]};o["email_terms"]=t.getStringTerms(t.signupForm.email.toLowerCase()),l.usersCollection.doc(r.user.uid).set(t.$helpers.addTimestamps(o)).then(function(){var e=t.$helpers.setUserObject(r.user,o);e=t.removeColumnsFromUserObject(e);var s=t.AES.encrypt(JSON.stringify(e),"encrypted user");t.$cookies.set("currentUser",s.toString(),"31MIN"),t.$eventHub.$emit("login-user"),t.showLoader=!1,t.$router.push("/dashboard")}).catch(function(e){t.showLoader=!1,t.consoleData("error getting user info : "+e),t.errorMsg=e.message})}).catch(function(e){t.showLoader=!1,t.consoleData("error creating user: "+e),t.errorMsg=e.message})}}},u=d,p=r("2877"),m=Object(p["a"])(u,i,c,!1,null,null,null),h=m.exports,_=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dashboard"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[o("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),o("b-alert",{attrs:{show:e.isFlashMessage("Dashboard"),dismissible:"",variant:e.$store.state.flashMessage.type},on:{dismissed:e.dismissAlert}},[e._v("\n        "+e._s(e.$store.state.flashMessage.message)+"\n    ")]),o("h1",[e._v("Your Projects")]),o("div",{staticClass:"start-new-project"},[o("p",[e._v("Ready to make something memorable?\n            "),o("button",{staticClass:"button",on:{click:e.createNewProject}},[e._v("Start New Project")])])]),e.projects.length>0?o("div",{staticClass:"project-grid"},e._l(e.projects,function(t,s){return o("div",{key:s,staticClass:"project",attrs:{id:t.id}},[o("router-link",{staticClass:"thumb_project",attrs:{to:{name:"Ordered"==t.status?"ProjectView":"ProjectEdit",params:{projectId:t.id}}}},[t.main_thumb_url?o("img",{attrs:{src:e.s3_base_url+t.id+"/thumb_"+t.main_image_name}}):o("img",{attrs:{src:r("35d4")}})]),o("p",{staticClass:"project-title"},[o("router-link",{attrs:{to:{name:"Ordered"==t.status?"ProjectView":"ProjectEdit",params:{projectId:t.id}}}},[e._v(e._s(e._f("capitalize")(t.title))+"\n                    ")]),o("br"),o("span",{staticClass:"text-muted"},[e._v("\n                        No. of Images: "),o("span",{staticClass:"no_count"},[e._v(e._s(t.total_photos))])])],1),o("div",{staticClass:"project-buttons"},["Ordered"==t.status?o("router-link",{staticClass:"project_action view_project",attrs:{to:{name:"ProjectView",params:{projectId:t.id}}}},[e._v("\n                         \n                    ")]):o("router-link",{staticClass:"project_action edit_project",attrs:{to:{name:"ProjectEdit",params:{projectId:t.id}}}},[e._v("\n                         \n                    ")]),"Ordered"==t.status?[o("span",{staticClass:"project_action share_project",on:{click:function(r){return e.modalAction("show",t.id)}}},[e._v("\n                             \n                        ")])]:e._e(),"new"==t.status?o("span",{staticClass:"project_action delete_project",on:{click:function(t){return e.requestDelete(s)}}},[e._v("\n                         \n                    ")]):e._e()],2)],1)}),0):e._e(),0==e.showLoader&&e.projects.length<=0?o("div",[e._v("\n            No project exists\n        ")]):e._e(),o("b-modal",{ref:"addUpdateCouponModal",attrs:{id:"addUpdateCouponModal",title:"Share Project","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":""},on:{close:function(t){return e.modalAction("hide")}}},[o("div",{staticClass:"columns is-multiple mt-2"},[o("div",{staticClass:"column is-12 pb-0"},[o("b-form-group",{attrs:{label:"Email","label-for":"title","invalid-feedback":"Email is required"}},[o("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"input customInput",class:[e.errors.first("email")?"field_error":""],attrs:{name:"email",id:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.errors.first("email")?o("b-popover",{attrs:{target:"email",triggers:"hover focus",placement:"leftbottom",content:e.errors.first("email")}}):e._e()],1)],1)]),o("div",{staticClass:"columns is-multiple text-center"},[o("div",{staticClass:"column is-12 btnsContainter"},[o("b-button",{ref:"shareBtn",staticClass:"customButtonMedium width_200 mediumColor",attrs:{type:"button",variant:"success"},on:{click:function(t){return e.shareProject(t)}}},[e._v("Share")])],1)])])],1)},f=[],v=(r("ac6a"),r("7f7f"),r("7230"),{name:"Dashboard",data:function(){return{loading:{type:Boolean},projects:[],hasOrder:{type:Boolean},currentUser:{},email:"",shareProjectId:null,s3_base_url:"https://s3.amazonaws.com/photomozaix-production/",start_at:null,start_after:null,per_page:12}},created:function(){var e=this;e.removeFlashMessage(e.$options.name),e.currentUser=e.$helpers.getCurrentUser(),e.$helpers.emptyOrNull(e.currentUser)&&e.$helpers.logOutUser(),window.addEventListener("scroll",e.scrollListener),e.getUserProjects(),e.loading=!1},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getUserProjects()},createNewProject:function(){var e=this,t=this,r=t.currentUser.uid,o="Untitled Project";o=o.toLowerCase();var s=t.getStringTerms(o),a=t.currentUser.email;a=a.toLowerCase();var n=t.getStringTerms(a),i=null,c=null;t.currentUser.first_name&&(i=t.currentUser.first_name+" "+t.currentUser.last_name,i=i.toLowerCase(),c=t.getStringTerms(i));var l={title:o,title_terms:s,user:r,user_email:a,email_terms:n,user_name:i,name_terms:c||[],total_photos:0,total_orders:0,completed_orders:0,main_thumb_url:null,main_image_id:null,main_image_name:null,status:"new"};l=t.$helpers.addTimestamps(l),t.fb.projectsCollection.add(l).then(function(t){var r=t.id;e.$router.push({name:"ProjectEdit",params:{projectId:r}})}).catch(function(r){t.consoleData(r),e.errorMsg=r.message})},requestDelete:function(e){var t=this,r=this;this.$swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#c31d8a",cancelButtonColor:"#b9acd2",confirmButtonText:"Yes, delete it!"}).then(function(o){if(o.value){var s=r.fb.db.batch(),a=t.$data.projects,n=r.fb.projectsCollection.doc(a[e].id);n.update({date_updated:new Date,date_deleted:new Date}).then(function(){r.consoleData("Project deleted!")}).catch(function(e){r.consoleData("Error deleting project: "+e)}),n.collection("assets").get().then(function(e){e.forEach(function(e){n.collection("assets").doc(e.id).update({date_updated:new Date,date_deleted:new Date}).then(function(){r.consoleData("asset "+e.id+" deleted")}).catch(function(t){r.consoleData("error deleting document"+e.id)})}),r.consoleData("Project assets deleted!")}).catch(function(e){r.consoleData("Error deleting project assets: "+e)}),s.commit().then(function(){r.projects.splice(e,1)})}})},getUserProjects:function(){var e=this,t=this.currentUser.uid;e.showLoader=!0;var r=e.fb.projectsCollection.where("user","==",t).where("date_deleted","==",null).orderBy("date_created","desc");e.start_after&&(r=r.startAfter(e.start_after)),r.limit(e.per_page).get().then(function(t){var r=t.docs.length;r>0?(window.addEventListener("scroll",e.scrollListener),e.start_at=t.docs[0],e.start_after=t.docs[r-1]):window.removeEventListener("scroll",e.scrollListener),t.forEach(function(t){var r=t.data();r["id"]=t.id,e.projects.push(r)}),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.consoleData("Error getting projects: "+t)})},shareProject:function(){var e=this;e.$validator.validateAll().then(function(t){if(!t)return e.$helpers.consoleData("form Validation Fails while adding coupon"),!1;var r="https://api.photomozaix.com/api/project/"+e.shareProjectId+"/share",o={email:e.email,base_url:"https://store.photomozaix.com/",shared_by:e.currentUser.email};e.emptyOrNull(e.currentUser)||(o["first_name"]=e.currentUser.first_name,o["last_name"]=e.currentUser.last_name),e.showLoader=!0,e.$http.post(r,o).then(function(t){var r=t.body;if(r.success){var o=r.data.share_code,s=r.data.project_id,a=r.data.share_with,n={project_id:s,share_code:o,share_with:a,shared_by:e.currentUser.email,shared_by_id:e.currentUser.uid,used:!1};n=e.$helpers.addTimestamps(n),e.fb.projectSharedCollection.add(n).then(function(t){e.showLoader=!1,e.simpleAlert({type:"success",text:"Your project has been shared with "+a}),e.showLoader=!1,e.modalAction("hide",null,event)}).catch(function(t){e.showLoader=!1,e.consoleData("error sharing project: "+t)})}else e.showLoader=!1,e.simpleAlert({type:"error",text:r.errors[0]})},function(t){e.consoleData("error vue resource"),e.showLoader=!1,e.simpleAlert({type:"error",text:"Something went wrong. Please try again"})})})},modalAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this;t&&(o.shareProjectId=t),"show"==e&&o.$bvModal.show("addUpdateCouponModal"),"hide"==e&&(r&&(r.target.disabled=!1),o.email="",o.shareProjectId=null,o.$bvModal.hide("addUpdateCouponModal"))}}}),g=v,b=Object(p["a"])(g,_,f,!1,null,null,null),C=b.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"checkout"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("router-link",{staticClass:"back",attrs:{to:{name:"ProjectOrderPage",params:{projectId:e.projectId,shareCode:e.shareCode}}}},[r("i",{staticClass:"fal fa-angle-left"}),e._v(" Back to Your Order Page\n    ")]),r("h1",[e._v("Checkout")]),r("div",{staticClass:"checkoutSections mt-5"},[e.emptyOrNull(e.orderInfo)?e._e():r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-6 mr-4"},[r("div",{staticClass:"personalInfo"},[r("div",{staticClass:"columns alignFlexCenter"},[e._m(0),r("div",{staticClass:"column"},[r("span",{staticClass:"input customInput focusInput"},[e._v(e._s(e.orderInfo.email))])])]),r("div",{staticClass:"columns alignFlexCenter"},[e._m(1),r("div",{staticClass:"column"},[r("span",{staticClass:"input customInput focusInput"},[e._v(e._s(e.orderInfo.address))])])]),r("div",{staticClass:"columns alignFlexCenter"},[e._m(2),r("div",{staticClass:"column"},[r("span",{staticClass:"input customInput focusInput"},[e._v("\n                            "+e._s(e._f("uppercase")("self_pick"==e.orderInfo.shipping_method?"STORE PICK UP":e.orderInfo.shipping_method+" Shipping"))+"\n                            "+e._s(e._f("currency")("standard"==e.orderInfo.shipping_method?e.orderInfo.standard_shipping:"express"==e.orderInfo.shipping_method?e.orderInfo.express_shipping:"0.00"))+"\n                        ")])])])]),e.orderInfo.grand_total>0?[r("div",{staticClass:"mt-4 innerHeading"},[e._v("Payment")]),r("p",[e._v("All transactions are secure and encrypted.")]),r("div",{staticClass:"innerBoxBordered mt-3"},[r("div",{staticClass:"innerHeading acceptedPayments"},[e._v("Accepted Payment Types")]),r("b-form-group",{staticClass:"flexElem mb-2 mt-2",attrs:{label:"Billing address same as shipping","label-for":"set_base_price"}},[r("b-form-checkbox",{staticStyle:{cursor:"pointer","margin-left":"20px"},attrs:{name:"same_address",switch:""},model:{value:e.same_address,callback:function(t){e.same_address=t},expression:"same_address"}})],1),[e._m(3),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pt-0"},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput",class:[e.errors.first("name_on_card")?"field_error":""],attrs:{name:"name_on_card",id:"name_on_card",placeholder:"Name On Card"},model:{value:e.name_on_card,callback:function(t){e.name_on_card=t},expression:"name_on_card"}}),e.errors.first("name_on_card")?r("b-popover",{attrs:{target:"name_on_card",triggers:"hover focus",content:e.errors.first("name_on_card")}}):e._e()],1)]),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"address","invalid-feedback":"Address is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput grayBg inputLocationIcon leftIcon",class:[e.errors.first("address")?"field_error":""],attrs:{name:"address",id:"address",placeholder:"Address"},model:{value:e.credit_card_info.address,callback:function(t){e.$set(e.credit_card_info,"address",t)},expression:"credit_card_info.address"}}),e.errors.first("address")?r("b-popover",{attrs:{target:"address",triggers:"hover focus",content:e.errors.first("address")}}):e._e()],1)],1)]),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"city","invalid-feedback":"City is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput grayBg inputLocationIcon leftIcon",class:[e.errors.first("city")?"field_error":""],attrs:{name:"city",id:"city",placeholder:"City"},model:{value:e.credit_card_info.city,callback:function(t){e.$set(e.credit_card_info,"city",t)},expression:"credit_card_info.city"}}),e.errors.first("city")?r("b-popover",{attrs:{target:"city",triggers:"hover focus",content:e.errors.first("city")}}):e._e()],1)],1)]),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"country","invalid-feedback":"Country is required"}},[r("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"countryDropdown",class:[e.errors.first("country")?"field_error":"","input grayBg customInput"],attrs:{options:e.countries,name:"country",id:"country","data-vv-name":"country"},model:{value:e.credit_card_info.country,callback:function(t){e.$set(e.credit_card_info,"country",t)},expression:"credit_card_info.country"}}),e.errors.first("country")?r("b-popover",{attrs:{target:"country",triggers:"hover focus",content:e.errors.first("country")}}):e._e()],1)],1),r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"region","invalid-feedback":"Region is required"}},[r("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"regionDropdown",class:[e.errors.first("region")?"field_error":"","input grayBg customInput"],attrs:{options:e.regions,id:"region","data-vv-name":"region"},model:{value:e.credit_card_info.region,callback:function(t){e.$set(e.credit_card_info,"region",t)},expression:"credit_card_info.region"}}),e.errors.first("region")?r("b-popover",{attrs:{target:"region",triggers:"hover focus",content:e.errors.first("region")}}):e._e()],1)],1),r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"zip_code","invalid-feedback":"Zip Code is required"}},[r("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"99999",expression:"'99999'"},{name:"validate",rawName:"v-validate",value:"required|maskCompleted",expression:"'required|maskCompleted'"}],staticClass:"input customInput grayBg",class:[e.errors.first("zip_code")?"field_error":""],attrs:{name:"zip_code",placeholder:"Zip Code",id:"zip_code"},model:{value:e.credit_card_info.zip_code,callback:function(t){e.$set(e.credit_card_info,"zip_code",t)},expression:"credit_card_info.zip_code"}}),e.errors.first("zip_code")?r("b-popover",{attrs:{target:"zip_code",triggers:"hover focus",content:e.errors.first("zip_code")}}):e._e()],1)],1)])],r("hr",{staticClass:"medium"}),e.serverErrors.length>0?r("b-alert",{attrs:{variant:"danger",show:""}},[r("ul",e._l(e.serverErrors,function(t){return r("li",[e._v(e._s(t))])}),0)]):e._e(),e._m(4),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pt-0"},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:16",expression:"'required|max:16'"}],staticClass:"input customInput",class:[e.errors.first("credit_card_no")?"field_error":""],attrs:{name:"credit_card_no",id:"credit_card_no",placeholder:"7777 8888 9999 0000"},model:{value:e.credit_card_no,callback:function(t){e.credit_card_no=t},expression:"credit_card_no"}}),e.errors.first("credit_card_no")?r("b-popover",{attrs:{target:"credit_card_no",triggers:"hover focus",content:e.errors.first("credit_card_no")}}):e._e()],1)]),r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-6"},[e._m(5),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pt-0"},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min:3|max:3",expression:"'required|numeric|min:3|max:3'"}],staticClass:"input customInput",class:[e.errors.first("cvv_code")?"field_error":""],attrs:{name:"cvv_code",id:"cvv_code",placeholder:"777"},model:{value:e.cvv_code,callback:function(t){e.cvv_code=t},expression:"cvv_code"}}),e.errors.first("cvv_code")?r("b-popover",{attrs:{target:"cvv_code",triggers:"hover focus",content:e.errors.first("cvv_code")}}):e._e()],1)])]),r("div",{staticClass:"column is-6"},[e._m(6),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pt-0"},[r("vue-date",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"data-vv-name":"card_expiry",id:"card_expiry","input-class":{field_error:e.errors.first("card_expiry"),"input customInput":!0},"clear-button":!0,"clear-button-icon":"fas fa-times",placeholder:"Select Date","disabled-dates":e.datepicker.disabledDates,format:e.customFormatter,"minimum-view":"month"},model:{value:e.card_expiry,callback:function(t){e.card_expiry=t},expression:"card_expiry"}}),e.errors.first("card_expiry")?r("b-popover",{attrs:{target:"card_expiry",triggers:"hover focus",content:e.errors.first("card_expiry")}}):e._e()],1)])])])],2)]:e._e()],2),r("div",{staticClass:"column is-6 ml-4"},[r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter"},[r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e._v(e._s(e._f("capitalize")(e.orderInfo.product_title)))])]),r("div",{staticClass:"column mt-4 text-right"},[r("div",{staticClass:"innerHeading"},[e._v("\n                            "+e._s(e._f("currency")(e.orderInfo.first_order_check?e.orderInfo.base_price:e.orderInfo.total_price))+"\n                        ")])])]),e.orderInfo.quantity>1&&e.orderInfo.quantity<10&&e.orderInfo.set_base_price&&e.orderInfo.include_base_price?[r("hr",{staticClass:"medium mt-0 mb-0"}),r("div",{staticStyle:{"text-align":"center","margin-bottom":"15px"}},[r("div",{staticClass:"columns is-multiline noTextBreak",staticStyle:{display:"inline-flex"}},[r("div",{staticClass:"column is-full"},[r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter"},[r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e._v(e._s("1st Mozaix"))])]),r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e._v(e._s("1 X $"+e.orderInfo.base_price))])])])]),r("div",{staticClass:"column is-full"},[e.orderInfo.quantity>1?[r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter"},[r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e._v(e._s("2 - "+e.orderInfo.quantity+" Mozaix"))])]),r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e._v(e._s(parseInt(e.orderInfo.quantity)-1+" X $"+e.orderInfo.selected_product_price))])])])]:e._e()],2)])]),r("hr",{staticClass:"medium mt-0 mb-0"})]:e._e(),e.orderInfo.total_discount>0?r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[e._m(7),r("div",{staticClass:"column mt-4 text-right"},[r("div",{staticClass:"innerHeading"},[r("b",[e._v("-")]),e._v(e._s(e._f("currency")(e.orderInfo.total_discount)))])])]):e._e(),e.orderInfo.express_production?r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[e._m(8),r("div",{staticClass:"column mt-4 text-right"},[r("div",{staticClass:"innerHeading"},[e._v(e._s(e._f("currency")(e.orderInfo.express_production_price)))])])]):e._e(),r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[e._m(9),r("div",{staticClass:"column mt-4 text-right"},[r("div",{staticClass:"innerHeading"},[e._v(e._s(e._f("currency")(e.orderInfo.before_tax_sub_total)))])])]),r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e.orderInfo.north_caroline_tax?[e._v("Tax (7.25%)")]:e._e(),e.orderInfo.united_states_tax?[e._v("Tax (7.50%)")]:e._e()],2)]),r("div",{staticClass:"column mt-4 text-right"},[r("div",{staticClass:"innerHeading"},[e.orderInfo.north_caroline_tax?[e._v(" "+e._s(e._f("currency")(e.orderInfo.north_caroline_tax)))]:e._e(),e.orderInfo.united_states_tax?[e._v(" "+e._s(e._f("currency")(e.orderInfo.united_states_tax)))]:e._e()],2)])]),r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[e._m(10),r("div",{staticClass:"column text-right"},[r("div",{staticClass:"innerHeading"},[e._v("\n                            "+e._s(e._f("currency")("standard"==e.orderInfo.shipping_method?e.orderInfo.standard_shipping:"express"==e.orderInfo.shipping_method?e.orderInfo.express_shipping:"0.00"))+"\n                        ")])])]),r("hr",{staticClass:"medium"}),r("div",{staticClass:"columns is-multiline is-mobile mt-4 alignFlexCenter mb-0"},[e._m(11),r("div",{staticClass:"column text-right"},[r("div",{staticClass:"innerHeading"},[r("span",{staticStyle:{"font-size":"1.9rem"}},[e._v(e._s(e._f("currency")(e.orderInfo.grand_total)))])])])]),r("div",{staticClass:"columns is-multiline is-mobile mt-3"},[r("div",{staticClass:"column"},[r("button",{staticClass:"customButtonLarge lightColor blockButton",on:{click:function(t){return e.payNow(t)}}},[e._v("\n                            "+e._s(e.orderInfo.grand_total>0?"Pay ":"Order ")+" Now\n                        ")])])]),e._m(12),e._m(13),e._m(14),e._m(15),e._m(16)],2)])])],1)},y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-2"},[r("strong",{staticClass:"semiBold"},[e._v("Contact")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-2"},[r("strong",{staticClass:"semiBold"},[e._v("Ship to")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-2"},[r("strong",{staticClass:"semiBold"},[e._v("Method")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-multiline mt-3"},[r("div",{staticClass:"column is-12 pb-0"},[r("div",{staticClass:"innerHeading"},[e._v("\n                                        Card Information\n                                    ")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("label",{attrs:{for:"credit_card_no"}},[e._v("CREDIT CARD NUMBER")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("label",{attrs:{for:"cvv_code"}},[e._v("CVV CODE")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("label",{attrs:{for:"card_expiry"}},[e._v("Exp Date")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e._v("Discount")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e._v("Express Production")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e._v("Subtotal")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column "},[r("div",{staticClass:"innerHeading"},[e._v("Shipping")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column "},[r("div",{staticClass:"innerHeading"},[e._v("Total")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns mt-4 mb-0"},[r("div",{staticClass:"column"},[r("div",{staticClass:"innerHeading"},[e._v("\n                            Need Help?\n                        ")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns"},[r("div",{staticClass:"column pt-0"},[r("div",{staticClass:"text-muted"},[e._v("\n                            If you need help, Please contact us at (704) 846-5588 and operational hours are M-F/9-5.\n                        ")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns mt-3 mb-0"},[r("div",{staticClass:"column"},[r("div",{staticClass:"innerHeading"},[e._v("\n                            Security\n                        ")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns"},[r("div",{staticClass:"column pt-0"},[r("div",{staticClass:"text-muted"},[e._v("\n                            Photomozaix takes your security to heart. We have been verified by Authorized.Net and\n                            secured by GoDaddy.com.\n                        ")])])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("img",{attrs:{src:r("631a"),alt:"authorize.net"}})])])}],x=r("fa33"),j=r("ee2e"),I={name:"Checkout",props:["projectId","shareCode"],components:{"vue-date":x["a"]},data:function(){return{credit_card_no:"",cvv_code:"",card_expiry:"",name_on_card:"",serverErrors:[],currentUser:{},same_address:!1,credit_card_info:{address:"",city:"",country:"United States",region:null,zip_code:null},orderInfo:null,applied_coupon:null,datepicker:{disabledDates:{to:new Date}},projectSetting:null}},watch:{same_address:function(e,t){var r=this;0==e?(r.name_on_card="",r.credit_card_info={address:"",city:"",country:"United States",region:null,zip_code:null},r.$cookies.remove("same_Address")):(r.name_on_card=r.orderInfo.first_name+" "+r.orderInfo.last_name,r.credit_card_info.address=r.orderInfo.address,r.credit_card_info.city=r.orderInfo.city,setTimeout(function(){r.credit_card_info.region=r.orderInfo.region},500),r.credit_card_info.zip_code=r.orderInfo.zip_code,r.$cookies.set("same_address",r.same_address,"15MIN"))}},created:function(){var e=this;if(e.fb.settingsCollection.get().then(function(t){if(t.docs.length>0){var r=t.docs[0].data();r["id"]=t.docs[0].id,e.projectSetting=r}else e.consoleData("project setting collection not found"),e.$router.push({name:"ProjectOrderPage",params:{projectId:e.projectId}})}).then().catch(function(t){e.consoleData("error getting current order number : "+t),e.$router.push({name:"ProjectOrderPage",params:{projectId:e.projectId}})}),e.datepicker.disabledDates.to=e.$moment().endOf("day").subtract(1,"day").toDate(),e.removeFlashMessage("Checkout"),e.currentUser=e.$helpers.getCurrentUser(),e.emptyOrNull(e.currentUser)){var t=e.$helpers.setMessage("success","Your session has been expired. Please login again.","Login");e.$store.commit("setFlashMessage",t),e.$eventHub.$emit("logout-user")}e.getOrderInfo(),e.$session.has("same_address")&&(e.same_address=e.$session.get("same_address"),e.credit_card_info=e.$session.get("credit_card_info"),e.$session.remove("same_address"),e.$session.remove("credit_card_info")),e.validateShareCode()},methods:{payNow:function(e){var t=this;if(void 0===t.orderInfo){var r=t.$helpers.setMessage("danger","This transaction has already been completed.","Dashboard");t.$store.commit("setFlashMessage",r),t.$router.push({name:"UserDashboard"})}t.$validator.validateAll().then(function(e){if(!e)return t.$helpers.consoleData("form Validation Fails while checking out"),!1;if(t.emptyOrNull(t.currentUser)){var r=t.$helpers.setMessage("success","Your session has been expired. Please login again.","Login");t.$store.commit("setFlashMessage",r),t.$eventHub.$emit("logout-user")}if(t.$cookies.isKey("order_info"))t.showLoader=!0,t.orderInfo.discount_code?j.couponsCollection.where("code","==",t.orderInfo.discount_code).where("date_deleted","==",null).get().then(function(e){if(e.docs.length>0){var r=e.docs[0].data();if(r["id"]=e.docs[0].id,"Active"==r.status)if(r.coupon_products.length>0){var o=r.coupon_products.some(function(e){return e==t.orderInfo.product_id});if(o){var s=t.$moment().startOf("day"),a=t.$moment(r.valid_till.toDate()),n=r.used_by.some(function(e){return e==t.currentUser.uid});if(n){var i="Coupon ( "+t.orderInfo.discount_code+" ) already used.";t.showErrorAndRedirect("Already Used",i)}else if(r.used_by.length>=r.max_use){var c="Coupon ( "+t.orderInfo.discount_code+" ) max use limit exceeded.";t.showErrorAndRedirect("Max Used",c)}else if(a.diff(s,"hours")<=0){var l="Coupon ( "+t.orderInfo.discount_code+" ) has been expired.";t.showErrorAndRedirect("Coupon Expired",l)}else t.applied_coupon=r,t.chargeCreditCard()}else{var d="Coupon ( "+t.orderInfo.discount_code+" ) can not be used for selected product.";t.showErrorAndRedirect("Not Applicable",d)}}else{var u="Coupon ( "+t.orderInfo.discount_code+" ) can not be used for selected product.";t.showErrorAndRedirect("Not Applicable",u)}else{var p="Coupon "+r.status,m="Coupon Has Status "+r.status;t.showErrorAndRedirect(p,m)}}else{var h="The Coupon ( "+t.orderInfo.discount_code+" ) Does Not Exist. Please Try Another";t.showErrorAndRedirect("Not Found",h)}}).catch(function(e){t.consoleData("error getting coupon code : "+e)}):t.chargeCreditCard();else{var o=t.$helpers.setMessage("danger","Your session has been expired. Please Order Again.","ProjectOrderPage");t.$store.commit("setFlashMessage",o),t.$router.push({name:"ProjectOrderPage",params:{projectId:t.projectId,shareCode:t.shareCode}})}})},setObject:function(){var e=this,t=0;"express"==e.orderInfo.shipping_method?t=e.orderInfo.express_shipping:"standard"==e.orderInfo.shipping_method&&(t=e.orderInfo.standard_shipping);var r=0;e.orderInfo.express_production&&(r=e.orderInfo.express_production_price);var o={user_uid:e.currentUser.uid,project_id:e.orderInfo.projectId,project_title:e.orderInfo.project_title,project_photos_count:e.orderInfo.project_photos_count,order_email:e.orderInfo.email,first_name:e.orderInfo.first_name,last_name:e.orderInfo.last_name,address:e.orderInfo.address,city:e.orderInfo.city,country:e.orderInfo.country,region:e.orderInfo.region,zip_code:e.orderInfo.zip_code,phone_no:e.orderInfo.phone_no,quantity:e.orderInfo.quantity,total_price:e.orderInfo.total_price,discount_code:e.orderInfo.discount_code,total_discount:e.orderInfo.total_discount,sub_total:e.orderInfo.sub_total,shipping_method:e.orderInfo.shipping_method,shipping_charges:t,grand_total:e.orderInfo.grand_total,express_production:r,status:"Ordered"};return o},validateShareCode:function(){var e=this;e.shareCode&&j.projectSharedCollection.where("share_code","==",e.shareCode).where("date_deleted","==",null).get().then(function(t){if(t.docs.length>0){var r=t.docs[0].data();r["id"]=t.docs[0].id,e.projectSharedInfo=r,e.email=e.projectSharedInfo.share_with}else e.projectSharedInfo={},e.$router.push({name:"OpenSharedProject",params:{projectId:e.projectId,shareCode:e.shareCode}})}).catch(function(t){e.consoleData("error getting shared code information: "+t)})},chargeCreditCard:function(){var e=this,t="https://api.photomozaix.com/api/charge/credit_card",r=e.$moment(e.card_expiry).format("MM/YY"),o={credit_card_no:e.credit_card_no,cvv_code:e.cvv_code,card_expiry:r,amount:e.orderInfo.grand_total};o["first_name"]=e.orderInfo.first_name,o["last_name"]=e.orderInfo.last_name,o["address"]=e.credit_card_info.address,o["city"]=e.credit_card_info.city,o["state"]=e.credit_card_info.region,o["zip_code"]=e.credit_card_info.zip_code,o["country"]=e.credit_card_info.country,e.orderInfo.grand_total>0?e.$http.post(t,o).then(function(t){var r=t.body;if(e.serverErrors=[],r.success)e.insertData();else if("400"==r.code)e.serverErrors=r.errors,e.showLoader=!1;else if("401"==r.code){e.showLoader=!1;var o="Error charging credit card";r.errors&&r.errors[0]&&(o=r.errors[0]),e.simpleAlert({type:"error",title:r.message,text:o})}},function(e){}):e.insertData()},insertData:function(){var e=this,t=e.setObject();t["collage_uploaded"]=!1,t["email_terms"]=e.getStringTerms(e.orderInfo.email),t["product_id"]=e.orderInfo.product_id,t["order_no"]=(e.projectSetting?parseInt(e.projectSetting.last_order_no):1)+1,t["comment"]="",t["tracking_number"]="",t=e.$helpers.addTimestamps(t),e.fb.ordersCollection.add(t).then(function(t){var r=e.fb.firestore.FieldValue.increment(1);e.fb.settingsCollection.doc(e.projectSetting.id).update({last_order_no:r}),e.fb.ordersCollection.doc(t.id).update({order_id:t.id.toLowerCase()}).then(function(){e.consoleData("order id added in order object"),e.$helpers.consoleData("Order Info Added");var r="https://api.photomozaix.com/api/new/order/email",o={order_id:t.id,order_no:(e.projectSetting?parseInt(e.projectSetting.last_order_no):1)+1,quantity:e.orderInfo.quantity,order_total:e.orderInfo.grand_total,address:e.orderInfo.address,country:e.orderInfo.country,city:e.orderInfo.city,state:e.orderInfo.region,zip_code:e.orderInfo.zip_code,name:e.orderInfo.first_name+" "+e.orderInfo.last_name,email:e.orderInfo.email,order_link:"https://store.photomozaix.com/admin/order/"+t.id+"/detail",front_base_url:window.location.origin};e.$http.post(r,o).then(function(e){e.body},function(e){});var s=e.fb.firestore.FieldValue.increment(1),a=e.fb.firestore.FieldValue.arrayUnion(e.orderInfo.projectId);e.fb.usersCollection.doc(e.currentUser.uid).update({total_orders:s,ordered_projects:a}).then(function(){e.consoleData("user total orders and ordered projects updated"),j.projectsCollection.doc(e.projectId).get().then(function(t){var r=t.data(),o=parseInt(r.total_orders)+1;j.projectsCollection.doc(e.projectId).update({status:"Ordered",total_orders:o}).then(function(){e.$helpers.consoleData("Project status with total orders updated"),e.applied_coupon||e.shareCode?(e.applied_coupon&&e.shareCode&&j.couponsCollection.doc(e.applied_coupon.id).update({used_by:j.firestore.FieldValue.arrayUnion(e.currentUser.uid)}).then(function(){e.$helpers.consoleData("Updated coupon code used by field"),j.projectSharedCollection.where("share_code","==",e.shareCode).get().then(function(t){if(t.docs.length>0){var r=t.docs[0];j.projectSharedCollection.doc(r.id).update({used:!0,date_updated:new Date}).then(function(){e.consoleData("project shared collection updated"),e.afterOrderCompleted()}).catch(function(t){e.consoleData("error updating share code : "+t),e.showLoader=!1})}else e.afterOrderCompleted()}).catch(function(t){e.consoleData("error getting share code doc: "+t),e.showLoader=!1})}).catch(function(t){e.$helpers.consoleData("Error updating coupon code used by field: "+t),e.showLoader=!1}),e.applied_coupon&&j.couponsCollection.doc(e.applied_coupon.id).update({used_by:j.firestore.FieldValue.arrayUnion(e.currentUser.uid)}).then(function(){e.$helpers.consoleData("Updated coupon code used by field"),e.afterOrderCompleted()}).catch(function(t){e.$helpers.consoleData("Error updating coupon code used by field: "+t),e.showLoader=!1}),e.shareCode&&j.projectSharedCollection.where("share_code","==",e.shareCode).get().then(function(t){if(t.docs.length>0){var r=t.docs[0];j.projectSharedCollection.doc(r.id).update({used:!0,date_updated:new Date}).then(function(){e.consoleData("project shared collection updated"),e.afterOrderCompleted()}).catch(function(t){e.consoleData("error updating share code : "+t),e.showLoader=!1})}else e.afterOrderCompleted()}).catch(function(t){e.consoleData("error getting share code doc: "+t),e.showLoader=!1})):e.afterOrderCompleted()}).catch(function(t){e.$helpers.consoleData("error updating project status: "+t)})}).catch(function(t){e.$helpers.consoleData("error getting project: "+t),e.showLoader=!1})}).catch(function(t){e.$helpers.consoleData("Error updating user total orders and ordered projects: "+t),e.showLoader=!1})}).catch(function(t){e.consoleData("error adding order id order object: "+t)})}).catch(function(t){e.$helpers.consoleData("Error adding order info : "+t),e.showLoader=!1})},getOrderInfo:function(){var e=this;if(e.$cookies.isKey("order_info")){var t=e.AES.decrypt(e.$cookies.get("order_info"),e.envKeys.order_encryption_key),r=JSON.parse(t.toString(e.UTF8));if(e.projectId==r.projectId)e.orderInfo=r;else{e.$cookies.remove("order_info");var o={projectId:e.projectId};e.shareCode&&(o["shareCode"]=e.shareCode),e.$router.push({name:"ProjectOrderPage",params:{projectId:o,shareCode:e.shareCode}})}}else{var s=e.$helpers.setMessage("danger","Your session has been expired. Please Order Again.","ProjectOrderPage");e.$store.commit("setFlashMessage",s),e.$router.push({name:"ProjectOrderPage",params:{projectId:e.projectId,shareCode:e.shareCode}})}},customFormatter:function(e){var t=this;return t.$moment(e).format("MM/YY")},afterOrderCompleted:function(){var e=this;e.showLoader=!1,e.orderInfo=null,e.$cookies.remove("order_info");var t=e.$helpers.setMessage("success","Thank you for creating such a memorable keepsake for you to cherish for a lifetime!","MyOrders");e.$store.commit("setFlashMessage",t),e.$swal.fire({title:"Order Placed",text:"Thank you for creating such a memorable keepsake for you to cherish for a lifetime!",type:"success",allowOutsideClick:!1,showCancelButton:!1,confirmButtonText:"OK"}).then(function(t){t.value&&e.$router.push({name:"MyOrders"})})},showErrorAndRedirect:function(e,t){var r=this;if(r.showLoader=!1,r.orderInfo.discount_code="",r.orderInfo.applied_coupon=null,r.$cookies.isKey("order_info")){r.$cookies.remove("order_info");var o=r.AES.encrypt(JSON.stringify(r.orderInfo),r.envKeys.order_encryption_key);r.$cookies.set("order_info",o.toString(),"15MIN")}r.$swal.fire({type:"error",title:e,text:t,allowOutsideClick:!1,showCancelButton:!1,confirmButtonText:"OK"}).then(function(e){e.value&&r.$router.push({name:"ProjectOrderPage",params:{projectId:r.projectId,shareCode:r.shareCode}})})}}},k=I,A=Object(p["a"])(k,w,y,!1,null,null,null),D=A.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"checkout"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("b-alert",{attrs:{show:e.isFlashMessage("ProjectOrderPage"),dismissible:"",variant:e.$store.state.flashMessage.type},on:{dismissed:e.dismissAlert}},[e._v("\n        "+e._s(e.$store.state.flashMessage.message)+"\n    ")]),r("h1",[e._v("Checkout")]),r("div",{staticClass:"checkoutSections mt-5"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-6 mr-4"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("b-form-group",{staticClass:"innerHeading",attrs:{label:"Email","label-for":"email","invalid-feedback":"Email is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"input customInput grayBg inputEmailIcon leftIcon",class:[e.errors.first("email")?"field_error":""],attrs:{name:"email",id:"email",placeholder:"Email",disabled:!e.$helpers.emptyOrNull(e.currentUser)},on:{change:e.checkUser},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.errors.first("email")?r("b-popover",{attrs:{target:"email",triggers:"hover focus",content:e.errors.first("email")}}):e._e()],1)],1),e.$helpers.emptyOrNull(e.currentUser)?r("div",{ref:"passwordDiv",staticClass:"column pb-0"},[r("b-form-group",{staticClass:"innerHeading",attrs:{label:"Password","label-for":"password","invalid-feedback":"Password is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput grayBg inputPasswordIcon leftIcon",class:[e.errors.first("password")?"field_error":""],attrs:{type:"password",name:"password",id:"password",placeholder:"Password"},on:{change:e.checkUser},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.errors.first("password")?r("b-popover",{attrs:{target:"password",triggers:"hover focus",content:e.errors.first("password")}}):e._e()],1)],1):e._e()]),r("div",{staticClass:"columns is-multiline mt-3"},[e._m(0),r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"first_name","invalid-feedback":"First Name is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput grayBg inputUserIcon leftIcon",class:[e.errors.first("first_name")?"field_error":""],attrs:{type:"text",name:"first_name",id:"first_name",placeholder:"First Name"},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}}),e.errors.first("first_name")?r("b-popover",{attrs:{target:"first_name",triggers:"hover focus",content:e.errors.first("first_name")}}):e._e()],1)],1),r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"last_name","invalid-feedback":"Last Name is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput grayBg inputUserIcon leftIcon",class:[e.errors.first("last_name")?"field_error":""],attrs:{type:"text",name:"last_name",id:"last_name",placeholder:"Last Name"},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}}),e.errors.first("last_name")?r("b-popover",{attrs:{target:"last_name",triggers:"hover focus",content:e.errors.first("last_name")}}):e._e()],1)],1)]),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"address","invalid-feedback":"Address is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput grayBg inputLocationIcon leftIcon",class:[e.errors.first("address")?"field_error":""],attrs:{name:"address",id:"address",placeholder:"Address"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),e.errors.first("address")?r("b-popover",{attrs:{target:"address",triggers:"hover focus",content:e.errors.first("address")}}):e._e()],1)],1)]),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"city","invalid-feedback":"City is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput grayBg inputLocationIcon leftIcon",class:[e.errors.first("city")?"field_error":""],attrs:{name:"city",id:"city",placeholder:"City"},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}}),e.errors.first("city")?r("b-popover",{attrs:{target:"city",triggers:"hover focus",content:e.errors.first("city")}}):e._e()],1)],1)]),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"country","invalid-feedback":"City is required"}},[r("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"countryDropdown",class:[e.errors.first("country")?"field_error":"","input grayBg customInput"],attrs:{options:e.countries,name:"country",id:"country","data-vv-name":"country"},model:{value:e.country,callback:function(t){e.country=t},expression:"country"}}),e.errors.first("country")?r("b-popover",{attrs:{target:"country",triggers:"hover focus",content:e.errors.first("country")}}):e._e()],1)],1),r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"region","invalid-feedback":"Region is required"}},[r("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"regionDropdown",class:[e.errors.first("region")?"field_error":"","input grayBg customInput"],attrs:{options:e.regions,id:"region","data-vv-name":"region"},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}}),e.errors.first("region")?r("b-popover",{attrs:{target:"region",triggers:"hover focus",content:e.errors.first("region")}}):e._e()],1)],1),r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"zip_code","invalid-feedback":"Zip Code is required"}},[r("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"99999",expression:"'99999'"},{name:"validate",rawName:"v-validate",value:"required|maskCompleted",expression:"'required|maskCompleted'"}],staticClass:"input customInput grayBg",class:[e.errors.first("zip_code")?"field_error":""],attrs:{name:"zip_code",placeholder:"Zip Code",id:"zip_code"},model:{value:e.zip_code,callback:function(t){e.zip_code=t},expression:"zip_code"}}),e.errors.first("zip_code")?r("b-popover",{attrs:{target:"zip_code",triggers:"hover focus",content:e.errors.first("zip_code")}}):e._e()],1)],1)]),r("div",{staticClass:"columns"},[r("div",{staticClass:"column pb-0"},[r("b-form-group",{attrs:{"label-for":"phone_no","invalid-feedback":"Phone No. is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|maskCompleted",expression:"'required|maskCompleted'"},{name:"mask",rawName:"v-mask",value:"+1 (999)-999-9999",expression:"'\\+1 (999)-999-9999'"}],staticClass:"input customInput grayBg inputPhoneIcon leftIcon",class:[e.errors.first("phone_no")?"field_error":""],attrs:{type:"text",name:"phone_no",placeholder:"Phone Number",id:"phone_no"},model:{value:e.phone_no,callback:function(t){e.phone_no=t},expression:"phone_no"}}),e.errors.first("phone_no")?r("b-popover",{attrs:{target:"phone_no",triggers:"hover focus",content:e.errors.first("phone_no")}}):e._e()],1)],1)])]),r("div",{staticClass:"column is-6 ml-4"},[e._m(1),r("hr",{staticClass:"medium mt-0"}),r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter"},[r("div",{staticClass:"column is-6"},[e.selectedProduct?r("div",{staticClass:"innerHeading"},[e._v(e._s(e._f("capitalize")(e.selectedProduct.title)))]):e._e()]),r("div",{staticClass:"column is-3 text-center"},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:1",expression:"'required|numeric|min_value:1'"}],staticClass:"input grayBg customInput",class:[e.errors.first("quantity")?"field_error":""],attrs:{type:"number",min:"1",name:"quantity",id:"quantity"},on:{change:function(t){return e.calculatePrice("yes")},keydown:e.checkQuantity},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}}),e.errors.first("quantity")?r("b-popover",{attrs:{target:"quantity",triggers:"hover focus",content:e.errors.first("quantity")}}):e._e()],1),r("div",{staticClass:"column is-3 text-right"},[r("div",{staticClass:"innerHeading",staticStyle:{"word-break":"break-all","word-wrap":"break-word"}},[e._v(e._s(e._f("currency")(e.mozaix_price)))])])]),r("hr",{staticClass:"medium mt-0"}),r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[e._m(2),e.total_discount>0?r("div",{staticClass:"column is-3 text-right"},[r("div",{staticClass:"innerHeading"},[e._v("-"+e._s(e._f("currency")(e.total_discount)))])]):e._e()]),r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter"},[r("div",{staticClass:"column is-9"},[r("b-form-input",{staticClass:"input customInput",attrs:{name:"discount_code",placeholder:"Discount Code"},on:{change:e.checkCoupon},model:{value:e.discount_code,callback:function(t){e.discount_code=t},expression:"discount_code"}})],1),r("div",{staticClass:"column is-3"},[r("b-button",{staticClass:"customButtonMedium width_200 lightColor",attrs:{variant:"info"},on:{click:function(t){return e.checkCoupon("yes")}}},[e._v("APPLY")])],1)]),e._m(3),r("div",{staticClass:"columns mt-2 is-multiline is-mobile alignFlexCenter"},[r("div",{staticClass:"column is-12 pb-0"},[r("div",{staticClass:"p-3 veryLightGrayBg",staticStyle:{border:"1px solid #ccc"}},[r("b-form-checkbox",{staticClass:"fullWidthRadio",attrs:{name:"express_production",switch:""},on:{change:e.calculatePrice},model:{value:e.express_production,callback:function(t){e.express_production=t},expression:"express_production"}},[r("div",{staticClass:"flexElem",staticStyle:{"justify-content":"space-between"}},[e._v("\n                                    Add Express Production ("+e._s(e._f("currency")(e.express_production_price))+")\n                                    "),e.express_production?r("span",[e._v("\n                                        "+e._s(e._f("currency")(e.express_production_price))+"\n                                    ")]):e._e()])])],1)])]),r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[e._m(4),r("div",{staticClass:"column mt-4 text-right"},[r("div",{staticClass:"innerHeading"},[e._v(e._s(e._f("currency")(e.before_tax_sub_total)))])])]),e.north_caroline_tax||e.united_states_tax?r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e.north_caroline_tax?[e._v("Tax (7.25%)")]:e._e(),e.united_states_tax?[e._v("Tax (7.50%)")]:e._e()],2)]),r("div",{staticClass:"column mt-4 text-right"},[r("div",{staticClass:"innerHeading"},[e.north_caroline_tax?[e._v(" "+e._s(e._f("currency")(e.north_caroline_tax)))]:e._e(),e.united_states_tax?[e._v(" "+e._s(e._f("currency")(e.united_states_tax)))]:e._e()],2)])]):e._e(),e._m(5),r("div",{staticClass:"columns mt-2 is-multiline is-mobile alignFlexCenter"},[r("div",{staticClass:"column is-12 pb-0"},[r("div",{staticClass:"p-3 veryLightGrayBg",staticStyle:{border:"1px solid #ccc","border-bottom":"none"},on:{click:e.showAddress}},[r("b-form-radio",{staticClass:"fullWidthRadio",attrs:{name:"shipping_method",value:"self_pick"},on:{change:e.calculatePrice},model:{value:e.shipping_method,callback:function(t){e.shipping_method=t},expression:"shipping_method"}},[r("div",{staticClass:"flexElem",staticStyle:{"justify-content":"space-between"}},[r("span",[e._v("Pick Up From Store\n                                        "),"self_pick"==e.shipping_method?r("small",{staticStyle:{cursor:"pointer",color:"#7359a6"},on:{click:function(t){return t.preventDefault(),e.showAddress(t)}}},[r("b",[e._v("(Show Address)")])]):e._e()]),r("span",[e._v(e._s(e._f("currency")(0)))])])])],1)]),r("div",{staticClass:"column is-12 pt-0 pb-0"},[r("div",{staticClass:"p-3 veryLightGrayBg",staticStyle:{border:"1px solid #ccc"}},[r("b-form-radio",{staticClass:"fullWidthRadio",attrs:{name:"shipping_method",value:"standard"},on:{change:e.calculatePrice},model:{value:e.shipping_method,callback:function(t){e.shipping_method=t},expression:"shipping_method"}},[r("div",{staticClass:"flexElem",staticStyle:{"justify-content":"space-between"}},[r("span",[e._v("Standard Shipping\n                                        "),r("span",{staticStyle:{cursor:"pointer",color:"#7359a6"},attrs:{title:"(USPS 3-4 days)"}},[e._v("?")])]),r("span",[e._v(e._s(e._f("currency")(e.standard_shipping)))])])])],1)]),r("div",{staticClass:"column is-12 pt-0"},[r("div",{staticClass:"p-3 veryLightGrayBg",staticStyle:{border:"1px solid #ccc","border-top":"none"}},[r("b-form-radio",{staticClass:"fullWidthRadio",attrs:{name:"shipping_method",value:"express"},on:{change:e.calculatePrice},model:{value:e.shipping_method,callback:function(t){e.shipping_method=t},expression:"shipping_method"}},[r("div",{staticClass:"flexElem",staticStyle:{"justify-content":"space-between"}},[r("span",[e._v("\n                                        Express Shipping\n                                        "),r("span",{staticStyle:{cursor:"pointer",color:"#7359a6"},attrs:{title:"USPS Express 1-2 days depending on area, overnight not guaranteed."}},[e._v("?")])]),r("span",[e._v(e._s(e._f("currency")(e.express_shipping)))])])])],1)])]),r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[e._m(6),r("div",{staticClass:"column text-right"},[r("div",{staticClass:"innerHeading"},[r("span",{staticStyle:{"font-size":"1.9rem"}},[e._v(e._s(e._f("currency")(e.grand_total)))])])])]),r("div",{staticClass:"columns is-multiline is-mobile mt-3"},[r("div",{staticClass:"column"},[r("button",{staticClass:"customButtonLarge blockButton lightColor",on:{click:e.checkout}},[e._v("CHECKOUT")])])])])])])],1)},O=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-12 pb-0"},[r("div",{staticClass:"innerHeading"},[e._v("\n                            Shipping Address Information\n                        ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns mt-4 is-multiline is-mobile alignFlexCenter"},[r("div",{staticClass:"column pb-0 is-6"},[r("div",{staticClass:"innerHeading linkColor"},[e._v("Product Name")])]),r("div",{staticClass:"column is-3 pb-0 text-center"},[r("div",{staticClass:"innerHeading linkColor"},[e._v("Qty")])]),r("div",{staticClass:"column is-3 pb-0 text-right"},[r("div",{staticClass:"innerHeading linkColor"},[e._v("Price")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-9"},[r("div",{staticClass:"innerHeading"},[e._v("Discount")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[r("div",{staticClass:"column "},[r("div",{staticClass:"innerHeading"},[r("p",{staticStyle:{"font-size":"13px","font-weight":"bold"}},[e._v("Normal production time is 3-5 business days plus shipping time")]),r("p",[e._v("\n                                Express Production\n                                "),r("span",{staticStyle:{cursor:"pointer",color:"#7359a6"},attrs:{title:"Express production is 1-2 business days."}},[e._v("?")])])])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column mt-4"},[r("div",{staticClass:"innerHeading"},[e._v("Subtotal")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-multiline is-mobile alignFlexCenter mb-0"},[r("div",{staticClass:"column "},[r("div",{staticClass:"innerHeading"},[e._v("Shipping Method")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column "},[r("div",{staticClass:"innerHeading"},[e._v("Total")])])}],P=r("ee2e"),E={name:"ProjectOrderPage",props:["projectId","shareCode"],data:function(){return{currentUser:{},project:null,email:"",password:"",first_name:"",last_name:"",address:"",city:"",country:"United States",region:null,zip_code:null,phone_no:null,quantity:1,total_price:0,first_order_check:!0,discount_code:"",total_discount:0,mozaix_price:"",sub_total:"",price_before_shipping:"",before_tax_sub_total:"",shipping_method:"standard",standard_shipping:"",express_shipping:"",grand_total:0,applied_coupon:null,projectSharedInfo:{},product_title:"",united_states_tax:"",north_caroline_tax:"",express_production:"",express_production_price:0,set_base_price:!1,base_price:0,include_base_price:!1,reorder_project:!1,foundProducts:[],productsWithMaxQuantity:[],baseProduct:null,selectedProduct:null}},watch:{region:function(e,t){var r=this;r.united_states_tax="",r.north_caroline_tax="",r.calculatePrice()}},created:function(){var e=this;e.removeFlashMessage(e.$options.name),e.getOrderInfo(),e.validateShareCode(),e.currentUser=e.$helpers.getCurrentUser(),e.emptyOrNull(e.currentUser)||(e.checkReorderingProject(),e.email=e.currentUser.email,e.first_name=e.currentUser.first_name,e.last_name=e.currentUser.last_name,e.address=e.currentUser.address,e.city=e.currentUser.city,e.country=e.currentUser.country?e.currentUser.country:"United States",e.region=e.currentUser.region,e.zip_code=e.currentUser.zip_code,e.phone_no=e.currentUser.phone_no)},mounted:function(){var e=this,t=P.projectsCollection.doc(e.projectId);t.get().then(function(t){if(t.exists){var r=t.data();if(null==r.date_deleted)r["id"]=t.id,e.project=r;else if(e.$helpers.consoleData("Project does not exist or has been deleted"),e.emptyOrNull(e.currentUser)){var o=e.$helpers.setMessage("danger","Your session has been expired. Please login again.","Login");e.$store.commit("setFlashMessage",o),e.$helpers.logOutUser()}else if("customer"==e.currentUser){var s=e.$helpers.setMessage("danger","The requested project does not exist","Dashboard");e.$store.commit("setFlashMessage",s),e.$router.push({name:"UserDashboard"})}else{var a=e.$helpers.setMessage("danger","The requested project does not exist","AdminDashboard");e.$store.commit("setFlashMessage",a),e.$router.push({name:"AdminDashboard"})}}else if(e.$helpers.consoleData("Project does not exist"),e.emptyOrNull(e.currentUser)){var n=e.$helpers.setMessage("danger","Your session has been expired. Please login again.","Login");e.$store.commit("setFlashMessage",n),e.$helpers.logOutUser()}else if("customer"==e.currentUser){var i=e.$helpers.setMessage("danger","The requested project does not exist","Dashboard");e.$store.commit("setFlashMessage",i),e.$router.push({name:"UserDashboard"})}else{var c=e.$helpers.setMessage("danger","The requested project does not exist","AdminDashboard");e.$store.commit("setFlashMessage",c),e.$router.push({name:"AdminDashboard"})}}).catch(function(t){e.$helpers.consoleData("error getting project : "+t)}),e.currentUser=e.$helpers.getCurrentUser(),e.calculatePrice()},methods:{checkout:function(){var e=this;e.$validator.validateAll().then(function(t){if(!t)return e.$helpers.consoleData("form Validation Fails while checking out"),!1;if(e.showLoader=!0,e.emptyOrNull(e.currentUser))e.simpleAlert({type:"error",text:"Please login or sign up before checkout"});else{e.currentUser.first_name==e.first_name&&e.currentUser.last_name==e.last_name||e.updateProjects();var r={contact_email:e.email.toLowerCase(),first_name:e.first_name.toLowerCase(),last_name:e.last_name.toLowerCase(),address:e.address,city:e.city,country:e.country?e.country:"United States",region:e.region,zip_code:e.zip_code,phone_no:e.phone_no,date_updated:new Date},o=e.first_name.toLowerCase()+" "+e.last_name.toLowerCase();r["name_terms"]=e.getStringTerms(o),r["email_terms"]=e.getStringTerms(e.email.toLowerCase()),P.usersCollection.doc(e.currentUser.uid).update(r).then(function(){e.$helpers.consoleData("user contact information saved."),e.emptyOrNull(e.currentUser)||e.refreshCurrentUser(e.currentUser.uid);var t=e.setObject();t["north_caroline_tax"]=e.north_caroline_tax,t["united_states_tax"]=e.united_states_tax,t["product_title"]=e.selectedProduct.title,t["projectId"]=e.projectId,t["shareCode"]=e.shareCode,t["set_base_price"]=e.set_base_price,t["base_price"]=e.base_price,t["include_base_price"]=e.include_base_price,t["selected_product_price"]=e.selectedProduct.price,t["project_title"]=e.project.title,t["project_photos_count"]=e.project.total_photos,t["product_id"]=e.selectedProduct.id;var r=e.AES.encrypt(JSON.stringify(t),e.envKeys.order_encryption_key);e.$cookies.set("order_info",r.toString(),"15MIN"),e.showLoader=!1,e.$router.push({name:"Checkout",params:{projectId:e.projectId,shareCode:e.shareCode}})}).catch(function(t){e.showLoader=!1,e.$helpers.consoleData("error saving user contact information :"+t)})}})},checkCoupon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"no",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;if(r.applied_coupon=null,r.total_discount=0,"yes"==e){if(r.emptyOrNull(r.currentUser))return r.simpleAlert({type:"error",text:"Please login or sign up first to apply coupon"}),!1;if(!r.discount_code)return r.simpleAlert({type:"error",title:"Coupon Code Missing",text:"Please type coupon code and then click to apply."}),r.calculatePrice(),!1}var o=r.discount_code;r.discount_code?(r.showLoader=!0,P.couponsCollection.where("code","==",o).where("date_deleted","==",null).get().then(function(e){if(e.docs.length>0){var o=e.docs[0].data();if(o["id"]=e.docs[0].id,"Active"==o.status)if(o.coupon_products.length>0){var s=o.coupon_products.some(function(e){return e==r.selectedProduct.id});if(s){var a=r.$moment().startOf("day"),n=r.$moment(o.valid_till.toDate()),i=o.used_by.some(function(e){return e==r.currentUser.uid});i?(r.simpleAlert({type:"error",title:"Already Used",text:"Coupon ( "+r.discount_code+" ) already used."}),r.removeCoupon()):o.used_by.length>=o.max_use?(r.simpleAlert({type:"error",title:"Max Used",text:"Coupon ( "+r.discount_code+" ) max use limit exceeded."}),r.removeCoupon()):n.diff(a,"hours")<=0?(r.simpleAlert({type:"error",title:"Coupon Expired",text:"Coupon ( "+r.discount_code+" ) has been expired."}),r.removeCoupon()):(t&&r.simpleAlert({type:"success",title:"Applied",text:"Coupon ( "+r.discount_code+" ) Applied."}),r.applied_coupon=o)}else r.simpleAlert({type:"error",title:"Not Applicable",text:"Coupon ( "+r.discount_code+" ) can not be used for selected product."}),r.removeCoupon()}else r.simpleAlert({type:"error",title:"Not Applicable",text:"Coupon ( "+r.discount_code+" ) can not be used for selected product."}),r.removeCoupon();else r.simpleAlert({type:"error",title:"Coupon "+o.status,text:"Coupon Has Been "+o.status}),r.removeCoupon()}else r.simpleAlert({type:"error",title:"Not Found",text:"Coupon ( "+r.discount_code+" ) Does Not Exist."}),r.removeCoupon();r.calculatePrice()}).catch(function(e){r.consoleData("error getting coupon code : "+e)})):r.calculatePrice()},setObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;if(!e){var r={email:t.email,first_name:t.first_name,last_name:t.last_name,address:t.address,city:t.city,country:t.country?t.country:"United States",region:t.region,zip_code:t.zip_code,phone_no:t.phone_no,quantity:t.quantity,total_price:t.total_price,first_order_check:t.first_order_check,discount_code:t.discount_code,total_discount:t.total_discount,before_tax_sub_total:t.before_tax_sub_total,sub_total:t.sub_total,shipping_method:t.shipping_method,standard_shipping:t.standard_shipping,express_shipping:t.express_shipping,grand_total:t.grand_total,express_production:t.express_production,express_production_price:t.express_production_price};return r}t.email=e.email,t.first_name=e.first_name,t.last_name=e.last_name,t.address=e.address,t.city=e.city,t.country=e.country?e.country:"United States",t.region=e.region,t.zip_code=e.zip_code,t.phone_no=e.phone_no,t.quantity=e.quantity,t.total_price=e.total_price,t.discount_code=e.discount_code,t.total_discount=e.total_discount,t.before_tax_sub_total=t.before_tax_sub_total,t.sub_total=e.sub_total,t.shipping_method=e.shipping_method,t.standard_shipping=e.standard_shipping,t.express_shipping=e.express_shipping,t.grand_total=e.grand_total,t.north_caroline_tax=e.north_caroline_tax,t.united_states_tax=e.united_states_tax,t.product_title=e.product_title,t.projectId=e.projectId,t.shareCode=e.shareCode,t.express_production=e.express_production,t.express_production_price=e.express_production_price},calculatePrice:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;"yes"==e&&t.removeCoupon(),t.first_order_check=!1,t.showLoader=!0,t.foundProducts=[],t.productsWithMaxQuantity=[],t.baseProduct=null,t.selectedProduct=null,t.north_caroline_tax="",(isNaN(parseInt(t.quantity))||!t.quantity||parseInt(t.quantity)<=0)&&(t.quantity=1),P.productsCollection.where("date_deleted","==",null).get().then(function(e){t.getProductsWithMaximumQuantity(e),e.forEach(function(e){var r=e.data();r["id"]=e.id;var o=parseInt(r.min_quantity)<=parseInt(t.quantity),s=parseInt(r.max_quantity)>=parseInt(t.quantity);o&&s&&t.foundProducts.push(r),r.set_base_price&&(t.baseProduct=r,t.base_price=r.price,t.set_base_price=r.set_base_price)}),t.foundProducts.length>0&&(t.reorder_project?(t.foundProducts.forEach(function(e){1==e.is_reorder&&(t.selectedProduct=e)}),null==t.selectedProduct&&t.foundProducts.forEach(function(e){0==e.is_reorder&&(t.selectedProduct=e)})):t.foundProducts.forEach(function(e){0==e.is_reorder&&(t.selectedProduct=e)})),null==t.selectedProduct&&(t.reorder_project?(t.productsWithMaxQuantity.forEach(function(e){1==e.is_reorder&&(t.selectedProduct=e)}),null==t.selectedProduct&&t.productsWithMaxQuantity.forEach(function(e){0==e.is_reorder&&(t.selectedProduct=e)})):t.productsWithMaxQuantity.forEach(function(e){0==e.is_reorder&&(t.selectedProduct=e)})),t.product_title=t.selectedProduct.product_title,t.express_production_price=t.selectedProduct.express_production;var r=0;if(t.selectedProduct.include_base_price&&t.baseProduct){t.include_base_price=!0,t.express_shipping=t.selectedProduct.express_shipping,t.standard_shipping=t.selectedProduct.standard_shipping;var o=JSON.stringify(t.quantity);o=JSON.parse(o),o=parseInt(o)-1,r=parseFloat(t.selectedProduct.price)*parseInt(o),r=parseFloat(r)+parseFloat(t.baseProduct.price)}else t.include_base_price=!1,t.express_shipping=t.selectedProduct.express_shipping,t.standard_shipping=t.selectedProduct.standard_shipping,r=parseFloat(t.selectedProduct.price)*parseInt(t.quantity);t.mozaix_price=r,t.total_price=r;var s=!1;if(t.applied_coupon){var a=t.applied_coupon.type;t.applied_coupon.value;if("percent"==a){var n=parseFloat(t.applied_coupon.value)/100;t.total_discount=parseFloat(t.total_price)*parseFloat(n),t.sub_total=parseFloat(t.total_price)-parseFloat(t.total_discount)}else t.total_discount=t.applied_coupon.value,t.sub_total=parseFloat(t.total_price)-parseFloat(t.total_discount)}else t.sub_total=parseFloat(t.total_price)+parseFloat("0");var i=1;if(t.sub_total<0&&(i=JSON.stringify(t.sub_total),i=parseFloat(JSON.parse(t.sub_total)),t.sub_total=0),t.express_production&&(t.sub_total=parseFloat(t.express_production_price)+parseFloat(t.sub_total)),t.before_tax_sub_total=JSON.stringify(t.sub_total),t.before_tax_sub_total=parseFloat(JSON.parse(t.sub_total)),"North Carolina"==t.region&&parseFloat(t.sub_total)>0){var c=parseFloat(t.sub_total)*(parseFloat("7.25")/parseFloat("100"));t.north_caroline_tax=parseFloat(c)+1,t.north_caroline_tax=parseFloat(t.north_caroline_tax)-1,t.north_caroline_tax=parseFloat(t.north_caroline_tax).toFixed(2),t.sub_total=parseFloat(t.sub_total)+parseFloat(t.north_caroline_tax)}0==t.reorder_project&&1==t.quantity&&"standard"==t.shipping_method&&t.standard_shipping&&t.standard_shipping>0&&i<0&&(s=!0,t.total_price=parseFloat(t.standard_shipping)+parseFloat(i),t.first_order_check=!0),0==s?"express"==t.shipping_method?t.grand_total=parseFloat(t.sub_total)+parseFloat(t.express_shipping):"standard"==t.shipping_method?t.grand_total=parseFloat(t.sub_total)+parseFloat(t.standard_shipping):t.grand_total=parseFloat(t.sub_total)+parseFloat("0.00"):t.grand_total=parseFloat(t.total_price)+parseFloat(t.sub_total),t.grand_total=t.grand_total.toFixed(2),t.grand_total<=0&&(t.grand_total=0),t.showLoader=!1}).catch(function(e){t.showLoader=!1,t.consoleData("error calculating price : "+e)})},checkUser:function(){var e=this;e.email&&e.password&&(e.showLoader=!0,P.usersCollection.where("email","==",e.email.toLowerCase()).get().then(function(t){t.docs.length>0?P.auth.signInWithEmailAndPassword(e.email,e.password).then(function(t){P.usersCollection.doc(t.user.uid).get().then(function(r){var o=r.data();o=e.$helpers.setUserObject(t.user,o),o=e.removeColumnsFromUserObject(o),e.currentUser=o,e.$store.commit("setCurrentUser",e.currentUser),e.emptyOrNull(e.currentUser)||(e.email=e.currentUser.email,e.first_name=e.currentUser.first_name,e.last_name=e.currentUser.last_name,e.address=e.currentUser.address,e.city=e.currentUser.city,e.country=e.currentUser.country?e.currentUser.country:"United States",e.region=e.currentUser.region,e.zip_code=e.currentUser.zip_code,e.phone_no=e.currentUser.phone_no),e.showLoader=!1,e.$swal.fire({title:"Logged In",text:"You have been successfully logged in",type:"success",allowOutsideClick:!1,showCancelButton:!1,confirmButtonText:"OK"}).then(function(t){t.value&&e.$eventHub.$emit("login-user")})})}).catch(function(t){e.showLoader=!1,e.simpleAlert({type:"error",text:"You have entered incorrect password"})}):P.auth.createUserWithEmailAndPassword(e.email,e.password).then(function(t){var r={email:e.email.toLowerCase(),password:e.password,user_type:"customer",total_orders:0,ordered_projects:[]};r["email_terms"]=e.getStringTerms(e.email.toLowerCase()),P.usersCollection.doc(t.user.uid).set(e.$helpers.addTimestamps(r)).then(function(){var o=e.$helpers.setUserObject(t.user,r);e.currentUser=o,e.$store.commit("setCurrentUser",e.currentUser),e.consoleData("User account created."),e.showLoader=!1,e.$swal.fire({title:"Signed up",text:"Your account has been created. Your password is "+e.password,type:"success",allowOutsideClick:!1,showCancelButton:!1,confirmButtonText:"OK"}).then(function(t){t.value&&e.$eventHub.$emit("login-user")})}).catch(function(t){e.showLoader=!1,e.consoleData("Error creating user doc : "+t)})}).catch(function(t){e.showLoader=!1,e.consoleData("error creating user account : "+t)})}).catch(function(t){e.showLoader=!1,e.consoleData("error getting user from email: "+t)}))},validateShareCode:function(){var e=this;e.shareCode&&P.projectSharedCollection.where("share_code","==",e.shareCode).where("date_deleted","==",null).get().then(function(t){if(t.docs.length>0){var r=t.docs[0].data();r["id"]=t.docs[0].id,e.projectSharedInfo=r,e.email=e.projectSharedInfo.share_with}else e.projectSharedInfo={},e.$router.push({name:"OpenSharedProject",params:{projectId:e.projectId,shareCode:e.shareCode}})}).catch(function(t){e.consoleData("error getting shared code information: "+t)})},checkQuantity:function(e){var t=e.key;"Backspace"!=t&&"Delete"!=t&&"ArrowUp"!=t&&"ArrowDown"!=t&&"ArrowLeft"!=t&&"ArrowRight"!=t&&"Tab"!=t&&isNaN(parseInt(t))&&e.preventDefault()},showAddress:function(){var e=this;e.$swal({type:"info",html:"<p class='normal'>By choosing in store pick up, your PhotoMozaix will NOT be mailed and you must pick up at retail location:</p><address class='mt-3 medium text-center'>Create A Video <br>8300 Fairview Road  <br>Mint Hill, NC  28227</address>"})},getOrderInfo:function(){var e=this;if(e.$cookies.isKey("order_info")){var t=e.AES.decrypt(e.$cookies.get("order_info"),e.envKeys.order_encryption_key),r=JSON.parse(t.toString(e.UTF8));e.projectId==r.projectId?(e.setObject(r),r.discount_code&&P.couponsCollection.where("code","==",r.discount_code).where("date_deleted","==",null).get().then(function(t){if(t.docs.length>0){var r=t.docs[0].data();r["id"]=t.docs[0].id,e.applied_coupon=r}else e.removeCoupon()})):e.$cookies.remove("order_info")}},updateProjects:function(){var e=this;e.fb.projectsCollection.where("user","==",e.currentUser.uid).get().then(function(t){t.forEach(function(t){var r=e.first_name+" "+e.last_name,o=e.getStringTerms(r);e.fb.projectsCollection.doc(t.id).update({user_name:r,name_terms:o}).then(function(){e.consoleData("in project user name updated")}).catch(function(t){e.consoleData("error updating user name in projects: "+t)})})}).then(function(){e.consoleData("user projects retrieved")}).catch(function(t){e.consoleData("error updating user projects: "+t)})},checkReorderingProject:function(){var e=this;e.fb.usersCollection.doc(e.currentUser.uid).get().then(function(t){var r=t.data();r["uid"]=t.id,e.reorder_project=r.ordered_projects.some(function(t){return t==e.projectId})})},removeCoupon:function(){var e=this;e.discount_code="",e.total_discount=0,e.applied_coupon=null},getProductsWithMaximumQuantity:function(e){var t=this,r=null;e.forEach(function(e){var t=e.data();t["id"]=e.id,r?parseInt(t.max_quantity)>=parseInt(r.max_quantity)&&(r=t):r=t}),r&&e.forEach(function(e){var o=e.data();o["id"]=e.id,r.max_quantity==o.max_quantity&&t.productsWithMaxQuantity.push(o)})}}},S=E,N=Object(p["a"])(S,M,O,!1,null,null,null),L=N.exports,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return"resetPassword"==e.mode?r("div",[e._v("\n    Resetting password\n")]):r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),e.showForgotPassword?r("div",{attrs:{id:"resetpassword"}},[r("h1",[e._v("Reset Password")]),r("p",[e._v("We will send you an email to reset your password.")]),r("div",{staticClass:"form-wrap"},[r("b-alert",{attrs:{show:""!==e.errorMsg,dismissible:"",variant:"danger"},on:{dismissed:e.dismissAlert}},[e._v("\n                "+e._s(e.errorMsg)+"\n            ")]),r("form",{staticClass:"password-reset",on:{submit:function(e){e.preventDefault()}}},[e.passwordResetSuccess?r("div",[r("h3",[e._v("Email Sent")]),r("p",[e._v("Check your email for a link to reset your password.")]),r("br"),r("button",{staticClass:"button",on:{click:e.togglePasswordReset}},[e._v("Back to login")])]):r("div",[r("div",{staticClass:"control has-icons-left"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.passwordForm.email,expression:"passwordForm.email",modifiers:{trim:!0}}],staticClass:"input is-medium",attrs:{type:"email",placeholder:"Email Address",required:""},domProps:{value:e.passwordForm.email},on:{input:function(t){t.target.composing||e.$set(e.passwordForm,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(0)]),r("button",{staticClass:"button",on:{click:e.resetPassword}},[e._v("Submit")]),r("div",{staticClass:"extras"},[r("a",{on:{click:e.togglePasswordReset}},[e._v("Back to Log In")])])])])],1)]):r("div",{attrs:{id:"login"}},[r("h1",[e._v("Sign In")]),r("b-alert",{attrs:{show:e.isFlashMessage(e.$options.name),dismissible:"",variant:e.$store.state.flashMessage.type},on:{dismissed:e.dismissAlert}},[e._v("\n            "+e._s(e.$store.state.flashMessage.message)+"\n        ")]),r("b-alert",{attrs:{show:""!==e.errorMsg,dismissible:"",variant:"danger"},on:{dismissed:e.dismissAlert}},[e._v("\n            "+e._s(e.errorMsg)+"\n        ")]),r("div",{staticClass:"form-wrap"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("div",{staticClass:"control has-icons-left"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.loginForm.email,expression:"loginForm.email",modifiers:{trim:!0}}],staticClass:"input is-medium",attrs:{type:"email",placeholder:"Email Address",required:""},domProps:{value:e.loginForm.email},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(1)]),r("div",{staticClass:"control has-icons-left"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.loginForm.password,expression:"loginForm.password",modifiers:{trim:!0}}],staticClass:"input is-medium",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.loginForm.password},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(2)]),"local"!=e.app_env?[r("vue-recaptcha",{ref:"recaptcha",attrs:{sitekey:"6Lf0LrUUAAAAADlRiKDtmS_fCAfCCXOxDBZ7b0np",loadRecaptchaScript:!0},on:{verify:e.captchaVerified,expired:e.captchaExpired}})]:e._e(),r("input",{staticClass:"button is-medium mt-3",attrs:{type:"submit",value:"Log In"}})],2),r("div",{staticClass:"extras"},[r("a",{on:{click:e.togglePasswordReset}},[e._v("Forgot Password?")]),r("router-link",{attrs:{to:"/signup"}},[e._v("Create an Account")])],1)])],1)])},U=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-small is-left"},[r("i",{staticClass:"fas fa-envelope"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-small is-left"},[r("i",{staticClass:"fas fa-envelope"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-small is-left"},[r("i",{staticClass:"fas fa-lock"})])}],F=r("e096"),T={name:"Login",components:{VueRecaptcha:F["a"]},data:function(){return{loginForm:{email:"",password:""},passwordForm:{email:""},showForgotPassword:!1,passwordResetSuccess:!1,errorMsg:"",mode:"",captcha_verified:null,app_env:"production"}},created:function(){var e=this;e.removeFlashMessage(e.$options.name),this.mode=this.$route.query.mode,this.loginForm.email="",this.loginForm.password="",e.$helpers.emptyOrNull(e.$store.state.flashMessage)||(e.dismissCountDown=e.dismissSecs)},methods:{togglePasswordReset:function(){this.errorMsg="",this.showForgotPassword?(this.showLoginForm=!0,this.showForgotPassword=!1,this.passwordResetSuccess=!1):(this.showLoginForm=!1,this.showForgotPassword=!0)},login:function(){var e=this,t=this;t.captcha_verified?(t.showLoader=!0,t.fb.auth.signInWithEmailAndPassword(this.loginForm.email,this.loginForm.password).then(function(e){t.fb.usersCollection.doc(e.user.uid).get().then(function(r){var o=r.data();o=t.$helpers.setUserObject(e.user,o),o=t.removeColumnsFromUserObject(o);var s=t.AES.encrypt(JSON.stringify(o),"encrypted user");t.$cookies.set("currentUser",s.toString(),"31MIN"),t.$eventHub.$emit("login-user"),o.hasOwnProperty("user_type")&&"admin"==o.user_type?t.$router.push("/admin/dashboard"):t.$router.push("/dashboard")})}).catch(function(r){t.showLoader=!1,e.errorMsg="The email address or password you entered doesn't match our records. Please give it another try."})):t.simpleAlert({type:"warning",text:"Please first verify. That you are not robot."})},resetPassword:function(){var e=this,t=this;this.performingRequest=!0,t.fb.auth.sendPasswordResetEmail(this.passwordForm.email).then(function(){e.performingRequest=!1,e.passwordResetSuccess=!0,e.passwordForm.email="",e.errorMsg=""}).catch(function(t){e.consoleData("error resetting password : "+t),e.performingRequest=!1,e.errorMsg="The mentioned email does not exist. Please enter the valid email."})},captchaVerified:function(){var e=this;e.captcha_verified=!0},captchaExpired:function(){this.$refs.recaptcha.reset()}}},B=T,R=Object(p["a"])(B,z,U,!1,null,null,null),Y=R.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e.showPasswordForm?r("div",{attrs:{id:"passwordForm"}},[r("h1",[e._v("Enter Your New Password")]),r("form",{staticStyle:{"max-width":"600px",margin:"0 auto"},attrs:{id:"changePassword"},on:{submit:function(t){return t.preventDefault(),e.updatePassword(t)}}},[""!==e.errorMsg?r("div",{staticClass:"error-msg"},[r("p",[e._v(e._s(e.errorMsg))])]):e._e(),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.changePassword.password,expression:"changePassword.password",modifiers:{trim:!0}}],staticClass:"input is-medium",attrs:{type:"password",placeholder:"New Password",required:""},domProps:{value:e.changePassword.password},on:{input:function(t){t.target.composing||e.$set(e.changePassword,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("br"),r("input",{staticClass:"button is-medium",attrs:{type:"submit",value:"Change Password"}})])]):r("div",{attrs:{id:"backToLogin"}},[r("h1",[e._v("Your Password Was Reset")]),e._m(0)])])},V=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticStyle:{"text-align":"center"}},[r("a",{staticClass:"button",attrs:{href:"/login"}},[e._v("Back to Log In")])])}],Q=r("bd86"),G=r("ee2e"),Z={name:"ResetPassword",data:function(){var e;return e={changePassword:{password:""},errorMsg:"",oobCode:""},Object(Q["a"])(e,"errorMsg",""),Object(Q["a"])(e,"showPasswordForm",!0),e},created:function(){this.oobCode=this.$route.query.oobCode},methods:{updatePassword:function(){var e=this,t=this.changePassword.password,r=this.oobCode;G.auth.confirmPasswordReset(r,t).then(function(){e.showPasswordForm=!1}).catch(function(t){e.errorMsg=t.message,console.log(t)})}}},W=Z,H=Object(p["a"])(W,q,V,!1,null,null,null),J=H.exports,X=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"project"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[o("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),o("b-alert",{attrs:{show:e.isFlashMessage(e.$options.name),dismissible:"",variant:e.$store.state.flashMessage.type},on:{dismissed:e.dismissAlert}},[e._v("\n        "+e._s(e.$store.state.flashMessage.message)+"\n    ")]),o("router-link",{staticClass:"back",attrs:{to:"/dashboard"}},[o("i",{staticClass:"fal fa-angle-left"}),e._v(" Back to Your Projects")]),o("h1",[e._v("Edit Your Project")]),e.size_errors>0||e.type_errors>0?[o("b-alert",{attrs:{show:!0,dismissible:"",variant:"info"},on:{dismissed:e.hideDropzoneErrors}},[o("ul",[e.uploaded_files>0?o("li",[e._v("\n                    "+e._s("["+e.uploaded_files+"] ")+"\n                    "+e._s(1==e.uploaded_files?"file is uploaded.":"files are uploaded.")+"\n                ")]):e._e(),e.size_errors>0?o("li",[e._v("\n                    "+e._s("The files with size less than 60 KB are not supported and the system did not upload ")+"\n                    "+e._s(1==e.size_errors?"this ":"these ")+"\n                    "+e._s("["+e.size_errors+"] ")+"\n                    "+e._s(1==e.size_errors?"File.":"Files.")+"\n                ")]):e._e(),e.type_errors>0?o("li",[e._v("\n                    "+e._s("The supported file types are jpg and jpeg so ["+e.type_errors+"] unsupported ")+e._s(1==e.type_errors?"file type is not uploaded.":"file types are not uploaded.")+"\n                ")]):e._e()])])]:e._e(),e.serverErrors.length>0?o("div",[o("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showDismissibleAlert,callback:function(t){e.showDismissibleAlert=t},expression:"showDismissibleAlert"}},[o("ul",e._l(e.serverErrors,function(t){return o("li",[e._v(e._s(t))])}),0)])],1):e._e(),o("form",{on:{submit:function(t){return t.preventDefault(),e.saveTitle(!1)}}},[o("div",{staticClass:"project-side"},[o("div",{staticClass:"project-controls"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.checkoutId,expression:"checkoutId"}],attrs:{type:"hidden"},domProps:{value:e.checkoutId},on:{input:function(t){t.target.composing||(e.checkoutId=t.target.value)}}}),o("div",[o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("span",{staticClass:"placeOrder primaryColor",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.saveTitle(!0)}}},[e._v("Save")])]),e.opened_project.main_thumb_url?o("div",{staticClass:"column is-half"},[o("span",{staticClass:"placeOrder primaryColor",staticStyle:{cursor:"pointer"},on:{click:e.goToNextPage}},[e._v("Next")])]):e._e()]),o("div",{staticClass:"title-block"},[o("label",{attrs:{for:"projectTitle"}},[e._v("Project Title")]),o("br"),o("input",{directives:[{name:"model",rawName:"v-model",value:e.project_title,expression:"project_title"}],staticClass:"projectTitleInput",attrs:{type:"text",id:"projectTitle",onFocus:"this.value=='Untitled Project'? this.value='':''",onBlur:"this.value==''?this.value='Untitled Project':''"},domProps:{value:e.project_title},on:{input:function(t){t.target.composing||(e.project_title=t.target.value)}}})])]),e._m(0),o("div",{staticClass:"num-img"},[o("strong",[e._v("Number of images:")]),e._v("\n                    "+e._s(e.opened_project.photos?e.opened_project.photos.length:"0")+"\n                ")]),o("div",{ref:"projectMainImg",staticClass:"main-img-block"},[e._m(1),o("br"),e.opened_project.main_thumb_url?o("img",{attrs:{src:e.s3_base_url+e.projectId+"/thumb_"+e.opened_project.main_image_name}}):o("img",{attrs:{src:r("35d4")}})])])]),o("div",{staticClass:"project-main"},["new"==e.opened_project.status?o("vue-dropzone",{ref:"customDropzone",attrs:{options:e.dropzoneOptions,useCustomSlot:!0,id:"photoUpload"},on:{"vdropzone-reset":e.cleanupDropzone,"vdropzone-mounted":e.vdropzoneMounted,"vdropzone-sending-multiple":e.vdropzoneSendingMultiple,"vdropzone-success-multiple":e.vdropzoneSuccessMultiple,"vdropzone-queue-complete":e.vdropzoneQueueComplete,"vdropzone-error-multiple":e.vdropzoneErrorMultiple,"vdropzone-files-added":e.vdropzoneFilesAdded,"vdropzone-max-files-reached":e.vdropzoneMaxFilesReached,"vdropzone-max-files-exceeded":e.vdropzoneMaxFilesExceeded,"vdropzone-removed-file":e.vdropzoneRemovedFile,"vdropzone-thumbnail":e.vdropzoneThumbnail}},[o("div",{staticClass:"dropzone-custom-content"},[o("p",[o("span",{staticClass:"subtitle dropzone-custom-title"},[e._v("Drag and drop to upload photos.")]),o("br"),e._v("\n                        …or click to select a file from your computer")]),o("br"),o("p",[e._v("Accepted file type: jpg, jpeg")]),o("br"),o("p",[e._v("Note: We suggest using 100-200 photos to create your PhotoMozaix."),o("br"),o("b",[o("u",[e._v("You can use as few as 50 photos, but the images will repeat a few times each.")])])]),o("p",[o("strong",[e._v("Max "),o("big",[e._v("40")]),e._v(" photos at one time.")],1)])])]):e._e(),e.opened_project.photos&&e.opened_project.photos.length>0&&!e.showLoader?[o("div",{staticClass:"photo-grid"},[o("gallery",{attrs:{images:e.photos,index:e.galleryIndex},on:{close:function(t){e.galleryIndex=null}}}),e._l(e.opened_project.photos,function(t,r){return o("figure",{key:r,class:[t.is_main_img?"main-img photo":"main-img-disabled photo"]},[t.url?o("div",[o("img",{attrs:{src:e.s3_base_url+e.projectId+"/thumb_"+t.name,alt:t.original_name,id:t.id}})]):o("div",[e._v("Loading...")]),o("figcaption",[o("p",{staticClass:"img-controls setMainImg"},["new"==e.opened_project.status?[t.is_main_img?e._e():o("span",{staticClass:"isMainImg",on:{click:function(o){return e.markMainImage(r,t.id,t.url,t.name)}}},[e._v("\n                                        Set As Main Image\n                                    ")])]:e._e(),"new"==e.opened_project.status?o("span",{staticClass:"project_action delete_project",on:{click:function(o){return e.requestDelete(r,t.id,t.is_main_img)}}},[e._v("\n                                     \n                                ")]):e._e(),o("span",{staticClass:"project_action view_project",on:{click:function(t){e.galleryIndex=r}}},[e._v("\n                                     \n                                ")])],2)])])})],2),o("div",{staticClass:"placeOrderContainer text-center"},[e.opened_project.main_thumb_url?[o("router-link",{staticClass:"placeOrder primaryColor",attrs:{to:{name:"ProjectView",params:{projectId:e.projectId}}}},[e._v("Next")])]:e._e()],2)]:e._e()],2)])],2)},K=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"instructions"},[r("strong",[e._v("To Get Started:")]),r("ol",[r("li",[r("span",[e._v("1")]),r("span",[e._v("Upload your photos")])]),r("li",[r("span",[e._v("2")]),r("span",[e._v("Select your main image")])]),r("li",[r("span",[e._v("3")]),r("span",[e._v("Save your project")])]),r("li",[r("span",[e._v("4")]),r("span",[e._v('And click "Select Quantity"')])])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("strong",[e._v("Main Image ")])])}],ee=r("92c3"),te=r.n(ee),re=r("067c"),oe=r.n(re),se=(r("c64e"),r("ee2e")),ae={name:"EditProject",props:["projectId"],components:{gallery:oe.a,vueDropzone:te.a},watch:{opened_project:function(e,t){var r=this;r.emptyOrNull(e)||e.photos.forEach(function(e,t){var o=r.s3_base_url+r.projectId+"/preview_"+e.name;r.photos.push(o)})},project_title:function(e,t){var r=this;r.old_project_title=t}},data:function(){var e;return e={dropzoneOptions:{url:"https://api.photomozaix.com/api/upload/project/photos",addRemoveLinks:!1,method:"post",autoQueue:!0,autoProcessQueue:!0,uploadMultiple:!0,parallelUploads:"500",timeout:"3600000",maxFiles:41},loading:{type:Boolean},hasOrder:{type:Boolean},numImages:"0",projects:[],photos:[],projectMainImg:"",projectTitle:"",checkoutId:"",filePath:"",mainImgId:"",isCheckoutDisabled:{type:Boolean},serverErrors:[],showDismissibleAlert:!1,active_dropzone:"",opened_project:{},galleryIndex:null},Object(Q["a"])(e,"photos",[]),Object(Q["a"])(e,"project_title",""),Object(Q["a"])(e,"old_project_title",""),Object(Q["a"])(e,"s3_base_url","https://s3.amazonaws.com/photomozaix-production/"),Object(Q["a"])(e,"size_errors",0),Object(Q["a"])(e,"type_errors",0),Object(Q["a"])(e,"uploaded_files",0),e},mounted:function(){var e=this;e.removeFlashMessage(e.$options.name),e.loading=!0,e.getProjectWithPhotos(),e.loading=!1},methods:{saveTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(t.project_title){t.showLoader=!0;var r=t.project_title.toLowerCase(),o=t.getStringTerms(r),s=se.projectsCollection.doc(t.projectId);s.update({title:r,title_terms:o,date_updated:new Date}).then(function(){t.consoleData("Project saved."),t.showLoader=!1,e?t.$router.push({name:"UserDashboard"}):(t.simpleAlert({type:"success",text:"Project Title Saved"}),$("#projectTitle").trigger("focusout")),t.project_title=t.$options.filters.capitalize(t.project_title)}).catch(function(e){t.consoleData("Error writing document: "+e)})}else t.simpleAlert({type:"error",text:"Title field can not be empty"}),t.project_title=t.old_project_title,t.project_title=t.$options.filters.capitalize(t.project_title)},cleanupDropzone:function(){var e=this;e.consoleData("Cleaning up..."),e.isCheckoutDisabled=!1},markMainImage:function(e,t,r,o){var s=this,a=se.db.batch();s.showLoader=!0;var n=se.projectsCollection.doc(s.projectId);n.update({main_thumb_url:r,main_image_id:t,main_image_name:o}),n.collection("photos").where("is_main_img","==",!0).get().then(function(e){e.forEach(function(e){n.collection("photos").doc(e.id).update({is_main_img:!1}).then(function(){}).catch(function(e){s.showLoader=!1})}),n.collection("photos").doc(t).update({is_main_img:!0}).then(function(){}).catch(function(e){s.showLoader=!1})}),a.commit().then(function(){s.opened_project.main_thumb_url=r,s.opened_project.main_image_id=t,s.opened_project.main_image_name=o,s.opened_project.photos.some(function(e){if(e.is_main_img)return e.is_main_img=!1,!0}),s.opened_project.photos[e].is_main_img=!0,s.showLoader=!1})},requestDelete:function(e,t,r){var o=this,s=this;this.$swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#c31d8a",cancelButtonColor:"#b9acd2",confirmButtonText:"Yes, delete it!"}).then(function(a){if(a.value){s.showLoader=!0;o.$data.photos;var n=se.db.batch(),i=se.projectsCollection.doc(s.opened_project.id);i.collection("photos").doc(t).update({date_updated:new Date,date_deleted:new Date}).then(function(){}).catch(function(e){s.showLoader=!1,s.consoleData("error deleting photo: "+e)}),i.get().then(function(e){var t={date_updated:new Date,total_photos:parseInt(e.data().total_photos)-1};r&&(t["main_image_id"]=null,t["main_image_name"]=null,t["main_thumb_url"]=null),i.update(t).then(function(){s.opened_project.total_photos=parseInt(s.opened_project.total_photos)-1})}).catch(function(e){s.showLoader=!1,s.consoleData("error updating project: "+e)}),n.commit().then(function(){s.opened_project.photos&&s.opened_project.photos.length>0&&(s.opened_project.photos.splice(e,1),s.photos.splice(e,1),r&&(s.opened_project.main_image_id=null,s.opened_project.main_image_name=null,s.opened_project.main_thumb_url=null)),s.showLoader=!1})}})},checkout:function(){var e=this;if(this.saveTitle(!1),this.projectMainImg)if(this.numImages<50)this.$swal({text:"Your project must have at least 50 images before proceeding to checkout.",type:"warning",confirmButtonColor:"#c31d8a"});else if(this.checkoutId){var t=this.checkoutId,r=se.ordersCollection.doc(t);r.get().then(function(o){o.exists?r.onSnapshot(function(){shopify.checkout.create().then(function(t){var r=se.projectsCollection.doc(e.projectId),o=t.id;r.update({checkout_id:t.id}).then(function(){e.$router.push({name:"cart",params:{checkoutId:o}})}).catch(function(e){console.log(e)})})}):e.$router.push({name:"cart",params:{checkoutId:t}})})}else shopify.checkout.create().then(function(t){var r=se.projectsCollection.doc(e.projectId),o=t.id;r.update({checkout_id:t.id}).then(function(){e.$router.push({name:"cart",params:{checkoutId:o}})}).catch(function(e){console.log(e)})});else this.$swal({text:"You must select a main image before proceeding to checkout.",type:"warning",confirmButtonColor:"#c31d8a"})},vdropzoneMounted:function(){var e=this;e.active_dropzone=e.$refs.customDropzone},vdropzoneSendingMultiple:function(e,t,r){var o=this;o.showLoader=!0,o.hideDropzoneErrors(),r.append("project_id",this.projectId)},vdropzoneSuccessMultiple:function(e,t){var r=this;if(0==t.success)r.serverErrors=t.errors,r.showDismissibleAlert=!0,r.active_dropzone.removeAllFiles();else{var o=t.data.uploaded_images,s=se.db.batch(),a=se.projectsCollection.doc(r.projectId);r.project_title&&a.update({title:r.project_title,date_updated:new Date}).then(function(){r.consoleData("project title updated")}).catch(function(e){r.consoleData("error updating project title : "+e)});var n=a.collection("photos");o.forEach(function(e,t){s.set(n.doc(),r.$helpers.addTimestamps(e,!0))}),parseInt(t.data.uploaded_images.length)>0&&a.update({total_photos:parseInt(r.opened_project.total_photos)+parseInt(t.data.uploaded_images.length)}),s.commit().then(function(){r.size_errors=t.data.size_errors,r.type_errors=t.data.type_errors,r.uploaded_files=t.data.uploaded_images.length,r.getProjectWithPhotos(),r.active_dropzone.removeAllFiles()})}},vdropzoneQueueComplete:function(){var e=this;e.consoleData("vdropzoneQueueComplete"),e.showLoader=!1},vdropzoneErrorMultiple:function(e,t){var r=this;r.consoleData("error multiple: "+t),r.showLoader=!1},getProjectWithPhotos:function(){var e=this,t=se.projectsCollection.doc(e.projectId),r={};e.showLoader=!0,t.get().then(function(o){r=o.data(),r["id"]=o.id,r["photos"]=[],e.photos=[],t.collection("photos").where("date_deleted","==",null).orderBy("date_created","desc").get().then(function(t){var o=0;t.forEach(function(e,t){r["photos"][o]=e.data(),r["photos"][o]["id"]=e.id,o++}),e.opened_project=r,e.project_title=e.$options.filters.capitalize(r.title),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.consoleData("error getting photos: "+t)})}).catch(function(t){e.showLoader=!1,e.consoleData("error getting project "+t)})},vdropzoneFilesAdded:function(e){},vdropzoneMaxFilesExceeded:function(e){this.consoleData("vdropzoneMaxFilesExceeded",file)},vdropzoneMaxFilesReached:function(e){var t=this,r=[];$.each(e,function(e,t){r.push(t)}),r.forEach(function(e,r){t.active_dropzone.removeFile(e)})},hideDropzoneErrors:function(){var e=this;e.type_errors=0,e.size_errors=0,e.uploaded_files=0},goToNextPage:function(){var e=this;if(e.project_title){e.showLoader=!0;var t=e.project_title.toLowerCase(),r=e.getStringTerms(t),o=se.projectsCollection.doc(e.projectId);o.update({title:t,title_terms:r,date_updated:new Date}).then(function(){e.consoleData("Project saved."),e.showLoader=!1,e.$router.push({name:"ProjectView",params:{projectId:e.projectId}})}).catch(function(t){e.consoleData("Error writing document: "+t)})}else e.$router.push({name:"ProjectView",params:{projectId:e.projectId}})},vdropzoneThumbnail:function(e,t){console.log("thumb")},vdropzoneRemovedFile:function(e,t,r){console.log("file removed",e,t,r)}}},ne=ae,ie=Object(p["a"])(ne,X,K,!1,null,null,null),ce=ie.exports,le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"settings"},[r("h1",[e._v("Manage Your Account")]),""!==e.errorMsg?r("div",{staticClass:"error-msg"},[r("p",[e._v(e._s(e.errorMsg))])]):e._e(),e.showSettingsForm?r("div",{attrs:{id:"settingsForm"}},[r("h3",[e._v("Change Your Password")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.updatePassword(t)}}},[r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.settingsForm.password,expression:"settingsForm.password",modifiers:{trim:!0}}],staticClass:"input is-medium",attrs:{type:"password",placeholder:"New Password",required:""},domProps:{value:e.settingsForm.password},on:{input:function(t){t.target.composing||e.$set(e.settingsForm,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.settingsForm.passwordConfirm,expression:"settingsForm.passwordConfirm",modifiers:{trim:!0}}],staticClass:"input is-medium",attrs:{type:"password",placeholder:"Confirm New Password",required:""},domProps:{value:e.settingsForm.passwordConfirm},on:{input:function(t){t.target.composing||e.$set(e.settingsForm,"passwordConfirm",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("input",{staticClass:"button is-medium",attrs:{type:"submit",value:"Change Password"}})])]):r("div",{attrs:{id:"loginForm"}},[r("h3",[e._v("Please confirm your current password.")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.currentPassword(t)}}},[r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.loginForm.password,expression:"loginForm.password",modifiers:{trim:!0}}],staticClass:"input is-medium",attrs:{type:"password",placeholder:"Current Password",required:""},domProps:{value:e.loginForm.password},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("input",{staticClass:"button is-medium",attrs:{type:"submit",value:"Confirm"}})])])])},de=[],ue=r("ee2e"),pe={name:"settings",data:function(){return{settingsForm:{password:"",passwordConfirm:""},loginForm:{password:""},errorMsg:"",newPassword:"",showSettingsForm:!0,showLoginForm:!1,mode:""}},created:function(){this.mode=this.$route.query.mode},methods:{requestDelete:function(){this.$swal({title:"Are you sure?",text:"This will close your account and permanently delete all projects. This action cannot be undone.",type:"warning",showCancelButton:!0,confirmButtonColor:"#c31d8a",cancelButtonColor:"#b9acd2",confirmButtonText:"Yes, close my account!"}).then(function(e){e.value&&console.log("Account deleted")})},updatePassword:function(){var e=this,t=this.$store.state.currentUser;this.newPassword=this.settingsForm.password;var r=this.settingsForm.passwordConfirm;this.errorMsg="",""===this.newPassword||""===r?this.errorMsg="All fields are required.":this.newPassword==r?t.updatePassword(this.newPassword).then(function(){e.$swal({type:"success",title:"Your password has been updated",showConfirmButton:!1,timer:1500}),e.settingsForm.password="",e.settingsForm.passwordConfirm=""}).catch(function(t){"auth/requires-recent-login"==t.code&&(e.showLoginForm=!0,e.showSettingsForm=!1)}):this.errorMsg="Passwords must match."},currentPassword:function(){var e=this,t=this.$store.state.currentUser,r=t.email,o=this.loginForm.password,s=ue.EmailAuthProvider.credential(r,o);t.reauthenticateAndRetrieveDataWithCredential(s).then(function(){t.updatePassword(e.newPassword).then(function(){e.settingsForm.password="",e.settingsForm.passwordConfirm="",e.showSettingsForm=!0,e.showLoginForm=!1,e.newPassword="",e.$swal({type:"success",title:"Your password has been updated",showConfirmButton:!1,timer:1500})}).catch(function(t){e.errorMsg=t.message})}).catch(function(t){e.errorMsg=t.message})}}},me=pe,he=Object(p["a"])(me,le,de,!1,null,null,null),_e=(he.exports,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cart"},[r("router-link",{staticClass:"back",attrs:{to:{name:"project",params:{projectId:e.projects[0].id}}}},[r("i",{staticClass:"fal fa-angle-left"}),e._v(" Back to Your Project")]),r("h1",[e._v("Select Quantity")]),e.loading?r("div",[e._v("Loading...")]):e._e(),e.projects.length>0?r("table",{staticClass:"table is-fullwidth cart"},[r("tbody",e._l(e.projects,function(t,o){return r("tr",{key:o},[r("td",{staticClass:"thumb"},[r("img",{attrs:{src:t.properties.main_thumb_url,width:"200"}})]),r("td",[e._v(e._s(t.properties.title))]),r("td",{staticClass:"quantity"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.itemQuantity,expression:"itemQuantity"}],staticClass:"input",attrs:{type:"number",min:"1"},domProps:{value:e.itemQuantity},on:{input:function(t){t.target.composing||(e.itemQuantity=t.target.value)}}})]),r("td",[e._v("$"+e._s(e.cartCost))]),r("td",[r("button",{staticClass:"button next",attrs:{type:"button"},on:{click:function(t){return e.updateCheckout()}}},[e._v("Continue to Checkout "),r("i",{staticClass:"fal fa-angle-right"})]),r("span",{staticClass:"note"},[e._v("Tax & Shipping will be applied at Checkout")])])])}),0)]):r("div",{staticClass:"start-new-project"},[r("p",[e._v("We couldn't find an order associated with your project. "),r("router-link",{staticClass:"button",attrs:{to:"/dashboard"}},[e._v("Start New Project")])],1)]),r("h2",[e._v("Pricing")]),e._m(0)],1)}),fe=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"columns pricing is-variable is-8"},[o("div",{staticClass:"column"},[o("h3",[e._v("Single PhotoMozaix")]),o("span",{staticClass:"price"},[e._v("$59")]),o("p",[e._v("for your first PhotoMozaix poster, plus $10 shipping.")]),o("img",{attrs:{src:r("8ef2"),alt:"Image of one PhotoMozaix poster."}})]),o("div",{staticClass:"column"},[o("h3",[e._v("Additional Copies")]),o("span",{staticClass:"price"},[e._v("$39")]),o("p",[e._v("for each additional copy.")]),o("img",{attrs:{src:r("d470"),alt:"Image of two PhotoMozaix posters."}})]),o("div",{staticClass:"column"},[o("h3",[e._v("10 or more Copies")]),o("span",{staticClass:"price"},[e._v("$29")]),o("p",[e._v("for each, if ordering 10 or more of the same print "),o("em",[e._v("(including your first print)")]),e._v(", plus "),o("strong",[e._v("free shipping.")]),o("br"),o("span",{staticClass:"note"},[e._v("Discounts not applicable.")])]),o("img",{attrs:{src:r("6e25"),alt:"Image of multiple PhotoMozaix posters."}})])])}],ve=r("ee2e"),ge=r("7230"),be=ge.productId1,Ce=ge.product1Cost,we=ge.productId2,ye=ge.product2Cost,xe=ge.productId3,je=ge.product3Cost,Ie={name:"cart",props:["checkoutId"],data:function(){return{loading:{type:Boolean},mode:"",cartCost:"59.00",projects:[],currentLineItems:[],itemQuantity:1,numCheckoutLineItems:0,lineItems:[{variantId:be,quantity:1}]}},created:function(){var e=this;this.loading=!0;var t=this.$store.state.currentUser.uid,r=ve.projectsCollection;r.where("checkout_id","==",this.checkoutId).where("user","==",t).get().then(function(t){var r=[];t.forEach(function(e){r.push({id:e.id,properties:e.data()})}),e.projects=r,e.loading=!1}).catch(function(e){console.log(e)}),ge.checkout.fetch(this.checkoutId).then(function(t){e.numCheckoutLineItems=t.lineItems.length;var r=t.lineItems,o=[];r.forEach(function(e){o.push(e.id)}),e.currentLineItems=o,console.log(o)})},methods:{updateCheckout:function(){var e=this;this.currentLineItems.length>0?ge.checkout.removeLineItems(this.checkoutId,this.currentLineItems).then(function(){ge.checkout.addLineItems(e.checkoutId,e.lineItems).then(function(t){e.checkout(t)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}):ge.checkout.addLineItems(this.checkoutId,this.lineItems).then(function(t){console.log(t),e.checkout(t)}).catch(function(e){console.log(e)})},checkout:function(e){var t=this,r=this.$store.state.currentUser.uid,o=new Date,s=e.webUrl;ve.ordersCollection.doc(e.id).set({user:r,project:this.projects[0].id,date_created:o}).then(function(e){window.location.href=s}).catch(function(e){console.log(e),t.errorMsg="Could not save project."})}},watch:{itemQuantity:function(e){var t=parseInt(e,10);if(this.itemQuantity>1&&t<10){var r=t-1,o=1,s=parseFloat(Ce),a=(parseFloat(ye)*parseFloat(r)).toFixed(2);this.cartCost=(parseFloat(s)+parseFloat(a)).toFixed(2),this.lineItems=[{variantId:be,quantity:o},{variantId:we,quantity:r}]}else t>=10?(this.cartCost=(parseFloat(je)*parseFloat(t)).toFixed(2),this.lineItems=[{variantId:xe,quantity:t}]):(this.cartCost=parseFloat(Ce).toFixed(2),this.lineItems=[{variantId:be,quantity:1}])}}},ke=Ie,Ae=Object(p["a"])(ke,_e,fe,!1,null,null,null),De=(Ae.exports,function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),Me=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"error not-found"},[r("h1",[e._v("404 - Page Not Found")])])}],Oe={name:"NotFound"},Pe=Oe,Ee=Object(p["a"])(Pe,De,Me,!1,null,null,null),Se=Ee.exports,Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app admin-panel"},[r("admin-header"),r("main",{staticClass:"flexResponsive"},[r("admin-side-bar"),r("router-view")],1),r("admin-footer")],1)},Le=[],ze=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("header",[o("div",{staticClass:"topBar"},[o("div",{staticClass:"flexElem"},[o("div",{staticClass:"nav-icon",class:e.$store.state.showSideBar?"closed":"",on:{click:e.toggleSideBar}},[o("div")]),o("router-link",{attrs:{to:{name:"AdminDashboard"}}},[o("img",{attrs:{src:r("63a9"),alt:"Logo"}})])],1),o("div",[o("b-dropdown",{staticClass:"m-md-2",attrs:{text:"Admin",right:""}},[o("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.logout}},[e._v("Logout")])])],1)])])},$e=[],Ue=r("ee2e"),Fe={name:"AdminHeader",methods:{logout:function(){var e=this;Ue.auth.signOut().then(function(){var t=e.$helpers.setMessage("success","You have successfully logged out","Login");e.$store.commit("setFlashMessage",t),e.$store.dispatch("clearData"),e.$router.push({name:"LoginPage"})}).catch(function(t){e.consoleData("error logging out from admin"+t)})}}},Te=Fe,Be=Object(p["a"])(Te,ze,$e,!1,null,"06f1ee7e",null),Re=Be.exports,Ye=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nav",{staticClass:"sideNav",class:e.$store.state.showSideBar?"":"sideNavClosed"},[o("ul",[o("li",[o("router-link",{attrs:{to:{name:"AdminDashboard"}}},[o("img",{attrs:{src:r("82ca"),alt:"Dashboard"}}),e._v("\n                New Orders")])],1),o("li",[o("router-link",{attrs:{to:{name:"FinishedOrders"}}},[o("img",{attrs:{src:r("96b5"),alt:"Finished Orders"}}),e._v("\n                Finished Orders")])],1),o("li",[o("router-link",{attrs:{to:{name:"AdminProjectListing"}}},[o("img",{attrs:{src:r("9627"),alt:"Projects"}}),e._v("\n                Abandoned Orders\n            ")])],1),o("li",[e._v(" ")]),o("li",[o("router-link",{attrs:{to:{name:"CustomerListing"}}},[o("img",{attrs:{src:r("477e"),alt:"Coupon Code"}}),o("span",[e._v("Customer Profiles")])])],1),o("li",[e._v(" ")]),o("li",[o("router-link",{attrs:{to:{name:"ManageProduct"}}},[o("img",{attrs:{src:r("d4a3"),alt:"Manage  Product"}}),o("span",[e._v("Manage  Product")])])],1),o("li",[o("router-link",{attrs:{to:{name:"AdminCouponListing"}}},[o("img",{attrs:{src:r("ed76"),alt:"Coupon Code"}}),o("span",[e._v("Coupon Code")])])],1)])])},qe=[],Ve={name:"adminSideBar"},Qe=Ve,Ge=Object(p["a"])(Qe,Ye,qe,!1,null,"1f9f1bb0",null),Ze=Ge.exports,We=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},He=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("footer",[o("div",[e._v("PART OF THE PHOTOVISION FAMILY")]),o("img",{attrs:{src:r("6776"),alt:"Footer Logos"}})])}],Je={name:"adminFooter"},Xe=Je,Ke=Object(p["a"])(Xe,We,He,!1,null,"436c3189",null),et=Ke.exports,tt={name:"AdminDefaultContainer",components:{adminHeader:Re,adminSideBar:Ze,adminFooter:et},created:function(){this.$helpers.toggleSubMenu()}},rt=tt,ot=(r("7abe"),Object(p["a"])(rt,Ne,Le,!1,null,null,null)),st=ot.exports,at=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("header",{staticClass:"header"},[o("div",{staticClass:"container"},[o("div",{staticClass:"navbar level"},[o("div",{staticClass:"level-left logo navbar-brand"},[o("router-link",{staticClass:"level-item",attrs:{to:{name:"UserDashboard"}}},[o("img",{attrs:{src:r("cf05"),alt:"PhotoMozaix logo"}})]),e._m(0)],1),o("Navigation")],1)])]),o("section",{staticClass:"section"},[o("div",{staticClass:"container"},[o("router-view")],1)]),e._m(1)])},nt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"mainNav"}},[r("span",{attrs:{"aria-hidden":"true"}}),r("span",{attrs:{"aria-hidden":"true"}}),r("span",{attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("footer",{staticClass:"footer is-paddingless"},[o("div",{staticClass:"container"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-two-thirds"},[o("img",{staticClass:"footer-logo",attrs:{src:r("cf05"),alt:"PhotoMozaix logo"}})]),o("div",{staticClass:"column level"},[o("ul",{staticClass:"level-left social"},[o("li",{staticClass:"level-item"},[o("a",{attrs:{href:""}},[o("i",{staticClass:"fab fa-facebook-f"})])]),o("li",{staticClass:"level-item"},[o("a",{attrs:{href:""}},[o("i",{staticClass:"fab fa-twitter"})])]),o("li",{staticClass:"level-item"},[o("a",{attrs:{href:""}},[o("i",{staticClass:"fab fa-instagram"})])])])])]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-two-thirds"},[o("p",[o("strong",[e._v("About PhotoMozaix")]),o("br"),e._v("\n                        A PhotoMozaix is one large image created from a collection of tiny photos. We take your images and create a memorable family keepsake your loved ones will enjoy for generations to come! PhotoMozaix are a great way to remember a special event or cherished family member.")]),o("p",{staticClass:"legal"},[o("span",[e._v("© Copyright PhotoMozaix")]),e._v(" | "),o("a",{attrs:{href:"https://photomozaix.com/privacy"}},[e._v("Privacy Policy")]),e._v(" | "),o("a",{attrs:{href:"https://photomozaix.com/terms"}},[e._v("Terms & Conditions")])])]),o("div",{staticClass:"column"},[o("p",{staticClass:"address"},[o("strong",[e._v("PhotoMozaix")]),o("br"),e._v("\n                        8300 Fairview Rd."),o("br"),e._v("\n                        Mint Hill, NC 28227"),o("br"),o("a",{attrs:{href:"tel:704-846-5588"}},[e._v("(704) 846-5588")])])])])]),o("div",{staticClass:"logos"},[o("div",{staticClass:"container"},[o("p",[e._v("Part of the Photovision Family")]),o("ul",{staticClass:"level"},[o("li",{staticClass:"level-item has-text-centered"},[o("a",{attrs:{href:"https://www.photovision.com/"}},[o("img",{attrs:{src:r("ba78"),alt:"PhotoVision logo"}})])]),o("li",{staticClass:"level-item has-text-centered"},[o("a",{attrs:{href:"https://www.createavideo.com//"}},[o("img",{attrs:{src:r("c52e"),alt:"CreateAVideo logo"}})])]),o("li",{staticClass:"level-item has-text-centered"},[o("a",{attrs:{href:"https://www.grouptravelvideos.com/"}},[o("img",{attrs:{src:r("8b8a"),alt:"GroupTravel logo"}})])]),o("li",{staticClass:"level-item has-text-centered"},[o("a",{attrs:{href:"https://photomozaix.com//pricing/#"}},[o("img",{attrs:{src:r("d8c4"),alt:"PhotoMozaix logo"}})])])])])])])}],it=r("2f62"),ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"level-right navbar-menu",attrs:{id:"mainNav","data-test":e.currentUser.email}},[e.$helpers.emptyOrNull(e.currentUser)?r("ol",{staticClass:"level-item navbar-end"},[r("li",{staticClass:"navbar-item"},[r("a",{attrs:{href:"https://photomozaix.com/inspiration/"}},[e._v("Inspiration "+e._s(e.$helpers.emptyOrNull(e.currentUser.first_name)))])]),e._m(0),r("li",{staticClass:"navbar-item"},[r("router-link",{attrs:{to:"/signup"}},[e._v("Order Now")])],1),e._m(1),e._m(2),e._m(3),r("li",{staticClass:"navbar-item secondary-nav"},[r("router-link",{attrs:{to:"/login"}},[e._v("Log In "),r("i",{staticClass:"demo-icon icon-signin"},[e._v("")])])],1)]):r("ol",{staticClass:"level-item navbar-end"},[r("li",{staticClass:"navbar-item"},[r("router-link",{attrs:{to:{name:"UserDashboard"}}},[e._v("My Projects")])],1),r("li",{staticClass:"navbar-item"},[r("router-link",{attrs:{to:{name:"SharedWithMe"}}},[e._v("Shared With Me")])],1),r("li",{staticClass:"navbar-item"},[r("router-link",{attrs:{to:{name:"MyOrders"}}},[e._v("My Orders")])],1),r("li",{staticClass:"navbar-item secondary-nav"},[r("button",{on:{click:e.logout}},[e._v("Sign Out "),r("i",{staticClass:"demo-icon icon-signout"},[e._v("")])])])])])},lt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"navbar-item"},[r("a",{attrs:{href:"https://photomozaix.com/pricing/"}},[e._v("Pricing")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"navbar-item"},[r("a",{attrs:{href:"https://photomozaix.com/contact/"}},[e._v("Contact")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"navbar-item secondary-nav"},[r("a",{attrs:{href:"https://photomozaix.com/about/"}},[e._v("About")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"navbar-item secondary-nav"},[r("a",{attrs:{href:"https://photomozaix.com/faq/"}},[e._v("FAQ")])])}],dt=r("ee2e"),ut={name:"Navigation",data:function(){return{currentUser:{}}},created:function(){var e=this;e.currentUser=e.$helpers.getCurrentUser(),e.$eventHub.$on("login-user",function(){e.currentUser=e.$helpers.getCurrentUser()}),e.$eventHub.$on("logout-user",function(){e.currentUser={},e.logOutUser()})},methods:{logout:function(){var e=this,t=this;dt.auth.signOut().then(function(){var t=e,r=t.$helpers.setMessage("success","You have successfully logged out","Login");t.$store.commit("setFlashMessage",r),t.$eventHub.$emit("logout-user")}).catch(function(e){t.consoleData(e)})}},mounted:function(){var e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0),t=document.querySelectorAll(".navbar-item");e.length>0&&e.forEach(function(e){e.addEventListener("click",function(){var r=e.dataset.target,o=document.getElementById(r);e.classList.toggle("is-active"),o.classList.toggle("is-active"),t.forEach(function(t){t.addEventListener("click",function(){e.classList.remove("is-active"),o.classList.remove("is-active")})})})})}},pt=ut,mt=Object(p["a"])(pt,ct,lt,!1,null,null,null),ht=mt.exports,_t=document.head,ft=document.createElement("link");ft.type="text/css",ft.rel="stylesheet",ft.href="https://pro.fontawesome.com/releases/v5.4.1/css/all.css",ft.integrity="sha384-POYwD7xcktv3gUeZO5s/9nUbRJG/WOmV6jfEGikMJu77LGYO8Rfs2X7URG822aum",ft.crossOrigin="anonymous",_t.appendChild(ft);var vt=document.createElement("link");vt.rel="icon",vt.href="https://photomozaix.com/wp-content/uploads/2018/11/cropped-Logo-Mozaix-Bug2-32x32.png",_t.appendChild(vt);var gt={name:"UserDefaultContainer",components:{Navigation:ht},computed:Object(it["b"])(["currentUser"])},bt=gt,Ct=Object(p["a"])(bt,at,nt,!1,null,"28c36674",null),wt=Ct.exports,yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-modal",{ref:"shareCodeModal",attrs:{id:"shareCodeModal",title:"Send Email","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":""},on:{close:function(t){return e.modalAction("hide")}}},[r("wysiwyg",{model:{value:e.emailBody,callback:function(t){e.emailBody=t},expression:"emailBody"}}),r("div",{staticClass:"columns is-multiple text-center"},[r("div",{staticClass:"column is-12 btnsContainter"},[r("b-button",{ref:"updateBtn",staticClass:"customButtonMedium width_200 mediumColor",attrs:{variant:"success"},on:{click:function(t){return e.sendCouponViaEmail()}}},[e._v("Send Email")]),r("b-button",{staticClass:"customButtonMedium width_200 lightColor",on:{click:function(t){return e.modalAction("hide")}}},[e._v("Cancel")])],1)])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("div",{staticClass:"flexElem panelHeader flexResponsive"},[r("div",{staticClass:"panelHeading"},[e._v("\n            Abandoned Orders\n        ")]),r("div",{staticClass:"flexElem flexResponsive"},[r("div",{staticClass:"hasSearch autoWidth"},[r("b-form-select",{staticClass:"input customInput",staticStyle:{"min-width":"150px"},attrs:{name:"status",options:e.searchByDate},on:{change:function(t){return e.search("search_date")}},model:{value:e.search_date,callback:function(t){e.search_date=t},expression:"search_date"}})],1),r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_customer_name,expression:"search_customer_name"}],staticClass:"inputControl searchIcon",attrs:{type:"text",autocomplete:"nope",placeholder:"Search With Customer Name"},domProps:{value:e.search_customer_name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("search_customer_name")},input:function(t){t.target.composing||(e.search_customer_name=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("search_customer_name")}}})]),r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_customer_email,expression:"search_customer_email"}],staticClass:"inputControl searchIcon",attrs:{type:"text",autocomplete:"nope",placeholder:"Search With Customer Email"},domProps:{value:e.search_customer_email},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("search_customer_email")},input:function(t){t.target.composing||(e.search_customer_email=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("search_customer_email")}}})])])]),r("div",{staticClass:"panelContent"},[r("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll.x",value:e.draggable,expression:"draggable",modifiers:{x:!0}}],staticClass:"table-responsive"},[r("table",{staticClass:"themeTable noTextBreak"},[e._m(0),r("tbody",[e._l(e.projects,function(t,o){return r("tr",[r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("capitalize")(t.user_name?t.user_name:"N/A"))+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.user_email)+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("capitalize")(t.title))+"\n                         ")])]),r("td",{staticClass:"text-center numVal"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.total_photos)+"\n                         ")])]),r("td",{staticClass:"noTextBreak"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("moment")(t.date_created.toDate(),"ddd, Do MMM  YYYY"))+"\n                         ")])]),r("td",[r("router-link",{attrs:{to:{name:"AdminViewProject",params:{projectId:t.id}},title:"View Project"}},[e._v("\n                            "+e._s(t.id)+"\n                        ")])],1),r("td",{staticClass:"noTextBreak"},[t.total_orders>0?[r("router-link",{staticClass:"action action_cart",attrs:{to:{name:"ProjectOrderListing",params:{projectId:t.id,projectTitle:t.title}},title:"View Project Orders"}})]:[r("div",{staticClass:"action action_cart",staticStyle:{cursor:"not-allowed"},attrs:{title:"No orders against this project"}})],t.downloading?[r("CircleLoader",{attrs:{progress:t.progress}})]:e._e(),r("span",{staticClass:"action action_download",staticStyle:{cursor:"pointer"},attrs:{title:"Download images zip"},on:{click:function(r){return e.createZip(t.id,o)}}}),r("span",{staticClass:"action action_email",staticStyle:{cursor:"pointer"},attrs:{title:"Send Email"},on:{click:function(r){return e.modalAction("show",t)}}}),r("router-link",{staticClass:"action action_view",attrs:{to:{name:"AdminViewProject",params:{projectId:t.id}},title:"View Project"}})],2)])}),0==e.showLoader&&e.projects.length<=0?[r("tr",[r("td",{attrs:{colspan:"7"}},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                                No Data Exists\n                            ")])])])]:e._e()],2)])])])],1)},xt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Customer Name")]),r("th",[e._v("Customer Email")]),r("th",[e._v("Project Title")]),r("th",{staticClass:"text-center"},[e._v("Number of Images")]),r("th",{staticClass:"noTextBreak"},[e._v("Date")]),r("th",[e._v("Project ID")]),r("th",{staticClass:"noTextBreak"},[e._v("Actions")])])])}],jt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"full_loader"},[r("div",{staticClass:"skill_container"},[r("div",{staticClass:"c100 xt-small",class:"p"+e.progress},[r("span",[e._v(e._s(e.progress)+"%")]),e._m(0)]),r("div",{staticClass:"skill_name",attrs:{id:"skill_name"}},[e._v(e._s(e.message))])])])},It=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"slice"},[r("div",{staticClass:"bar"}),r("div",{staticClass:"fill"})])}],kt=(r("c5f6"),{name:"CircleLoader",props:{progress:{type:Number,required:!1,default:0},message:{type:String,required:!1,default:"Downloading..."}}}),At=kt,Dt=Object(p["a"])(At,jt,It,!1,null,"509489cf",null),Mt=Dt.exports,Ot=r("ee2e"),Pt=r("21a6"),Et=r("7c39"),St=r("0083"),Nt={name:"AdminProjectListing",components:{"vue-date":x["a"],CircleLoader:Mt},data:function(){return{projects:[],total_projects:0,total_pages:0,per_page:20,current_page:1,errorMsg:"",auth_user:{},search_customer_name:"",search_customer_email:"",start_at:null,start_after:null,searchByDate:[{value:"all",text:"All"},{value:"last6Months",text:"Last 6 Months"}],search_date:"all",coupon_code:"",coupon_discount:"",emailBody:'<p>Dear (Customer Name if one in system otherwise Dear Customer),&nbsp;</p><br>                    <p>We noticed you started a new PhotoMozaix project but have not placed the order yet. We know life can get busy, but PhotoMozaix are great gifts for any occasion!</p><br>                    <p>To help you along we would like to offer you this Free standard shipping offer that is a $10 value if used in the next 24 hours by using the following code:&nbsp; <strong style="color: #ff0000;">FREESHIP</strong></p><br>                    <p>If you have any questions please feel free to contact us at (704) 846-5588.</p><br>                    <p>We look forward to helping you brighten someone&rsquo;s day!</p><br>                    <p>Thank you,</p><br>                    <p>PhotoMoziax Team</p><br>',activeProject:null}},created:function(){var e=this;e.getProjects()},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getProjects()},getProjects:function(){var e=this;window.addEventListener("scroll",e.scrollListener);var t=Ot.projectsCollection.where("date_deleted","==",null);t=e.addSearchQuery(t),t=t.orderBy("date_created","desc"),e.start_after&&(t=t.startAfter(e.start_after)),e.showLoader=!0,t.limit(e.per_page).get().then(function(t){var r=t.docs.length;r>0?(window.addEventListener("scroll",e.scrollListener),e.start_at=t.docs[0],e.start_after=t.docs[r-1]):window.removeEventListener("scroll",e.scrollListener),t.forEach(function(t){var r=t.data();r["id"]=t.id,r["downloading"]=!1,r["downloaded"]=0,r["progress"]=0,r["message"]="Downloading...",e.projects.push(r)}),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.$helpers.consoleData("Error getting projects: "+t)})},addSearchQuery:function(e){var t=this;if(t.search_customer_name&&(e=e.where("name_terms","array-contains",t.search_customer_name.toLowerCase())),t.search_customer_email&&(e=e.where("email_terms","array-contains",t.search_customer_email.toLowerCase())),t.search_date&&"last6Months"==t.search_date){var r=new Date;r.setHours(0,0,0,0);var o=new Date(r.setMonth(r.getMonth()-6));o.setHours(0,0,0,0);var s=new Date;s.setHours(23,59,59,999);var a={start_date:o,end_date:s};e=e.where("date_created",">=",a.start_date).where("date_created","<=",a.end_date)}return e},search:function(e){var t=this;"search_customer_name"==e&&(t.search_customer_email=""),"search_customer_email"==e&&(t.search_customer_name=""),t.projects=[],t.start_at=null,t.start_after=null,t.getProjects()},createZip:function(e,t){var r=this;if(e){var o=[];r.fb.projectsCollection.doc(e).collection("photos").where("date_deleted","==",null).get().then(function(s){s.forEach(function(e){var t=e.data().name;e.data().is_main_img&&(t="main_"+e.data().name),o.push({path:e.data().url,name:t})}),o.length>0?(r.projects[t].downloading=!0,$("body").addClass("loaderOpen"),r.downloadZip(o,e+".zip",o.length,t)):r.simpleAlert({type:"info",text:"No files to download"})})}},downloadZip:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default.zip",r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=this,a=new Et;e.forEach(function(e,t){a.file(e.name,s.urlToPromise(e.path,r,o),{base64:!0,binary:!0})}),a.generateAsync({type:"blob"}).then(function(e){s.projects[o].message="Creating Zip...",s.projects[o].downloading=!1,s.projects[o].downloaded=0,s.projects[o].progress=0,$("body").removeClass("loaderOpen"),Pt.saveAs(e,t)})},urlToPromise:function(e,t,r){var o=this;return new Promise(function(s,a){St.getBinaryContent(e,function(e,n){if(e)a(e);else{var i=JSON.stringify(o.projects[r].downloaded);i=JSON.parse(i),i=parseInt(i)+1;var c=parseInt(i)/parseInt(t);c=parseFloat(c)*parseFloat("100"),o.projects[r].downloaded=i,o.projects[r].progress=parseInt(c);o.projects[r].id;s(n)}})})},sendEmail:function(e,t){alert(e,t)},sendCouponViaEmail:function(){var e=this;if(e.emailBody){e.showLoader=!0,e.$refs["updateBtn"].disabled=!0;var t="https://api.photomozaix.com/api/send/coupon/email",r={email:e.activeProject.user_email,emailBody:e.emailBody,base_url:"https://store.photomozaix.com/"};e.$http.post(t,r).then(function(t){var r=t.body;r.success?(e.showLoader=!1,e.$refs["updateBtn"].disabled=!1,e.modalAction("hide"),e.simpleAlert({type:"success",text:"Email Sent!"})):(e.showLoader=!1,e.simpleAlert({type:"error",text:"Something went wrong. Please try again"}))},function(t){e.consoleData("error vue resource"),e.showLoader=!1,e.$refs["updateBtn"].disabled=!1,e.simpleAlert({type:"error",text:"Something went wrong. Please try again"})})}else e.simpleAlert({type:"info",text:"Email body can not be empty"})},modalAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this;if(r.activeProject=t,"show"==e){var o=t.user_name?t.user_name:"Customer";r.emailBody="<p>Dear "+o+',&nbsp;</p><br>                    <p>We noticed you started a new PhotoMozaix project but have not placed the order yet. We know life can get busy, but PhotoMozaix are great gifts for any occasion!</p><br>                    <p>To help you along we would like to offer you this Free standard shipping offer that is a $10 value if used in the next 24 hours by using the following code:&nbsp; <strong style="color: #ff0000;">FREESHIP</strong></p><br>                    <p>If you have any questions please feel free to contact us at (704) 846-5588.</p><br>                    <p>We look forward to helping you brighten someone&rsquo;s day!</p><br>                    <p>Thank you,</p><br>                    <p>PhotoMoziax Team</p><br>',r.$bvModal.show("shareCodeModal")}"hide"==e&&(r.$bvModal.hide("shareCodeModal"),setTimeout(function(){r.activeProject=null},100))}}},Lt=Nt,zt=Object(p["a"])(Lt,yt,xt,!1,null,null,null),$t=zt.exports,Ut=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"adminProject"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[o("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),o("div",{staticClass:"flexElem mb-3"},[o("div",[o("span",{staticClass:"go_back_admin",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$router.go(-1)}}},[o("i",{staticClass:"fal fa-angle-left"}),e._v(" Go Back\n            ")])])]),o("div",{staticClass:"col-md-12 text-center"},[o("div",{staticClass:"panelHeading mb-1"},[e._v("\n            "+e._s(e._f("capitalize")(e.opened_project.title))+"\n        ")]),o("div",{staticClass:"num-img text-center mb-5"},[o("strong",[e._v("Total images:")]),e._v("\n            "+e._s(e.opened_project.photos?e.opened_project.photos.length:"0")+"\n        ")])]),o("div",{staticClass:"projectViewContainer flexResponsive"},[o("div",{staticClass:"project-side"},[o("div",{staticClass:"project-controls"},[o("div",{ref:"projectMainImg",staticClass:"main-img-block text-center"},[e.opened_project.main_thumb_url?o("img",{attrs:{src:e.s3_base_url+e.opened_project.id+"/thumb_"+e.opened_project.main_image_name}}):o("img",{attrs:{src:r("35d4")}}),e._m(0)]),o("hr",{staticClass:"light"}),e.collage_uploaded?o("div",{staticClass:"main-img-block text-center mt-3 sfs"},[o("div",{staticClass:"mosaic_img hover_dark"},[o("img",{attrs:{src:e.mozaix_thumb}})]),o("div",{staticClass:"mt-3 project_action view_project",attrs:{title:"view mozaix"},on:{click:e.showMozaixGallery}})]):e._e()])]),o("div",{staticClass:"project-main"},[e.opened_project.photos&&e.opened_project.photos.length>0&&!e.showLoader?[o("gallery",{attrs:{images:e.galleryImages,index:e.galleryIndex},on:{close:e.closeGallery}}),o("div",{staticClass:"photo-grid"},e._l(e.opened_project.photos,function(t,r){return o("figure",{key:r,class:[t.is_main_img?"main-img photo":"main-img-disabled photo"]},[o("span",[t.url?o("img",{attrs:{src:e.s3_base_url+e.opened_project.id+"/thumb_"+t.name,alt:t.original_name,id:t.id}}):e._e()]),o("figcaption",{staticClass:"mt-2 mb-2"},[o("p",{staticClass:"img-controls setMainImg"},[o("span",{staticClass:"project_action view_project",on:{click:function(t){e.galleryIndex=r}}},[e._v("\n                                     \n                                ")])])])])}),0)]:e._e(),0==e.showLoader&&e.opened_project.photos&&e.opened_project.photos.length<=0?[o("p",{staticClass:"text-center alert alert-warning mt-5",staticStyle:{margin:"0 50px"}},[e._v(" No image found")])]:e._e()],2)])])},Ft=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-2"},[r("strong",[e._v("Main Image")])])}],Tt=r("ee2e"),Bt={name:"AdminViewProject",props:["projectId"],components:{gallery:oe.a},data:function(){return{loading:{type:Boolean},opened_project:{},s3_base_url:"https://s3.amazonaws.com/photomozaix-production/",galleryIndex:null,photos:[],mozaixIndex:null,mozaix:[],collage_uploaded:!1,galleryImages:[],mozaix_thumb:null}},watch:{opened_project:function(e,t){var r=this;r.emptyOrNull(e)||e.photos.forEach(function(e,t){var o=r.s3_base_url+r.projectId+"/preview_"+e.name;r.photos.push(o),r.galleryImages.push(o)})}},mounted:function(){var e=this;e.loading=!0,e.getProjectWithPhotos(),e.loading=!1},methods:{getProjectWithPhotos:function(){var e=this,t=Tt.projectsCollection.doc(e.projectId),r={};e.showLoader=!0,t.get().then(function(o){r=o.data(),r["id"]=o.id,r["photos"]=[],t.collection("photos").where("date_deleted","==",null).orderBy("date_created","desc").get().then(function(t){var o=0;t.forEach(function(e,t){r["photos"][o]=e.data(),r["photos"][o]["id"]=e.id,o++}),e.opened_project=r,e.getProjectMozaix(),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.consoleData("error getting photos: "+t)})}).catch(function(t){e.consoleData("error getting project "+t)})},getProjectMozaix:function(){var e=this;e.fb.ordersCollection.where("project_id","==",e.projectId).get().then(function(t){t.forEach(function(t){if(t.data().collage_uploaded){t.data();e.fb.ordersCollection.doc(t.id).collection("collages").get().then(function(r){var o=0;r.forEach(function(r){var s=r.data();s["id"]=r.id,e.collage_uploaded=!0;var a=e.s3_base_url+"order_collages/"+t.id+"/customer_"+s.name;e.mozaix.push(a),0==o&&(e.mozaix_thumb=e.s3_base_url+"order_collages/"+t.id+"/thumb_"+s.name),o=parseInt(o)+1})})}})})},showMozaixGallery:function(){var e=this,t=JSON.stringify(e.mozaix);e.galleryImages=JSON.parse(t),e.galleryIndex=0},closeGallery:function(){var e=this;e.galleryIndex=null;var t=JSON.stringify(e.photos);e.galleryImages=JSON.parse(t)}}},Rt=Bt,Yt=Object(p["a"])(Rt,Ut,Ft,!1,null,null,null),qt=Yt.exports,Vt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Qt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"flexElem panelHeader flexResponsive"},[r("div",{staticClass:"panelHeading"},[e._v("\n            Orders Listing\n        ")]),r("div",{staticClass:"flexElem flexResponsive"},[r("input",{staticClass:"inputControl searchIcon",attrs:{type:"text",placeholder:"Customer Information"}}),r("input",{staticClass:"inputControl datepicker calendarIcon",attrs:{type:"text",placeholder:"03/07/2019"}})])]),r("div",{staticClass:"panelContent"},[r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"themeTable"},[r("thead",[r("tr",[r("th",[e._v("Customer Name")]),r("th",[e._v("Email")]),r("th",[e._v("Shipping Address")]),r("th",[e._v("Date")]),r("th",{staticClass:"text-center"},[e._v("Qty")]),r("th",[e._v("Total")]),r("th",[e._v("Actions")])])]),r("tbody",[r("tr",[r("td",[e._v("Johnson Gill")]),r("td",[e._v("Info@Johnson.com")]),r("td",[e._v("18 South Center Street ")]),r("td",[e._v("01/07/2019")]),r("td",{staticClass:"text-center numVal"},[e._v("10")]),r("td",[e._v("$542.00")]),r("td",[r("a",{staticClass:"action action_forward",attrs:{href:"#!"}}),r("a",{staticClass:"action action_download",attrs:{href:"#!"}}),r("a",{staticClass:"action action_view",attrs:{href:"#!"}}),r("a",{staticClass:"action action_delete",attrs:{href:"#!"}})])]),r("tr",[r("td",[e._v("Johnson Gill")]),r("td",[e._v("Info@Johnson.com")]),r("td",[e._v("18 South Center Street ")]),r("td",[e._v("01/07/2019")]),r("td",{staticClass:"text-center numVal"},[e._v("10")]),r("td",[e._v("$542.00")]),r("td",[r("a",{staticClass:"action action_forward",attrs:{href:"#!"}}),r("a",{staticClass:"action action_download",attrs:{href:"#!"}}),r("a",{staticClass:"action action_view",attrs:{href:"#!"}}),r("a",{staticClass:"action action_delete",attrs:{href:"#!"}})])]),r("tr",[r("td",[e._v("Johnson Gill")]),r("td",[e._v("Info@Johnson.com")]),r("td",[e._v("18 South Center Street ")]),r("td",[e._v("01/07/2019")]),r("td",{staticClass:"text-center numVal"},[e._v("10")]),r("td",[e._v("$542.00")]),r("td",[r("a",{staticClass:"action action_forward",attrs:{href:"#!"}}),r("a",{staticClass:"action action_download",attrs:{href:"#!"}}),r("a",{staticClass:"action action_view",attrs:{href:"#!"}}),r("a",{staticClass:"action action_delete",attrs:{href:"#!"}})])])])])])]),r("div",{staticClass:"flexElem panelFooter flexResponsive"},[r("div",{staticClass:"flexElem flexResponsive"},[r("button",{staticClass:"footerNav"},[e._v("Previous")]),r("div",{staticStyle:{"margin-left":"20px",display:"flex","align-items":"center"}},[r("span",[e._v("Page")]),e._v("\n                 \n                "),r("input",{staticClass:"footerNav input",attrs:{type:"text",value:"2"}}),e._v("\n                 \n                "),r("span",[e._v("Of 10")])])]),r("div",{staticClass:"flexElem flexResponsive",staticStyle:{"justify-content":"flex-end"}},[r("div",{staticStyle:{"margin-right":"20px"}},[r("select",{staticClass:"footerNav input"},[r("option",{attrs:{value:"1"}},[e._v("1 Rows")]),r("option",{attrs:{value:"2"}},[e._v("2 Rows")]),r("option",{attrs:{value:"3"}},[e._v("3 Rows")]),r("option",{attrs:{value:"4"}},[e._v("4 Rows")]),r("option",{attrs:{value:"5"}},[e._v("5 Rows")]),r("option",{attrs:{value:"6"}},[e._v("6 Rows")]),r("option",{attrs:{value:"7"}},[e._v("7 Rows")]),r("option",{attrs:{value:"8"}},[e._v("8 Rows")]),r("option",{attrs:{value:"9"}},[e._v("9 Rows")]),r("option",{attrs:{value:"10"}},[e._v("10 Rows")])])]),r("button",{staticClass:"footerNav"},[e._v("Next")])])])])}],Gt=r("ee2e"),Zt={name:"AdminOrders",data:function(){return{projects:[],errorMsg:"",auth_user:{}}},created:function(){var e=this,t=[];e.auth_user=Gt.auth.currentUser;Gt.db.collectionGroup("assets").where("file_size","==","5").get().then(function(e){e.forEach(function(e){t.push(e.data())})}).catch(function(e){return console.log(e.message)});return!1},mounted:function(){}},Wt=Zt,Ht=Object(p["a"])(Wt,Vt,Qt,!1,null,null,null),Jt=Ht.exports,Xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("b-alert",{attrs:{show:e.dismissCountDown,dismissible:"",variant:e.pageMessageType},on:{dismissed:e.dismissAlert,"dismiss-count-down":e.countDownChanged}},[e._v("\n        "+e._s(e.pageMessage)+"\n    ")]),r("b-modal",{ref:"addUpdateCouponModal",attrs:{id:"addUpdateCouponModal",title:e.updateId?"Update Coupon":"Add Coupon","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":""},on:{close:function(t){return e.modalAction("hide")}}},[r("div",{staticClass:"columns is-multiple mt-2"},[r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Title","label-for":"title","invalid-feedback":"Title is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput",class:[e.errors.first("title")?"field_error":""],attrs:{name:"title",id:"title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e.errors.first("title")?r("b-popover",{attrs:{target:"title",triggers:"hover focus",content:e.errors.first("title")}}):e._e()],1)],1),r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Code","label-for":"code","invalid-feedback":"code is required"}},[e.updateId?r("b-form-input",{staticClass:"input customInput",attrs:{name:"code",id:"code",disabled:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}):r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput",class:[e.errors.first("code")?"field_error":""],attrs:{name:"code",id:"code"},on:{change:e.checkCode},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e.errors.first("code")?r("b-popover",{attrs:{target:"code",triggers:"hover focus",content:e.errors.first("code")}}):e._e()],1)],1)]),r("div",{staticClass:"columns is-multiple"},[r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Type","label-for":"type","invalid-feedback":"Coupon type is required"}},[r("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput",class:[e.errors.first("type")?"field_error":""],attrs:{name:"type",id:"type",options:e.couponTypes},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),e.errors.first("type")?r("b-popover",{attrs:{target:"type",triggers:"hover focus",content:e.errors.first("type")}}):e._e()],1),r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Value","label-for":"value","invalid-feedback":"Coupon value is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"input customInput",class:[e.errors.first("value")?"field_error":""],attrs:{name:"value",id:"value"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.errors.first("value")?r("b-popover",{attrs:{target:"value",triggers:"hover focus",content:e.errors.first("value")}}):e._e()],1)],1)]),r("div",{staticClass:"columns is-multiple"},[r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Max Use","label-for":"max_use","invalid-feedback":"Coupon max_use is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"input customInput",class:[e.errors.first("max_use")?"field_error":""],attrs:{name:"max_use",id:"max_use"},model:{value:e.max_use,callback:function(t){e.max_use=t},expression:"max_use"}}),e.errors.first("max_use")?r("b-popover",{attrs:{target:"max_use",triggers:"hover focus",content:e.errors.first("max_use")}}):e._e()],1)],1),r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Valid Till","label-for":"valid_till","invalid-feedback":"Coupon expiry date is required"}},[r("vue-date",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"data-vv-name":"valid_till",id:"valid_till","input-class":{field_error:e.errors.first("valid_till"),"input customInput":!0},"disabled-dates":e.datepicker.disabledDates},model:{value:e.valid_till,callback:function(t){e.valid_till=t},expression:"valid_till"}}),e.errors.first("valid_till")?r("b-popover",{attrs:{target:"valid_till",triggers:"hover focus",content:e.errors.first("valid_till")}}):e._e()],1)],1)]),r("div",{staticClass:"columns is-multiline"},e._l(e.products,function(t,o){return r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{staticClass:"flexElem flexCheckbox",attrs:{label:t.title,"label-for":"max_use","invalid-feedback":"Coupon max_use is required"}},[r("b-form-checkbox",{attrs:{name:"set_base_price",value:!0,checked:e.checkCouponProduct(t.id),switch:""},on:{change:function(r){return e.productOptionChanged(r,t.id)}}})],1)],1)}),0),r("div",{staticClass:"columns is-multiple text-center"},[r("div",{staticClass:"column is-12 btnsContainter"},[e.updateId?r("b-button",{ref:"updateBtn",staticClass:"customButtonMedium width_200 mediumColor",attrs:{variant:"success"},on:{click:function(t){return e.updateCoupon(t)}}},[e._v("Update")]):r("b-button",{ref:"addBtn",staticClass:"customButtonMedium width_200 mediumColor",attrs:{name:"add_btn",variant:"info"},on:{click:function(t){return e.addCoupon(t)}}},[e._v("Add")]),r("b-button",{staticClass:"customButtonMedium width_200 lightColor",on:{click:function(t){return e.modalAction("hide")}}},[e._v("Cancel")])],1)])]),r("div",{staticClass:"flexElem panelHeader flexResponsive"},[r("div",{staticClass:"flexElem",staticStyle:{"justify-content":"space-between"}},[r("div",{staticClass:"panelHeading"},[e._v("\n                Coupon Codes\n            ")]),r("button",{directives:[{name:"b-modal",rawName:"v-b-modal.addUpdateCouponModal",modifiers:{addUpdateCouponModal:!0}}],staticClass:"actionButton ml-3"},[e._v("ADD COUPON CODE")])]),r("div",{staticClass:"flexElem flexResponsive"},[r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchCode,expression:"searchCode"}],staticClass:"inputControl searchIcon",attrs:{type:"text",autocomplete:"nope",placeholder:"Search With Coupon Code"},domProps:{value:e.searchCode},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("code")},input:function(t){t.target.composing||(e.searchCode=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("code")}}})]),r("vue-date",{attrs:{"data-vv-name":"valid_till","input-class":"inputControl datepicker calendarIcon",placeholder:"Search With Valid Till Date","clear-button":!0,"clear-button-icon":"fas fa-times"},on:{input:function(t){return e.search("date")}},model:{value:e.searchDate,callback:function(t){e.searchDate=t},expression:"searchDate"}})],1)]),r("div",{staticClass:"panelContent"},[r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"themeTable"},[e._m(0),r("tbody",[e._l(e.coupons,function(t,o){return r("tr",[r("td",[e._v(e._s(e._f("capitalize")(t.title)))]),r("td",[e._v(e._s(t.code))]),r("td",{staticClass:"text-center numVal"},[e._v(e._s("dollar"==t.type?"$":"%"))]),r("td",{staticClass:"text-center numVal"},[e._v(e._s(t.value))]),r("td",{staticClass:"text-center numVal"},[e._v(e._s(t.max_use))]),r("td",{staticClass:"text-center numVal"},[e._v("\n                        "+e._s(t.used_by&&"Array"==t.used_by.constructor.name?t.used_by.length:"0")+"\n                    ")]),r("td",[e._v(e._s(e._f("moment")(t.valid_till.toDate(),"ddd, Do MMM  YYYY")))]),r("td",[r("a",{staticClass:"action action_edit",attrs:{href:"#!",title:"Edit Coupon"},on:{click:function(r){return e.openUpdateModel(t.id,o)}}}),r("a",{staticClass:"action action_delete",attrs:{title:"Delete Coupon"},on:{click:function(r){return e.deleteCoupon(t.id,o)}}})])])}),0==e.showLoader&&e.coupons.length<=0?[e._m(1)]:e._e()],2)])])])],1)},Kt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Title")]),r("th",[e._v("Code")]),r("th",{staticClass:"text-center"},[e._v("Type")]),r("th",{staticClass:"text-center"},[e._v("Value")]),r("th",{staticClass:"text-center"},[e._v("Max Use")]),r("th",{staticClass:"text-center"},[e._v("Used")]),r("th",[e._v("Valid Till")]),r("th",[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",{attrs:{colspan:"7"}},[e._v("No Data Exist")])])}],er=r("ee2e"),tr={name:"AdminCouponCode",components:{"vue-date":x["a"]},data:function(){return{errorMsg:"",searchCode:"",searchDate:"",coupons:[],title:"",code:"",value:"",max_use:"",valid_till:"",type:"dollar",couponTypes:[{value:"dollar",text:"$",selected:!0},{value:"percent",text:"%"}],per_page:20,total_pages:null,morePages:!1,couponRef:"",updateId:null,updateIndex:null,updateCouponObj:null,start_at:null,start_after:null,current_page:1,today_date:"",datepicker:{disabledDates:{to:new Date}},products:[],coupon_products:[]}},created:function(){var e=this;e.fb.productsCollection.where("date_deleted","==",null).orderBy("min_quantity").get().then(function(t){t.docs.length;t.forEach(function(t){var r=t.data();r["id"]=t.id,e.products.push(r)})}),window.addEventListener("scroll",e.scrollListener),e.datepicker.disabledDates.to=e.$moment().endOf("day").subtract(1,"day").toDate(),e.getCoupons()},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getCoupons()},getCoupons:function(){var e=this,t=er.couponsCollection.where("date_deleted","==",null);t=e.addSearchQuery(t),t=t.orderBy("valid_till","desc"),e.start_after&&(t=t.startAfter(e.start_after)),e.showLoader=!0,t.limit(e.per_page).get().then(function(t){var r=t.docs.length;r>0?(window.addEventListener("scroll",e.scrollListener),e.start_at=t.docs[0],e.start_after=t.docs[r-1]):window.removeEventListener("scroll",e.scrollListener),t.forEach(function(t){var r=t.data();r["id"]=t.id,e.coupons.push(r)}),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.$helpers.consoleData("Error getting coupons: "+t)})},addCoupon:function(e){var t=this;t.$validator.validateAll().then(function(r){if(!r)return t.$helpers.consoleData("form Validation Fails while adding coupon"),!1;var o=t.setData();o["used_by"]=[],o["status"]="Active",o["code_terms"]=t.getStringTerms(o.code.toLowerCase()),o["title_terms"]=t.getStringTerms(o.title.toLowerCase()),o["coupon_products"]=t.coupon_products,o=t.$helpers.addTimestamps(o),e.target.disabled=!0,t.showLoader=!0,t.code?t.fb.couponsCollection.where("code","==",t.code).where("date_deleted","==",null).get().then(function(r){r.docs.length>0?(t.simpleAlert({type:"error",text:"The code ( "+t.code+" ) has already been used. Please use another code."}),t.$refs["addBtn"].disabled=!1,t.code=""):(er.couponsCollection.add(o).then(function(e){o["id"]=e.id,o.date_created=er.timestamp.fromDate(o.date_created),o.valid_till=er.timestamp.fromDate(o.valid_till),t.coupons.unshift(o),t.showLoader=!1,t.$helpers.consoleData("coupon added")}).catch(function(e){t.showLoader=!1,t.$helpers.consoleData("error adding coupon : "+e)}),t.modalAction("hide"),e.target.disabled=!1),t.showLoader=!1}).catch(function(e){t.showLoader=!1,t.consoleData("Error checking code "+e)}):(er.couponsCollection.add(o).then(function(e){o["id"]=e.id,o.date_created=er.timestamp.fromDate(o.date_created),o.valid_till=er.timestamp.fromDate(o.valid_till),t.coupons.unshift(o),t.showLoader=!1,t.$helpers.consoleData("coupon added")}).catch(function(e){t.showLoader=!1,t.$helpers.consoleData("error adding coupon : "+e)}),t.modalAction("hide"),e.target.disabled=!1)})},modalAction:function(e){var t=this;"show"==e&&t.$bvModal.show("addUpdateCouponModal"),"hide"==e&&(t.$bvModal.hide("addUpdateCouponModal"),setTimeout(function(){t.resetObject(),t.updateId=null,t.updateIndex=null,t.updateCouponObj=null},100))},addSearchQuery:function(e){var t=this;if(t.searchCode&&(e=e.where("code_terms","array-contains",t.searchCode.toLowerCase())),t.searchDate){var r=t.$helpers.formatDateQuery(t.searchDate);e=e.where("valid_till",">=",r.start_date).where("valid_till","<=",r.end_date)}return e},deleteCoupon:function(e,t){var r=this;this.$swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#c31d8a",cancelButtonColor:"#b9acd2",confirmButtonText:"Yes, delete it!"}).then(function(o){o.value&&er.couponsCollection.doc(e).update({date_deleted:new Date,date_updated:new Date}).then(function(){r.coupons.splice(t,1),r.$helpers.consoleData("Coupon deleted"),r.dismissCountDown=r.dismissSecs,r.pageMessage="Coupon Deleted",r.pageMessageType="success"}).catch(function(e){r.$helpers.consoleData("error deleting coupon : "+e)})})},openUpdateModel:function(e,t){var r=this,o=r.coupons[t];o&&(r.setData(o),r.updateId=e,r.updateCouponObj=o,r.updateIndex=t,r.coupon_products=JSON.parse(JSON.stringify(o.coupon_products)),r.modalAction("show"))},updateCoupon:function(e){var t=this,r=t.updateIndex,o=t.updateId;t.$validator.validateAll().then(function(s){if(!s)return t.$helpers.consoleData("form Validation Fails while updating product"),!1;var a=t.setData();a["date_updated"]=new Date,a["title_terms"]=t.getStringTerms(a.title.toLowerCase()),delete a.code,t.showLoader=!0,e.target.disabled=!0;var n=t.fb.firestore.FieldValue.delete();a["coupon_products"]=n,a["coupon_products"]=t.coupon_products,er.couponsCollection.doc(o).update(a).then(function(){t.$helpers.consoleData("product updated");var o=t.coupons[r];o.title=a.title.toLowerCase(),o.type=a.type,o.value=a.value,o.max_use=a.max_use,o.valid_till=er.timestamp.fromDate(a.valid_till);var s=JSON.stringify(t.coupon_products);o["coupon_products"]=JSON.parse(s),t.dismissCountDown=t.dismissSecs,t.pageMessage="Coupon Updated",t.pageMessageType="success",t.modalAction("hide"),e.target.disabled=!1,t.showLoader=!1}).catch(function(r){t.showLoader=!1,e.target.disabled=!1,t.$helpers.consoleData("error updating Coupon : "+r)})})},setData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;if(e)return t.title=t.$options.filters.capitalize(e.title),t.code=e.code,t.type=e.type,t.value=e.value,t.max_use=e.max_use,t.valid_till=t.$helpers.formatDate(e.valid_till.toDate(),"YYYY-MM-DD"),e;var r=new Date(t.valid_till);r.setHours(23,59,59,999);var o={title:t.title.toLowerCase(),code:t.code,type:t.type,value:t.value,max_use:t.max_use,valid_till:r};return t.$helpers.consoleData("returning data object"),o},resetObject:function(){var e=this;e.title="",e.code="",e.type="dollar",e.value="",e.max_use="",e.valid_till="",e.coupon_products=[]},search:function(e){var t=this;"code"==e&&(t.searchDate=""),"date"==e&&(t.searchCode=""),t.coupons=[],t.start_at=null,t.start_after=null,t.getCoupons()},checkCode:function(){var e=this;e.code&&(e.showLoader=!0,e.fb.couponsCollection.where("code","==",e.code).where("date_deleted","==",null).get().then(function(t){t.docs.length>0?(e.showLoader=!1,e.simpleAlert({type:"error",text:"The code ( "+e.code+" ) has already been used. Please use another code."}),e.$refs["addBtn"].disabled=!1,e.code=""):e.showLoader=!1}).catch(function(t){e.$refs["addBtn"].disabled=!1,e.consoleData("Error checking code "+t)}))},productOptionChanged:function(e,t){var r=this;e?r.coupon_products.push(t):r.coupon_products=r.coupon_products.filter(function(e){return e!=t})},checkCouponProduct:function(e){var t=this;if(null==t.updateId)return!1;if(t.updateCouponObj){var r=t.updateCouponObj.coupon_products.some(function(t){return t==e});return r}return!1}}},rr=tr,or=Object(p["a"])(rr,Xt,Kt,!1,null,null,null),sr=or.exports,ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("b-modal",{ref:"addUpdateCouponModal",attrs:{id:"addUpdateCouponModal",title:"Upload Finished Mozaix","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[e.serverErrors.length>0?r("div",[r("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showDismissibleAlert,callback:function(t){e.showDismissibleAlert=t},expression:"showDismissibleAlert"}},[r("ul",e._l(e.serverErrors,function(t){return r("li",[e._v(e._s(t))])}),0)])],1):e._e(),e.size_errors>0||e.type_errors>0?[r("b-alert",{attrs:{show:!0,dismissible:"",variant:"info"},on:{dismissed:e.hideDropzoneErrors}},[r("ul",[e.uploaded_files>0?r("li",[e._v("\n                        "+e._s("["+e.uploaded_files+"] ")+"\n                        "+e._s(1==e.uploaded_files?"file is uploaded.":"files are uploaded.")+"\n                    ")]):e._e(),e.size_errors>0?r("li",[e._v("\n                        "+e._s("The files with size less than 100 KB are not supported and the system did not upload ")+"\n                        "+e._s(1==e.size_errors?"this ":"these ")+"\n                        "+e._s("["+e.size_errors+"] ")+"\n                        "+e._s(1==e.size_errors?"File.":"Files.")+"\n                    ")]):e._e(),e.type_errors>0?r("li",[e._v("\n                        "+e._s("The supported file types are jpg and jpeg so ["+e.type_errors+"] unsupported ")+e._s(1==e.type_errors?"file type is not uploaded.":"file types are not uploaded.")+"\n                    ")]):e._e()])])]:e._e(),r("vue-dropzone",{ref:"customDropzone",attrs:{options:e.dropzoneOptions,useCustomSlot:!0,id:"photoUpload"},on:{"vdropzone-reset":e.cleanupDropzone,"vdropzone-mounted":e.vdropzoneMounted,"vdropzone-sending-multiple":e.vdropzoneSendingMultiple,"vdropzone-success-multiple":e.vdropzoneSuccessMultiple,"vdropzone-queue-complete":e.vdropzoneQueueComplete,"vdropzone-error-multiple":e.vdropzoneErrorMultiple,"vdropzone-files-added":e.vdropzoneFilesAdded}},[r("div",{staticClass:"dropzone-custom-content"},[r("p",[r("span",{staticClass:"subtitle dropzone-custom-title"},[e._v("Drag and drop to upload photos.")]),r("br"),e._v("\n                    …or click to select a file from your computer")]),r("br"),r("p",[e._v("Accepted file type: jpg, jpeg")]),r("br"),r("p",[r("strong",[e._v("Max "),r("big",[e._v("40")]),e._v(" photos at one time.")],1)])])]),r("div",{staticClass:"columns is-multiple text-center"},[r("div",{staticClass:"column is-12 btnsContainter"},[r("b-button",{ref:"closeBtn",staticClass:"customButtonMedium width_200 lightColor",on:{click:function(t){return e.modalAction("hide")}}},[e._v("Close")])],1)]),r("div",{staticClass:"uploadedThumbs"},[r("gallery",{attrs:{images:e.orderCollagesArray,index:e.galleryIndex},on:{close:function(t){e.galleryIndex=null}}}),e._l(e.orderCollagesThumbsArray,function(t,o){return r("div",{staticClass:"uploadedThumb"},[r("div",{staticClass:"overControls"},[r("span",{staticClass:"project_action view_project",on:{click:function(t){e.galleryIndex=o}}},[e._v(" ")]),r("span",{staticClass:"project_action delete_project",on:{click:function(t){return e.deleteImage(o)}}},[e._v(" ")])]),r("img",{attrs:{src:t,alt:""}})])})],2)],2),r("div",{staticClass:"flexElem panelHeader flexResponsive"},[r("div",{staticClass:"panelHeading"},[e._v("\n            New Orders Listing\n        ")]),r("div",{staticClass:"flexElem flexResponsive"},[r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_email,expression:"search_email"}],staticClass:"inputControl searchIcon",attrs:{type:"text",autocomplete:"nope",placeholder:"Search With Customer Email"},domProps:{value:e.search_email},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("email")},input:function(t){t.target.composing||(e.search_email=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("email")}}})]),r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_id,expression:"search_id"}],staticClass:"inputControl searchIcon",attrs:{type:"text",autocomplete:"nope",placeholder:"Search With Order Number"},domProps:{value:e.search_id},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("id")},keypress:e.isInteger,input:function(t){t.target.composing||(e.search_id=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("id")}}})])])]),r("div",{staticClass:"panelContent"},[r("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll.x",value:e.draggable,expression:"draggable",modifiers:{x:!0}}],staticClass:"table-responsive"},[r("table",{staticClass:"themeTable fixedLayout"},[e._m(0),r("tbody",[e._l(e.orderBy(e.orders,"date_created"),function(t,o){return r("tr",[r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.first_name+" / "+t.order_no)+"\n                         ")])]),r("td",[r("popper",{staticClass:"linkColor",staticStyle:{cursor:"pointer"},attrs:{trigger:"click",options:{placement:"right"}}},[r("div",{staticClass:"popper"},[r("p",[r("strong",[e._v("Name: ")]),e._v(e._s(t.first_name))]),r("p",[r("strong",[e._v("Email: ")]),e._v(e._s(t.order_email))]),r("p",[r("strong",[e._v("Phone No: ")]),e._v(e._s(t.phone_no?t.phone_no.replace("+1 ",""):t.phone_no))]),r("p",[r("strong",[e._v("Address: ")]),e._v(e._s(t.address))]),r("p",[r("strong",[e._v("City: ")]),e._v(e._s(t.city))]),r("p",[r("strong",[e._v("State: ")]),e._v(e._s(t.region))]),r("p",[r("strong",[e._v("Zip Code: ")]),e._v(e._s(t.zip_code))])]),r("span",{staticClass:"right",attrs:{slot:"reference"},slot:"reference"},[r("u",[e._v(e._s(t.order_email))])])])],1),r("td",[r("router-link",{attrs:{to:{name:"OrderDetail",params:{orderId:t.id}}}},[e._v("\n                            "+e._s(t.quantity)+"\n                        ")])],1),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.project_photos_count?t.project_photos_count:"0")+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("moment")(t.date_created.toDate(),"ddd, Do MMM  YYYY"))+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[t.express_production>0?r("b-alert",{attrs:{variant:"danger",show:""}},[e._v(" Express 1-2")]):r("b-alert",{attrs:{show:""}},[e._v(" Standard 4-5")])],1)]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("currency")(t.grand_total))+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("currency")(t.total_discount))+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[r("b-form-select",{staticClass:"input customInput",staticStyle:{"min-width":"100px"},attrs:{name:"status",value:t.status,options:e.orderStatuses},on:{change:function(r){return e.changeStatus(o,t.id,t.status,t.project_id)}},model:{value:t.status,callback:function(r){e.$set(t,"status",r)},expression:"order.status"}})],1)]),r("td",{staticClass:"order-status"},[r("router-link",{attrs:{to:{name:"AdminViewProject",params:{projectId:t.project_id}},title:"View Project"}},[e._v("\n                            "+e._s(t.project_id)+"\n                        ")])],1),r("td",[t.downloading?[r("CircleLoader",{attrs:{progress:t.progress}})]:e._e(),r("span",{staticClass:"action action_download",staticStyle:{cursor:"pointer"},attrs:{title:"Download images zip"},on:{click:function(r){return e.createZip(t.id,t.project_id,o,!1)}}}),t.collage_uploaded?r("span",{staticClass:"action action_download",staticStyle:{cursor:"pointer"},attrs:{title:"Download Mozaix"},on:{click:function(r){return e.createZip(t.id,t.project_id,o,!0)}}}):e._e(),r("router-link",{staticClass:"action action_view",attrs:{to:{name:"AdminViewProject",params:{projectId:t.project_id}},title:"View Project"}}),r("span",{staticClass:"action action_forward",staticStyle:{cursor:"pointer"},attrs:{title:"Upload Mozaix"},on:{click:function(r){return e.uploadCollage(t.id,t.project_id,o)}}})],2)])}),0==e.showLoader&&e.orders.length<=0?[r("tr",[r("td",{attrs:{colspan:"11"}},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                                No Data Exists\n                            ")])])])]:e._e()],2)])])])],1)},nr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Customer Name / Order #")]),r("th",[e._v("Customer Email")]),r("th",[e._v("Number Of Mozaix")]),r("th",[e._v("Number Of Images")]),r("th",[e._v("Ordered Date")]),r("th",[e._v("Type Of Production")]),r("th",[e._v("Order Amount")]),r("th",{staticClass:"text-center"},[e._v("Discount")]),r("th",[e._v("Status")]),r("th",[e._v("Project ID")]),r("th",[e._v("Actions")])])])}],ir=(r("386d"),r("a7c6")),cr=r.n(ir),lr=r("526e"),dr=r.n(lr),ur=(r("a101"),r("21a6")),pr=r("7c39"),mr=r("0083"),hr={name:"AdminDashboard",mixins:[cr.a.mixin],components:{"vue-date":x["a"],vueDropzone:te.a,gallery:oe.a,CircleLoader:Mt,popper:dr.a},data:function(){return{orders:[],errorMsg:"",per_page:20,search_id:"",search_email:"",start_at:null,start_after:null,dropzoneOptions:{url:"https://api.photomozaix.com/api/upload/order/collage",addRemoveLinks:!1,method:"post",autoQueue:!0,autoProcessQueue:!0,uploadMultiple:!0,parallelUploads:"500",timeout:"3600000",maxFiles:40},activeOrderId:"",activeProjectId:"",serverErrors:[],active_dropzone:"",activeOrderIndex:"",orderCollagesArray:[],orderCollagesThumbsArray:[],orderCollages:[],galleryIndex:null,activeProject:null,s3_base_url:"https://s3.amazonaws.com/photomozaix-production/",size_errors:0,type_errors:0,uploaded_files:0,orderStatuses:[{value:"Ordered",text:"Ordered"},{value:"Printed",text:"Printed"}]}},created:function(){var e=this;window.addEventListener("scroll",e.scrollListener),e.getOrders()},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getOrders()},getOrders:function(){var e=this,t=e.fb.ordersCollection.where("status","==","Ordered").where("date_deleted","==",null);t=e.addSearchQuery(t),t=t.orderBy("date_created"),e.start_after&&(t=t.startAfter(e.start_after)),e.showLoader=!0,t.limit(e.per_page).get().then(function(t){var r=t.docs.length;r>0?(window.addEventListener("scroll",e.scrollListener),e.start_at=t.docs[0],e.start_after=t.docs[r-1]):window.removeEventListener("scroll",e.scrollListener),t.forEach(function(t){var r=t.data();r["id"]=t.id,r["downloading"]=!1,r["downloaded"]=0,r["progress"]=0,r["message"]="Downloading...",e.orders.push(r)}),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.$helpers.consoleData("Error getting orders: "+t)})},addSearchQuery:function(e){var t=this;return t.search_id&&(e=e.where("order_no","==",parseInt(t.search_id))),t.search_email&&(e=e.where("email_terms","array-contains",t.search_email.toLowerCase())),e},search:function(e){var t=this;"id"==e&&(t.search_email=""),"email"==e&&(t.search_id=""),t.orders=[],t.start_at=null,t.start_after=null,t.getOrders()},uploadCollage:function(e,t,r){var o=this;o.activeOrderId=e,o.activeProjectId=t,o.activeOrderIndex=r,o.getCollageImages(e),o.modalAction("show")},modalAction:function(e){var t=this;"show"==e&&t.$bvModal.show("addUpdateCouponModal"),"hide"==e&&(t.activeOrderId="",t.activeProjectId="",t.activeOrderIndex="",t.size_errors=0,t.type_errors=0,t.uploaded_files=0,t.serverErrors=[],t.$refs["closeBtn"].disabled=!1,t.$bvModal.hide("addUpdateCouponModal"))},vdropzoneMounted:function(){var e=this;e.active_dropzone=e.$refs.customDropzone},vdropzoneSendingMultiple:function(e,t,r){var o=this;o.showLoader=!0,o.hideDropzoneErrors();var s=o.activeOrderId;r.append("orderId",s),o.$refs.closeBtn&&(o.$refs.closeBtn.disabled=!0)},vdropzoneSuccessMultiple:function(e,t){var r=this;if(0==t.success)r.serverErrors=t.errors,r.showDismissibleAlert=!0,r.active_dropzone.removeAllFiles(),r.$refs.closeBtn&&(r.$refs.closeBtn.disabled=!1);else{var o=t.data.uploaded_images,s=r.fb.db.batch(),a=r.fb.ordersCollection.doc(r.activeOrderId).collection("collages");o.forEach(function(e,t){s.set(a.doc(),r.$helpers.addTimestamps(e,!0)),r.orderCollagesArray.unshift(r.s3_base_url+"order_collages/"+r.activeOrderId+"/customer_"+e.name),r.orderCollagesThumbsArray.unshift(r.s3_base_url+"order_collages/"+r.activeOrderId+"/thumb_"+e.name)}),o.length>0&&r.fb.ordersCollection.doc(r.activeOrderId).update({date_updated:new Date,collage_uploaded:!0}).then(function(){r.orders[r.activeOrderIndex].collage_uploaded=!0,r.consoleData("collage status updated in order")}).catch(function(e){r.consoleData("Error updating collage status in order: "+e)}),s.commit().then(function(){r.consoleData("batch completed"),r.size_errors=t.data.size_errors,r.type_errors=t.data.type_errors,r.uploaded_files=t.data.uploaded_images.length,r.active_dropzone.removeAllFiles(),r.activeOrderIndex="",r.$refs.closeBtn&&(r.$refs.closeBtn.disabled=!1),r.simpleAlert({type:"success",text:"Collage uploaded successfully"})})}},vdropzoneQueueComplete:function(){var e=this;e.showLoader=!1},vdropzoneErrorMultiple:function(e,t,r){var o=this;o.showLoader=!1,o.$refs["cancelBtn"].disabled=!1,alert("error multiple")},cleanupDropzone:function(){this.consoleData("Cleaning up...")},getCollageImages:function(e){var t=this;t.orderCollagesArray=[],t.orderCollagesThumbsArray=[],t.orderCollages=[];var r=t.fb.ordersCollection.doc(e).collection("collages").where("date_deleted","==",null);r.get().then(function(r){r.forEach(function(r){var o=r.data();o["id"]=r.id;var s=t.s3_base_url+"order_collages/"+e+"/customer_"+o.name;t.orderCollagesArray.push(s),t.orderCollagesThumbsArray.push(t.s3_base_url+"order_collages/"+e+"/thumb_"+o.name),t.orderCollages.push(o)})})},deleteImage:function(e){var t=this;this.$swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#c31d8a",cancelButtonColor:"#b9acd2",confirmButtonText:"Yes, delete it!"}).then(function(r){if(r.value){t.showLoader=!0;var o=t.orderCollages[e].id;t.fb.ordersCollection.doc(t.activeOrderId).collection("collages").doc(o).update({date_deleted:new Date,date_updated:new Date}).then(function(){t.consoleData("collage deleted"),t.orderCollages.splice(e,1),t.orderCollagesArray.splice(e,1),t.orderCollagesThumbsArray.splice(e,1),t.showLoader=!1}).catch(function(e){t.showLoader=!1,t.consoleData("error deleting collage "+e)})}})},vdropzoneFilesAdded:function(e){},createZip:function(e,t,r,o){var s=this;if(t){var a=[];o?s.fb.ordersCollection.doc(e).collection("collages").where("date_deleted","==",null).get().then(function(o){o.forEach(function(e){var t=e.data().name;a.push({path:e.data().url,name:t})}),a.length>0?(s.orders[r].downloading=!0,$("body").addClass("loaderOpen"),s.downloadZip(a,t+".zip",a.length,r)):(s.fb.ordersCollection.doc(e).update({collage_uploaded:!1}).then(function(){s.orders[r].collage_uploaded=!1,s.consoleData("collage status updated in order")}).catch(function(e){s.consoleData("Error updating collage status in order: "+e)}),s.simpleAlert({type:"info",text:"No files to download"}))}):s.fb.projectsCollection.doc(t).collection("photos").where("date_deleted","==",null).get().then(function(e){e.forEach(function(e){var t=e.data().name;e.data().is_main_img&&(t="main_"+e.data().name),a.push({path:e.data().url,name:t})}),a.length>0?(s.orders[r].downloading=!0,$("body").addClass("loaderOpen"),s.downloadZip(a,t+".zip",a.length,r)):s.simpleAlert({type:"info",text:"No files to download"})})}},downloadZip:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default.zip",r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=this,a=new pr;e.forEach(function(e,t){a.file(e.name,s.urlToPromise(e.path,r,o),{base64:!0,binary:!0})}),a.generateAsync({type:"blob"}).then(function(e){s.orders[o].message="Creating Zip...",s.orders[o].downloading=!1,s.orders[o].downloaded=0,s.orders[o].progress=0,$("body").removeClass("loaderOpen"),ur.saveAs(e,t)})},urlToPromise:function(e,t,r){var o=this;return new Promise(function(s,a){mr.getBinaryContent(e,function(e,n){if(e)a(e);else{var i=JSON.stringify(o.orders[r].downloaded);i=JSON.parse(i),i=parseInt(i)+1;var c=parseInt(i)/parseInt(t);c=parseFloat(c)*parseFloat("100"),o.orders[r].downloaded=i,o.orders[r].progress=parseInt(c);o.orders[r].id;s(n)}})})},hideDropzoneErrors:function(){var e=this;e.type_errors=0,e.size_errors=0,e.uploaded_files=0},changeStatus:function(e,t,r,o){var s=this,a={status:r,date_updated:new Date};"Shipped"==r?s.$swal({title:"Add Tracking Number",type:"info",input:"text",showCancelButton:!0,cancelButtonColor:"#b9acd2",inputValidator:function(e){if(!e)return"You need to write something!"}}).then(function(r){if(r.value){s.showLoader=!0,a["tracking_number"]=r.value,s.fb.ordersCollection.doc(t).update(a).then(function(){s.search(),s.consoleData("order status updated")}).catch(function(e){s.showLoader=!1,s.consoleData("error updating order status")});var n=s.fb.firestore.FieldValue.increment(1);s.fb.projectsCollection.doc(o).update({completed_orders:n}).then(function(){s.consoleData("completed order incremented")}).catch(function(e){s.showLoader=!1,s.consoleData("error incrementing completed orders")})}else s.orders[e].status="Ordered"}):(s.showLoader=!0,s.fb.ordersCollection.doc(t).update(a).then(function(){s.search(),s.showLoader=!1,s.consoleData("order status updated")}).catch(function(e){s.showLoader=!1,s.consoleData("error updating order status")}))}}},_r=hr,fr=Object(p["a"])(_r,ar,nr,!1,null,null,null),vr=fr.exports,gr=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},br=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Admin Profile")])])}],Cr={name:"AdminProfile"},wr=Cr,yr=Object(p["a"])(wr,gr,br,!1,null,"6c10e7b2",null),xr=yr.exports,jr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("b-alert",{attrs:{show:e.dismissCountDown,dismissible:"",variant:e.pageMessageType},on:{dismissed:e.dismissAlert,"dismiss-count-down":e.countDownChanged}},[e._v("\n        "+e._s(e.pageMessage)+"\n    ")]),r("b-modal",{ref:"addUpdateCouponModal",attrs:{id:"addUpdateCouponModal",title:e.updateId?"Update Product":"Add Product","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":""},on:{close:function(t){return e.modalAction("hide")}}},[r("div",{staticClass:"columns is-multiple mt-2 justifyElemBetween"},[r("div",{staticClass:"column is-4 pb-0"},[r("b-form-group",{staticClass:"flexElem mb-2 justifyElemBetween",attrs:{label:"Set Base Price","label-for":"set_base_price"}},["0"==e.updateIndex?r("b-form-checkbox",{attrs:{name:"set_base_price",switch:""},model:{value:e.set_base_price,callback:function(t){e.set_base_price=t},expression:"set_base_price"}}):r("span",[e._v("N/A")])],1),r("b-form-group",{staticClass:"flexElem mb-2 justifyElemBetween",attrs:{label:"Include Base Price","label-for":"include_base_price"}},[r("b-form-checkbox",{attrs:{name:"include_base_price",switch:""},model:{value:e.include_base_price,callback:function(t){e.include_base_price=t},expression:"include_base_price"}})],1),r("b-form-group",{staticClass:"flexElem justifyElemBetween",attrs:{label:"Is Reorder","label-for":"include_base_price"}},[r("span",[e._v(e._s(e.is_reorder?"Yes":"No"))])])],1),r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Product Name","label-for":"title","invalid-feedback":"Title is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input customInput",class:[e.errors.first("title")?"field_error":""],attrs:{type:"text",name:"title",id:"title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e.errors.first("title")?r("b-popover",{attrs:{target:"title",triggers:"hover focus",content:e.errors.first("title")}}):e._e()],1)],1)]),r("div",{staticClass:"columns is-multiple"},[r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Price","label-for":"price","invalid-feedback":"price is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"input customInput",class:[e.errors.first("price")?"field_error":""],attrs:{type:"number",min:"1",name:"price",id:"price"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),e.errors.first("price")?r("b-popover",{attrs:{target:"price",triggers:"hover focus",content:e.errors.first("price")}}):e._e()],1)],1),r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Express Production","label-for":"express_production","invalid-feedback":"Express Production is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"input customInput",class:[e.errors.first("express_production")?"field_error":""],attrs:{type:"number",min:"1",name:"express_production",id:"express_production"},model:{value:e.express_production,callback:function(t){e.express_production=t},expression:"express_production"}}),e.errors.first("express_production")?r("b-popover",{attrs:{target:"express_production",triggers:"hover focus",content:e.errors.first("express_production")}}):e._e()],1)],1)]),r("div",{staticClass:"columns is-multiple"},[r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Min Quantity","label-for":"min_quantity","invalid-feedback":"Min Quantity is required"}},[null==e.updateIndex?r("b-form-input",{staticClass:"input customInput",attrs:{type:"number",min:"1",name:"min_quantity",value:e.min_quantity,disabled:""},on:{keypress:e.isInteger}}):["0"==e.updateIndex?[r("b-form-input",{staticClass:"input customInput",class:[e.errors.first("min_quantity")?"field_error":""],attrs:{type:"number",min:"1",name:"min_quantity",id:"min_quantity",disabled:""},on:{keypress:e.isInteger},model:{value:e.min_quantity,callback:function(t){e.min_quantity=t},expression:"min_quantity"}})]:[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min:1",expression:"'required|numeric|min:1'"}],staticClass:"input customInput",class:[e.errors.first("min_quantity")?"field_error":""],attrs:{type:"number",min:"1",name:"min_quantity",id:"min_quantity",disabled:!!e.is_reorder},on:{keypress:e.isInteger},model:{value:e.min_quantity,callback:function(t){e.min_quantity=t},expression:"min_quantity"}})],e.errors.first("min_quantity")?r("b-popover",{attrs:{target:"min_quantity",triggers:"hover focus",content:e.errors.first("min_quantity")}}):e._e()]],2)],1),r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Max Quantity","label-for":"max_quantity","invalid-feedback":"Mix Quantity is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:"+e.max_quantity_min_limit,expression:"'required|numeric|min_value:' + max_quantity_min_limit"}],staticClass:"input customInput",class:[e.errors.first("max_quantity")?"field_error":""],attrs:{type:"number",min:"1",name:"max_quantity",id:"max_quantity",disabled:!!e.is_reorder},on:{keypress:e.isInteger},model:{value:e.max_quantity,callback:function(t){e.max_quantity=t},expression:"max_quantity"}}),e.errors.first("max_quantity")?r("b-popover",{attrs:{target:"max_quantity",triggers:"hover focus",content:e.errors.first("max_quantity")}}):e._e()],1)],1)]),r("div",{staticClass:"columns is-multiple"},[r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Standard Shipping","label-for":"standard_shipping","invalid-feedback":"Standard Shipping is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"input customInput",class:[e.errors.first("standard_shipping")?"field_error":""],attrs:{type:"number",name:"standard_shipping",id:"standard_shipping"},model:{value:e.standard_shipping,callback:function(t){e.standard_shipping=t},expression:"standard_shipping"}}),e.errors.first("standard_shipping")?r("b-popover",{attrs:{target:"standard_shipping",triggers:"hover focus",content:e.errors.first("standard_shipping")}}):e._e()],1)],1),r("div",{staticClass:"column is-6 pb-0"},[r("b-form-group",{attrs:{label:"Express Shipping","label-for":"express_shipping","invalid-feedback":"Express Shipping is required"}},[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],staticClass:"input customInput",class:[e.errors.first("express_shipping")?"field_error":""],attrs:{type:"number",name:"express_shipping",id:"express_shipping"},model:{value:e.express_shipping,callback:function(t){e.express_shipping=t},expression:"express_shipping"}}),e.errors.first("express_shipping")?r("b-popover",{attrs:{target:"express_shipping",triggers:"hover focus",content:e.errors.first("express_shipping")}}):e._e()],1)],1)]),r("div",{staticClass:"columns is-multiple text-center"},[r("div",{staticClass:"column is-12 btnsContainter"},[e.updateId?r("b-button",{ref:"updateBtn",staticClass:"customButtonMedium width_200 mediumColor",attrs:{variant:"info"},on:{click:function(t){return e.updateProduct(t)}}},[e._v("Update")]):r("b-button",{ref:"addBtn",staticClass:"customButtonMedium width_200 mediumColor",attrs:{variant:"info"},on:{click:function(t){return e.addProduct(t)}}},[e._v("Add")]),r("b-button",{staticClass:"customButtonMedium width_200 lightColor",on:{click:function(t){return e.modalAction("hide")}}},[e._v("Cancel")])],1)])]),e._m(0),r("div",{staticClass:"flexElem is-size-5 mt-5"},[r("span",[e._v("Title:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.product_title,expression:"product_title"}],staticClass:"inputControl",attrs:{type:"text",placeholder:"Product Title",title:"Enter To Save Product Title"},domProps:{value:e.product_title},on:{change:e.saveTitle,input:function(t){t.target.composing||(e.product_title=t.target.value)}}})]),r("div",{staticClass:"panelContent"},[r("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll.x",value:e.draggable,expression:"draggable",modifiers:{x:!0}}],staticClass:"table-responsive"},[r("table",{staticClass:"themeTable"},[e._m(1),r("tbody",[e._l(e.products,function(t,o){return r("tr",[r("td",["0"==o?r("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{change:function(r){return e.changePriceOption("set_base_price",t.id,o)}},model:{value:t.set_base_price,callback:function(r){e.$set(t,"set_base_price",r)},expression:"product.set_base_price"}}):r("span",[e._v("\n                               N/A\n                           ")])],1),r("td",[r("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{change:function(r){return e.changePriceOption("include_base_price",t.id,o)}},model:{value:t.include_base_price,callback:function(r){e.$set(t,"include_base_price",r)},expression:"product.include_base_price"}})],1),r("td",{staticClass:"text-center numVal"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("capitalize")(t.title))+"\n                         ")])]),r("td",{staticClass:"text-center numVal"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.is_reorder?"Yes":"No")+"\n                         ")])]),r("td",{staticClass:"text-center numVal"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("currency")(t.price))+"\n                         ")])]),r("td",{staticClass:"text-center numVal"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.min_quantity)+"\n                         ")])]),r("td",{staticClass:"text-center numVal"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.max_quantity)+"\n                         ")])]),r("td",{staticClass:"text-center numVal"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("currency")(t.express_production))+"\n                         ")])]),r("td",{staticClass:"text-center numVal"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("currency")(t.standard_shipping))+"\n                         ")])]),r("td",{staticClass:"text-center numVal"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("currency")(t.express_shipping))+"\n                         ")])]),r("td",[r("a",{staticClass:"action action_edit",attrs:{href:"#!",title:"Edit Product"},on:{click:function(r){return e.openUpdateModal(o,t.id)}}},[e._v(" ")]),!1===t.reorder_created&&!1===t.is_reorder?r("a",{staticClass:"action action_add",attrs:{href:"#!",title:"Create Reorder"},on:{click:function(t){return e.createReorderObj(o)}}},[e._v(" ")]):e._e(),"0"==o?[r("a",{staticClass:"action action_delete",staticStyle:{cursor:"not-allowed"},attrs:{title:"This Product Can Not Be Deleted"}},[e._v(" ")])]:[r("a",{staticClass:"action action_delete",attrs:{title:"Delete Product"},on:{click:function(r){return e.deleteProduct(o,t.id)}}})]],2)])}),0==e.showLoader&&e.products.length<=0?[e._m(2)]:e._e(),r("tr",[r("td",{staticClass:"text-right",attrs:{colspan:"11"}},[r("button",{staticClass:"actionButton round_big ml-3",on:{click:function(t){return e.modalAction("show","button")}}},[e._v("\n                           +\n                        ")])])])],2)])])])],1)},Ir=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flexElem panelHeader"},[r("div",{staticClass:"flexElem",staticStyle:{"justify-content":"space-between"}},[r("div",{staticClass:"panelHeading"},[e._v("\n                Manage Products\n            ")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Set Base Price")]),r("th",[e._v("Include Base Price")]),r("th",{staticClass:"text-center"},[e._v("Product Name")]),r("th",{staticClass:"text-center"},[e._v("Reorder")]),r("th",{staticClass:"text-center"},[e._v("Price")]),r("th",{staticClass:"text-center"},[e._v("Min Quantity")]),r("th",{staticClass:"text-center"},[e._v("Max Quantity")]),r("th",{staticClass:"text-center"},[e._v("Express Production")]),r("th",{staticClass:"text-center"},[e._v("Standard Shipping")]),r("th",{staticClass:"text-center"},[e._v("Express Shipping")]),r("th",[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",{attrs:{colspan:"11"}},[e._v("No Data Exist")])])}],kr=r("ee2e"),Ar={name:"ManageProduct",mixins:[cr.a.mixin],data:function(){return{products:[],set_base_price:!1,include_base_price:!1,title:"",price:"",min_quantity:1,min_quantity_min_limit:1,max_quantity:"",max_quantity_min_limit:"",standard_shipping:"",express_shipping:"",product_title:"",updateId:null,updateIndex:null,total_pages:null,start_at:null,start_after:null,per_page:20,express_production:"",is_reorder:!1,reorder_created:!1,reorder_id:""}},watch:{min_quantity:function(e,t){var r=this;r.max_quantity_min_limit=1==e?parseInt(e):parseInt(e)+parseInt("1")}},created:function(){var e=this;window.addEventListener("scroll",e.scrollListener),e.getProducts()},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getProducts()},getProducts:function(){var e=this,t=kr.productsCollection.where("date_deleted","==",null);t=e.addSearchQuery(t),t=t.orderBy("date_created","asc"),e.start_after&&(t=t.startAfter(e.start_after)),e.showLoader=!0,t.limit(e.per_page).get().then(function(t){var r=t.docs.length;r>0?(window.addEventListener("scroll",e.scrollListener),e.start_at=t.docs[0],e.start_after=t.docs[r-1]):window.removeEventListener("scroll",e.scrollListener);var o=0;t.forEach(function(t){var r=t.data();r["id"]=t.id,e.products.push(r),0==o&&r.product_title&&(e.product_title=r.product_title),o++}),e.products=e.orderBy(e.products,"min_quantity"),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.$helpers.consoleData("Error getting products: "+t)})},addProduct:function(e){var t=this;t.$validator.validateAll().then(function(r){if(!r)return t.$helpers.consoleData("form Validation Fails while adding product"),!1;var o=t.setData();o["is_reorder"]=!1,o["reorder_created"]=!1,o=t.$helpers.addTimestamps(o),e.target.disabled=!0,t.showLoader=!0;kr.productsCollection.add(o).then(function(e){o["id"]=e.id,t.products.push(o),t.products=t.orderBy(t.products,"min_quantity"),t.dismissCountDown=t.dismissSecs,t.pageMessage="Product Added",t.pageMessageType="success",t.showLoader=!1,t.modalAction("hide")}).catch(function(e){t.showLoader=!1,t.$helpers.consoleData("error adding product : "+e)});e.target.disabled=!1})},setData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;if(e)return t.set_base_price=e.set_base_price,t.include_base_price=e.include_base_price,t.title=t.$options.filters.capitalize(e.title),t.price=e.price,t.min_quantity=e.min_quantity,t.max_quantity=e.max_quantity,t.standard_shipping=e.standard_shipping,t.express_shipping=e.express_shipping,t.express_production=e.express_production,t.is_reorder=e.is_reorder,t.reorder_created=e.reorder_created,t.reorder_id=e.reorder_id,e;var r={set_base_price:t.set_base_price,include_base_price:t.include_base_price,title:t.title.toLowerCase(),price:t.price,product_title:t.product_title,min_quantity:t.min_quantity,max_quantity:t.max_quantity,standard_shipping:t.standard_shipping,express_shipping:t.express_shipping,express_production:t.express_production,is_reorder:t.is_reorder,reorder_created:t.reorder_created};return r},changePriceOption:function(e,t,r){var o=this,s={date_updated:new Date};if("set_base_price"==e){var a=!o.products[r].set_base_price;s["set_base_price"]=a,o.fb.productsCollection.doc(t).update(s).then(function(){o.consoleData("base price set")}).catch(function(e){o.consoleData("error setting base price: "+e)})}if("include_base_price"==e){var n=!o.products[r].include_base_price;s["include_base_price"]=n,kr.productsCollection.doc(t).update(s).then(function(){o.$helpers.consoleData("Product include base price updated")}).catch(function(e){o.products[r].include_base_price=!o.products[r].include_base_price,o.$helpers.consoleData("Product include base price update failed : "+e)})}},openUpdateModal:function(e,t){var r=this,o=r.products[e];o&&(r.setData(o),r.updateId=t,r.updateIndex=e,r.modalAction("show"))},updateProduct:function(e){var t=this,r=t.updateIndex,o=t.updateId;t.$validator.validateAll().then(function(s){if(!s)return t.$helpers.consoleData("form Validation Fails while updating product"),!1;var a=t.setData();a["date_updated"]=new Date,t.showLoader=!0,e.target.disabled=!0,kr.productsCollection.doc(o).update(a).then(function(){var e=t.products[r];e.set_base_price=a.set_base_price,e.include_base_price=a.include_base_price,e.title=a.title,e.price=a.price,e.min_quantity=a.min_quantity,e.max_quantity=a.max_quantity,e.standard_shipping=a.standard_shipping,e.express_shipping=a.express_shipping,e.express_production=a.express_production,t.$helpers.consoleData("product updated"),t.reorder_created?kr.productsCollection.doc(t.reorder_id).update({min_quantity:a.min_quantity,max_quantity:a.max_quantity,date_updated:new Date}).then(function(){t.consoleData("reorder object min and max quantity updated"),t.products.some(function(e){if(e.id==t.reorder_id)return e.min_quantity=a.min_quantity,e.max_quantity=a.max_quantity,!0}),t.dismissCountDown=t.dismissSecs,t.pageMessage="Product Updated",t.pageMessageType="success",t.modalAction("hide"),t.showLoader=!1}).catch(function(e){t.showLoader=!1,t.$helpers.consoleData("error updating reorder object min and max quantity: "+e)}):(t.dismissCountDown=t.dismissSecs,t.pageMessage="Product Updated",t.pageMessageType="success",t.modalAction("hide"),t.showLoader=!1)}).catch(function(e){t.showLoader=!1,t.$helpers.consoleData("error updating product : "+e)}),e.target.disabled=!1})},deleteProduct:function(e,t){var r=this;this.$swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#c31d8a",cancelButtonColor:"#b9acd2",confirmButtonText:"Yes, delete it!"}).then(function(o){o.value&&(r.showLoader=!0,kr.productsCollection.doc(t).get().then(function(o){var s=o.data();kr.productsCollection.doc(t).update({date_deleted:new Date,date_updated:new Date}).then(function(){r.products.splice(e,1),r.products=r.orderBy(r.products,"min_quantity"),r.$helpers.consoleData("product deleted"),r.dismissCountDown=r.dismissSecs,r.pageMessage="Product Deleted",r.pageMessageType="success"}).catch(function(e){r.showLoader=!1,r.$helpers.consoleData("error deleting product : "+e)}),s.is_reorder?r.fb.productsCollection.doc(s.parent_id).update({reorder_created:!1,date_updated:new Date}).then(function(){r.products.some(function(e){if(e.id==s.parent_id)return e.reorder_created=!1,!0}),r.showLoader=!1}).catch(function(e){r.consoleData("error updating reorder_created: "+e),r.showLoader=!1}):r.fb.productsCollection.doc(s.reorder_id).update({date_deleted:new Date,date_updated:new Date}).then(function(){r.products.some(function(e,t){if(e.id==s.reorder_id)return r.products.splice(t,1),!0}),r.products=r.orderBy(r.products,"min_quantity"),r.showLoader=!1}).catch(function(e){r.consoleData("error updating product in deleting parent product: "+e),r.showLoader=!1})}).catch(function(e){r.showLoader=!1,r.$helpers.consoleData("error getting product info : "+e)}))})},modalAction:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this;if("show"==e){var r=null;null==t.updateIndex&&(t.products.length>0&&(r=Math.max.apply(Math,t.products.map(function(e){return e.max_quantity}))),t.min_quantity=r?parseInt(r)+1:1),t.$bvModal.show("addUpdateCouponModal")}"hide"==e&&(t.$bvModal.hide("addUpdateCouponModal"),setTimeout(function(){t.resetObject(),t.updateId=null,t.updateIndex=null},200))},resetObject:function(){var e=this;e.set_base_price=!1,e.include_base_price=!1,e.title="",e.price="",e.min_quantity="",e.max_quantity="",e.standard_shipping="",e.express_shipping="",e.express_production="",e.is_reorder=!1,e.reorder_created=!1,e.reorder_id=""},addSearchQuery:function(e){var t=this;return t.searchPrice&&(e=e.where("price","==",t.searchPrice)),e},search:function(){var e=this;e.products=[],e.start_at=null,e.start_after=null,e.getProducts()},saveTitle:function(){var e=this;if(e.product_title){var t=e.fb.db.batch();e.showLoader=!0,kr.productsCollection.where("date_deleted","==",null).get().then(function(t){t.forEach(function(t){kr.productsCollection.doc(t.id).update({product_title:e.product_title})})}),t.commit().then(function(){e.products.forEach(function(t,r){t.product_title=e.product_title}),e.showLoader=!1,e.simpleAlert({type:"success",text:"Product title saved"}),e.product_title=e.product_title})}else e.showLoader=!1,e.products.length>0&&(e.product_title=e.products[0].product_title),e.simpleAlert({type:"error",text:"Title field can not be empty"})},createReorderObj:function(e){var t=this,r=JSON.stringify(t.products[e]);r=JSON.parse(r),r["parent_id"]=r.id,t.products[e].reorder_created=!0,delete r.id,delete r.reorder_id,r["title"]=r.title.toLowerCase()+" reorder",r["is_reorder"]=!0,r["reorder_created"]=!1,r["date_created"]=new Date,r["date_updated"]=new Date,t.showLoader=!0,t.fb.productsCollection.add(r).then(function(o){r["id"]=o.id,t.products.push(r),t.products=t.orderBy(t.products,"min_quantity"),t.fb.productsCollection.doc(t.products[e].id).update({reorder_created:!0,reorder_id:o.id,date_updated:new Date}).then(function(r){t.products[e].reorder_created=!0,t.showLoader=!1}).catch(function(r){t.showLoader=!1,t.products[e].reorder_created=!1,t.consoleData("error updating reorder_created column")})}).catch(function(r){t.showLoader=!1,t.products[e].reorder_created=!1,t.consoleData("error creating reorder object: "+r)})}}},Dr=Ar,Mr=Object(p["a"])(Dr,jr,Ir,!1,null,"df90aab6",null),Or=Mr.exports,Pr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("b-modal",{ref:"addUpdateCouponModal",attrs:{id:"addUpdateCouponModal",title:"Upload Finished Mozaix","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[e.serverErrors.length>0?r("div",[r("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showDismissibleAlert,callback:function(t){e.showDismissibleAlert=t},expression:"showDismissibleAlert"}},[r("ul",e._l(e.serverErrors,function(t){return r("li",[e._v(e._s(t))])}),0)])],1):e._e(),e.size_errors>0||e.type_errors>0?[r("b-alert",{attrs:{show:!0,dismissible:"",variant:"info"},on:{dismissed:e.hideDropzoneErrors}},[r("ul",[e.uploaded_files>0?r("li",[e._v("\n                        "+e._s("["+e.uploaded_files+"] ")+"\n                        "+e._s(1==e.uploaded_files?"file is uploaded.":"files are uploaded.")+"\n                    ")]):e._e(),e.size_errors>0?r("li",[e._v("\n                        "+e._s("The files with size less than 100 KB are not supported and the system did not upload ")+"\n                        "+e._s(1==e.size_errors?"this ":"these ")+"\n                        "+e._s("["+e.size_errors+"] ")+"\n                        "+e._s(1==e.size_errors?"File.":"Files.")+"\n                    ")]):e._e(),e.type_errors>0?r("li",[e._v("\n                        "+e._s("The supported file types are jpg and jpeg so ["+e.type_errors+"] unsupported ")+e._s(1==e.type_errors?"file type is not uploaded.":"file types are not uploaded.")+"\n                    ")]):e._e()])])]:e._e(),r("vue-dropzone",{ref:"customDropzone",attrs:{options:e.dropzoneOptions,useCustomSlot:!0,id:"photoUpload"},on:{"vdropzone-reset":e.cleanupDropzone,"vdropzone-mounted":e.vdropzoneMounted,"vdropzone-sending-multiple":e.vdropzoneSendingMultiple,"vdropzone-success-multiple":e.vdropzoneSuccessMultiple,"vdropzone-queue-complete":e.vdropzoneQueueComplete,"vdropzone-error-multiple":e.vdropzoneErrorMultiple,"vdropzone-files-added":e.vdropzoneFilesAdded}},[r("div",{staticClass:"dropzone-custom-content"},[r("p",[r("span",{staticClass:"subtitle dropzone-custom-title"},[e._v("Drag and drop to upload photos.")]),r("br"),e._v("\n                    …or click to select a file from your computer")]),r("br"),r("p",[e._v("Accepted file type: jpg, jpeg")]),r("br"),r("p",[r("strong",[e._v("Max "),r("big",[e._v("40")]),e._v(" photos at one time.")],1)])])]),r("div",{staticClass:"columns is-multiple text-center"},[r("div",{staticClass:"column is-12 btnsContainter"},[r("b-button",{ref:"closeBtn",staticClass:"customButtonMedium width_200 lightColor",on:{click:function(t){return e.modalAction("hide")}}},[e._v("Close")])],1)]),r("div",{staticClass:"uploadedThumbs"},[r("gallery",{attrs:{images:e.orderCollagesArray,index:e.galleryIndex},on:{close:function(t){e.galleryIndex=null}}}),e._l(e.orderCollagesThumbsArray,function(t,o){return r("div",{staticClass:"uploadedThumb"},[r("div",{staticClass:"overControls"},[r("span",{staticClass:"project_action view_project",on:{click:function(t){e.galleryIndex=o}}},[e._v(" ")]),r("span",{staticClass:"project_action delete_project",on:{click:function(t){return e.deleteImage(o)}}},[e._v(" ")])]),r("img",{attrs:{src:t,alt:""}})])})],2)],2),r("span",{staticClass:"go_back_admin",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$router.go(-1)}}},[r("i",{staticClass:"fal fa-angle-left"}),e._v(" Go Back\n    ")]),r("div",{staticClass:"flexElem panelHeader flexResponsive mt-3 mb-3"},[r("div",{staticClass:"panelHeading"},[e._v("\n            Project Order Listing\n        ")]),r("div",{staticClass:"flexElem flexResponsive"},[r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_email,expression:"search_email"}],staticClass:"inputControl searchIcon",attrs:{type:"text",placeholder:"Search With Customer Email"},domProps:{value:e.search_email},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("email")},input:function(t){t.target.composing||(e.search_email=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("email")}}})]),r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_id,expression:"search_id"}],staticClass:"inputControl searchIcon",attrs:{type:"text",placeholder:"Search With Order Number"},domProps:{value:e.search_id},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("id")},keypress:e.isInteger,input:function(t){t.target.composing||(e.search_id=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("id")}}})])])]),r("router-link",{attrs:{to:{name:"AdminViewProject",params:{projectId:e.projectId}},title:"View Project"}},[e.activeProject?r("span",{staticStyle:{"font-size":"20px",color:"#2f4575","margin-top":"3px"}},[e._v("\n            "+e._s(e._f("capitalize")(e.activeProject.title))+"\n        ")]):e._e()]),r("div",{staticClass:"panelContent"},[r("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll.x",value:e.draggable,expression:"draggable",modifiers:{x:!0}}],staticClass:"table-responsive"},[r("table",{staticClass:"themeTable noTextBreak"},[e._m(0),r("tbody",[e._l(e.orderBy(e.orders,"date_created",-1),function(t,o){return r("tr",[r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.first_name+" / "+t.order_no)+"\n                         ")])]),r("td",[r("popper",{staticClass:"linkColor",staticStyle:{cursor:"pointer"},attrs:{trigger:"click",options:{placement:"right"}},on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[r("div",{staticClass:"popper"},[r("p",[r("strong",[e._v("Name: ")]),e._v(e._s(t.first_name))]),r("p",[r("strong",[e._v("Email: ")]),e._v(e._s(t.order_email))]),r("p",[r("strong",[e._v("Phone No: ")]),e._v(e._s(t.phone_no?t.phone_no.replace("+1 ",""):t.phone_no))]),r("p",[r("strong",[e._v("Address: ")]),e._v(e._s(t.address))]),r("p",[r("strong",[e._v("State: ")]),e._v(e._s(t.region))]),r("p",[r("strong",[e._v("Zip Code: ")]),e._v(e._s(t.zip_code))])]),r("span",{staticClass:"right",attrs:{slot:"reference"},slot:"reference"},[e._v("\n                                 "+e._s(t.order_email)+"\n                            ")])])],1),r("td",[r("router-link",{attrs:{to:{name:"OrderDetail",params:{orderId:t.id}}}},[e._v("\n                            "+e._s(t.quantity)+"\n                        ")])],1),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.project_photos_count?t.project_photos_count:"0")+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("moment")(t.date_created.toDate(),"ddd, Do MMM  YYYY"))+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[t.express_production>0?r("b-alert",{attrs:{variant:"danger",show:""}},[e._v(" Express 1-2")]):r("b-alert",{attrs:{show:""}},[e._v(" Standard 4-5")])],1)]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("currency")(t.grand_total))+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("currency")(t.total_discount))+"\n                         ")])]),["Shipped"==e.getOrderStatus(o)?r("td",[r("span",{staticClass:"completed",on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v(e._s(t.status))])]):r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[r("b-form-select",{ref:"status-"+t.id,refInFor:!0,staticClass:"input customInput",staticStyle:{"min-width":"100px"},attrs:{name:"status",value:e.getOrderStatus(o),options:e.orderStatuses},on:{change:function(r){return e.changeStatus(r,o,t.id,t.status,t.project_id,t.user_uid)}}})],1)])],r("td",{staticClass:"order-status"},[r("router-link",{attrs:{to:{name:"AdminViewProject",params:{projectId:t.project_id}},title:"View Project"}},[e._v("\n                            "+e._s(t.project_id)+"\n                        ")])],1),r("td",[t.downloading?[r("CircleLoader",{attrs:{progress:t.progress}})]:e._e(),r("span",{staticClass:"action action_download",staticStyle:{cursor:"pointer"},attrs:{title:"Download images zip"},on:{click:function(r){return e.createZip(t.id,t.project_id,o,!1)}}}),t.collage_uploaded?r("span",{staticClass:"action action_download",staticStyle:{cursor:"pointer"},attrs:{title:"Download Mozaix"},on:{click:function(r){return e.createZip(t.id,t.project_id,o,!0)}}}):e._e(),r("router-link",{staticClass:"action action_view",attrs:{to:{name:"AdminViewProject",params:{projectId:t.project_id}},title:"View Project"}}),r("span",{staticClass:"action action_forward",staticStyle:{cursor:"pointer"},attrs:{title:"Upload Mozaix"},on:{click:function(r){return e.uploadCollage(t.id,t.project_id,o)}}})],2)],2)}),0==e.showLoader&&e.orders.length<=0?r("tr",[r("td",{attrs:{colspan:"5"}},[e._v("No orders exists")])]):e._e()],2)])])])],1)},Er=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Customer Name / Order #")]),r("th",[e._v("Customer Email")]),r("th",[e._v("Number Of Mozaix")]),r("th",[e._v("Number Of Images")]),r("th",[e._v("Ordered Date")]),r("th",[e._v("Type Of Production")]),r("th",[e._v("Order Amount")]),r("th",{staticClass:"text-center"},[e._v("Discount")]),r("th",[e._v("Status")]),r("th",[e._v("Project ID")]),r("th",[e._v("Actions")])])])}],Sr=r("21a6"),Nr=r("7c39"),Lr=r("0083"),zr={name:"AdminProjectOrderListing",mixins:[cr.a.mixin],props:["projectId"],components:{"vue-date":x["a"],vueDropzone:te.a,gallery:oe.a,CircleLoader:Mt,popper:dr.a},data:function(){return{orders:[],errorMsg:"",per_page:20,search_id:"",search_email:"",start_at:null,start_after:null,dropzoneOptions:{url:"https://api.photomozaix.com/api/upload/order/collage",addRemoveLinks:!1,method:"post",autoQueue:!0,autoProcessQueue:!0,uploadMultiple:!0,parallelUploads:"500",timeout:"3600000",maxFiles:40},activeOrderId:"",activeProjectId:"",serverErrors:[],active_dropzone:"",activeOrderIndex:"",orderCollagesArray:[],orderCollagesThumbsArray:[],orderCollages:[],galleryIndex:null,activeProject:null,s3_base_url:"https://s3.amazonaws.com/photomozaix-production/",size_errors:0,type_errors:0,uploaded_files:0,orderStatuses:[{value:"Ordered",text:"Ordered"},{value:"Printed",text:"Printed"},{value:"Shipped",text:"Shipped"}]}},created:function(){var e=this;e.fb.projectsCollection.doc(e.projectId).get().then(function(t){t.exists&&(e.activeProject=t.data(),e.activeProject["id"]=e.projectId)}),window.addEventListener("scroll",e.scrollListener),e.getOrders()},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getOrders()},getOrders:function(){var e=this,t=e.fb.ordersCollection.where("project_id","==",e.projectId).where("date_deleted","==",null);t=e.addSearchQuery(t),t=t.orderBy("date_created","desc"),e.start_after&&(t=t.startAfter(e.start_after)),e.showLoader=!0,t.limit(e.per_page).get().then(function(t){var r=t.docs.length;r>0?(window.addEventListener("scroll",e.scrollListener),e.start_at=t.docs[0],e.start_after=t.docs[r-1]):window.removeEventListener("scroll",e.scrollListener),t.forEach(function(t){var r=t.data();r["id"]=t.id,r["downloading"]=!1,r["downloaded"]=0,r["progress"]=0,r["message"]="Downloading...",e.orders.push(r)}),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.$helpers.consoleData("Error getting orders: "+t)})},addSearchQuery:function(e){var t=this;return t.search_id&&(e=e.where("order_no","==",parseInt(t.search_id))),t.search_email&&(e=e.where("email_terms","array-contains",t.search_email.toLowerCase())),e},search:function(e){var t=this;"id"==e&&(t.search_email=""),"email"==e&&(t.search_id=""),t.orders=[],t.start_at=null,t.start_after=null,t.getOrders()},uploadCollage:function(e,t,r){var o=this;o.activeOrderId=e,o.activeProjectId=t,o.activeOrderIndex=r,o.getCollageImages(e),o.modalAction("show")},modalAction:function(e){var t=this;"show"==e&&t.$bvModal.show("addUpdateCouponModal"),"hide"==e&&(t.activeOrderId="",t.activeProjectId="",t.activeOrderIndex="",t.size_errors=0,t.type_errors=0,t.uploaded_files=0,t.serverErrors=[],t.$refs["closeBtn"].disabled=!1,t.$bvModal.hide("addUpdateCouponModal"))},vdropzoneMounted:function(){var e=this;e.active_dropzone=e.$refs.customDropzone},vdropzoneSendingMultiple:function(e,t,r){var o=this;o.showLoader=!0,o.hideDropzoneErrors();var s=o.activeOrderId;r.append("orderId",s),o.$refs.closeBtn&&(o.$refs.closeBtn.disabled=!0)},vdropzoneSuccessMultiple:function(e,t){var r=this;if(0==t.success)r.serverErrors=t.errors,r.showDismissibleAlert=!0,r.active_dropzone.removeAllFiles(),r.$refs.closeBtn&&(r.$refs.closeBtn.disabled=!1);else{var o=t.data.uploaded_images,s=r.fb.db.batch(),a=r.fb.ordersCollection.doc(r.activeOrderId).collection("collages");o.forEach(function(e,t){s.set(a.doc(),r.$helpers.addTimestamps(e,!0)),r.orderCollagesArray.unshift(e.url),r.orderCollagesThumbsArray.unshift(r.s3_base_url+"order_collages/"+r.activeOrderId+"/thumb_"+e.name)}),o.length>0&&r.fb.ordersCollection.doc(r.activeOrderId).update({date_updated:new Date,collage_uploaded:!0}).then(function(){r.orders[r.activeOrderIndex].collage_uploaded=!0,r.consoleData("collage status updated in order")}).catch(function(e){r.consoleData("Error updating collage status in order: "+e)}),s.commit().then(function(){r.consoleData("batch completed"),r.size_errors=t.data.size_errors,r.type_errors=t.data.type_errors,r.uploaded_files=t.data.uploaded_images.length,r.active_dropzone.removeAllFiles(),r.$refs.closeBtn&&(r.$refs.closeBtn.disabled=!1),r.simpleAlert({type:"success",text:"Collage uploaded successfully"})})}},vdropzoneQueueComplete:function(){var e=this;e.showLoader=!1},vdropzoneErrorMultiple:function(e,t,r){var o=this;o.showLoader=!1,o.$refs["cancelBtn"].disabled=!1,alert("error multiple")},cleanupDropzone:function(){this.consoleData("Cleaning up...")},getCollageImages:function(e){var t=this;t.orderCollagesArray=[],t.orderCollagesThumbsArray=[],t.orderCollages=[];var r=t.fb.ordersCollection.doc(e).collection("collages").where("date_deleted","==",null);r.get().then(function(r){r.forEach(function(r){var o=r.data();o["id"]=r.id,t.orderCollagesArray.push(o.url),t.orderCollagesThumbsArray.push(t.s3_base_url+"order_collages/"+e+"/thumb_"+o.name),t.orderCollages.push(o)})})},deleteImage:function(e){var t=this;this.$swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#c31d8a",cancelButtonColor:"#b9acd2",confirmButtonText:"Yes, delete it!"}).then(function(r){if(r.value){t.showLoader=!0;var o=t.orderCollages[e].id;t.fb.ordersCollection.doc(t.activeOrderId).collection("collages").doc(o).update({date_deleted:new Date,date_updated:new Date}).then(function(){t.consoleData("collage deleted"),t.orderCollages.splice(e,1),t.orderCollagesArray.splice(e,1),t.orderCollagesThumbsArray.splice(e,1),t.showLoader=!1}).catch(function(e){t.showLoader=!1,t.consoleData("error deleting collage "+e)})}})},vdropzoneFilesAdded:function(e){},createZip:function(e,t,r,o){var s=this;if(t){var a=[];o?s.fb.ordersCollection.doc(e).collection("collages").where("date_deleted","==",null).get().then(function(o){o.forEach(function(e){var t=e.data().name;a.push({path:e.data().url,name:t})}),a.length>0?(s.orders[r].downloading=!0,$("body").addClass("loaderOpen"),s.downloadZip(a,t+".zip",a.length,r)):(s.fb.ordersCollection.doc(e).update({collage_uploaded:!1}).then(function(){s.orders[r].collage_uploaded=!1,s.consoleData("collage status updated in order")}).catch(function(e){s.consoleData("Error updating collage status in order: "+e)}),s.simpleAlert({type:"info",text:"No files to download"}))}):s.fb.projectsCollection.doc(t).collection("photos").where("date_deleted","==",null).get().then(function(e){e.forEach(function(e){a.push({path:e.data().url,name:e.data().name})}),a.length>0?(s.orders[r].downloading=!0,$("body").addClass("loaderOpen"),s.downloadZip(a,t+".zip",a.length,r)):s.simpleAlert({type:"info",text:"No files to download"})})}},downloadZip:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default.zip",r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=this,a=new Nr;e.forEach(function(e,t){a.file(e.name,s.urlToPromise(e.path,r,o),{base64:!0,binary:!0})}),a.generateAsync({type:"blob"}).then(function(e){s.orders[o].message="Creating Zip...",s.orders[o].downloading=!1,s.orders[o].downloaded=0,s.orders[o].progress=0,$("body").removeClass("loaderOpen"),Sr.saveAs(e,t)})},urlToPromise:function(e,t,r){var o=this;return new Promise(function(s,a){Lr.getBinaryContent(e,function(e,n){if(e)a(e);else{var i=JSON.stringify(o.orders[r].downloaded);i=JSON.parse(i),i=parseInt(i)+1;var c=parseInt(i)/parseInt(t);c=parseFloat(c)*parseFloat("100"),o.orders[r].downloaded=i,o.orders[r].progress=parseInt(c);o.orders[r].id;s(n)}})})},hideDropzoneErrors:function(){var e=this;e.type_errors=0,e.size_errors=0,e.uploaded_files=0},changeStatus:function(e,t,r,o,s,a){var n=this,i={status:e,date_updated:new Date};"Shipped"==e?n.$swal({title:"Add Tracking Number",type:"info",input:"text",showCancelButton:!0,cancelButtonColor:"#b9acd2",inputValidator:function(e){if(!e)return"You need to write something!"}}).then(function(e){e.value?(n.showLoader=!0,i["tracking_number"]=e.value,n.fb.ordersCollection.doc(r).update(i).then(function(){n.consoleData("order status updated"),n.search();var e=n.fb.firestore.FieldValue.increment(1);n.fb.projectsCollection.doc(s).update({completed_orders:e}).then(function(){n.consoleData("completed order incremented"),n.fb.usersCollection.doc(a).update({completed_orders:e}).then(function(){n.consoleData("completed order incremented in users collection"),n.showLoader=!1}).catch(function(e){n.showLoader=!1,n.consoleData("error incrementing completed orders in users collection")})}).catch(function(e){n.showLoader=!1,n.consoleData("error incrementing completed orders")})}).catch(function(e){n.showLoader=!1,n.consoleData("error updating order status")})):n.$refs["status-"+r][0].$el.value=o}):(n.showLoader=!0,n.fb.ordersCollection.doc(r).update(i).then(function(){n.showLoader=!1,n.orders[t].status=e,n.consoleData("order status updated1")}).catch(function(e){n.showLoader=!1,n.consoleData("error updating order status")}))},getOrderStatus:function(e){var t=this;return t.orders[e].status}}},$r=zr,Ur=Object(p["a"])($r,Pr,Er,!1,null,null,null),Fr=Ur.exports,Tr=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"adminProject"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[o("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),o("div",{staticClass:"col-md-12 text-center"},[o("div",[0==e.showLoader&&"new"==e.opened_project.status?o("router-link",{staticClass:"back",attrs:{to:{name:"ProjectEdit",params:{projectId:e.projectId}}}},[o("i",{staticClass:"fal fa-angle-left"}),e._v("\n                Go Back\n            ")]):e._e()],1),o("h2",{staticClass:"panelHeading mb-1"},[e._v("\n            Your Project\n        ")])]),o("div",{staticClass:"projectViewContainer flexResponsive mt-5"},[o("div",{staticClass:"project-side"},[o("div",{staticClass:"columns"},[e.shareCode&&!e.emptyOrNull(e.projectSharedInfo)||e.opened_project.main_thumb_url?o("div",{staticClass:"column"},[o("span",{staticClass:"placeOrder mb-10",staticStyle:{cursor:"pointer"},on:{click:e.placeOrder}},[e.reorder_project?[e._v("Place Reorder")]:[e._v("Place Order")]],2)]):e._e()]),o("div",{staticClass:"sideProjectInfo pl-2 pr-2"},[o("div",{staticClass:"mb-3"},[e._m(0),o("p",{staticClass:"text-muted"},[e._v(e._s(e.opened_project.title))])]),o("p",{staticClass:"mb-3 flexElem",staticStyle:{"justify-content":"space-between"}},[o("strong",[e._v("Total images: ")]),o("span",{staticClass:"linkColor"},[e._v(e._s(e.opened_project.photos?e.opened_project.photos.length:"0"))])])]),o("div",{staticClass:"project-controls"},[o("div",{ref:"projectMainImg",staticClass:"main-img-block text-center"},[e._m(1),e.opened_project.main_thumb_url?o("img",{attrs:{src:e.s3_base_url+e.opened_project.id+"/thumb_"+e.opened_project.main_image_name}}):o("img",{attrs:{src:r("35d4")}})]),o("hr",{staticClass:"light"}),e.collage_uploaded?o("div",{staticClass:"main-img-block text-center mt-3"},[o("div",{staticClass:"mosaic_img hover_dark"},[o("img",{attrs:{src:e.mozaix_thumb}})]),o("div",{staticClass:"mt-3 project_action view_project",attrs:{title:"view mozaix"},on:{click:e.showMozaixGallery}})]):e._e()]),e.emptyOrNull(e.currentUser)||0!=e.showLoader||"Ordered"!=e.opened_project.status?e._e():o("div",{staticClass:"mt-3"},[o("span",{staticClass:"placeOrder mb-10 mt-5",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.modalAction("show",e.opened_project.id)}}},[e._v("\n                    Share\n                ")]),o("div",[e._v("\n                    Share with friends and family so they can order the beautiful Mozaix you created.\n                ")])])]),o("div",{staticClass:"project-main"},[e.opened_project.photos&&e.opened_project.photos.length>0&&!e.showLoader?[o("gallery",{attrs:{images:e.galleryImages,index:e.galleryIndex},on:{close:e.closeGallery}}),o("div",{staticClass:"photo-grid"},e._l(e.opened_project.photos,function(t,r){return o("figure",{key:r,class:[t.is_main_img?"main-img photo":"main-img-disabled photo"]},[o("span",[t.url?o("img",{attrs:{src:e.s3_base_url+e.opened_project.id+"/thumb_"+t.name,alt:t.original_name,id:t.id}}):e._e()]),o("figcaption",{staticClass:"mt-2 mb-2"},[o("p",{staticClass:"img-controls setMainImg"},["new"==e.opened_project.status?o("span",{staticClass:"project_action delete_project",on:{click:function(o){return e.requestDelete(r,t.id,t.is_main_img)}}},[e._v("\n                                     \n                                ")]):e._e(),o("span",{staticClass:"project_action view_project",on:{click:function(t){e.galleryIndex=r}}},[e._v("\n                                     \n                                ")])])])])}),0)]:e._e(),0==e.showLoader&&e.opened_project.photos&&e.opened_project.photos.length<=0?[o("p",{staticClass:"text-center alert alert-warning mt-5",staticStyle:{margin:"0 50px"}},[e._v(" No image found")])]:e._e(),o("div",{staticClass:"text-center placeOrderContainer"},[e.shareCode&&!e.emptyOrNull(e.projectSharedInfo)||e.opened_project.main_thumb_url?[o("span",{staticClass:"placeOrder mb-10",staticStyle:{cursor:"pointer"},on:{click:e.placeOrder}},[e.reorder_project?[e._v("Place Reorder")]:[e._v("Place Order")]],2)]:e._e()],2)],2)]),o("b-modal",{ref:"addUpdateCouponModal",attrs:{id:"addUpdateCouponModal",title:"Share Project","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":""},on:{close:function(t){return e.modalAction("hide")}}},[o("div",{staticClass:"columns is-multiple mt-2"},[o("div",{staticClass:"column is-12 pb-0"},[o("b-form-group",{attrs:{label:"Email","label-for":"title","invalid-feedback":"Email is required"}},[o("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"input customInput",class:[e.errors.first("email")?"field_error":""],attrs:{name:"email",id:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.errors.first("email")?o("b-popover",{attrs:{target:"email",triggers:"hover focus",placement:"leftbottom",content:e.errors.first("email")}}):e._e()],1)],1)]),o("div",{staticClass:"columns is-multiple text-center"},[o("div",{staticClass:"column is-12 btnsContainter"},[o("b-button",{ref:"shareBtn",staticClass:"customButtonMedium width_200 mediumColor",attrs:{type:"button",variant:"success"},on:{click:function(t){return e.shareProject(t)}}},[e._v("Share")])],1)])])],1)},Br=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[r("strong",[e._v("Project Title")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mb-2 pl-2 pr-2"},[r("strong",[e._v("Main Image ")])])}],Rr=r("ee2e"),Yr={name:"ViewProject",props:["projectId","shareCode"],components:{gallery:oe.a},watch:{opened_project:function(e,t){var r=this;r.emptyOrNull(e)||e.photos.forEach(function(e,t){var o=r.s3_base_url+r.projectId+"/preview_"+e.name;r.photos.push(o),r.galleryImages.push(o)})}},data:function(){return Object(Q["a"])({opened_project:{},order_route_params_obj:{},currentUser:{},projectSharedInfo:{},galleryIndex:null,photos:[],s3_base_url:"https://s3.amazonaws.com/photomozaix-production/",reorder_project:!1,email:"",collage_uploaded:!1,mozaix:[],mozaix_thumb:null,galleryImages:[]},"s3_base_url","https://s3.amazonaws.com/photomozaix-production/")},mounted:function(){var e=this;e.currentUser=e.$helpers.getCurrentUser(),e.emptyOrNull(e.currentUser)||e.checkReorderingProject(),e.order_route_params_obj["projectId"]=e.projectId,e.shareCode?(e.order_route_params_obj["shareCode"]=e.shareCode,Rr.projectSharedCollection.where("share_code","==",e.shareCode).where("date_deleted","==",null).get().then(function(t){if(!(t.docs.length>0))return e.simpleAlert({type:"error",text:"The Link has been expired or does not exist."}),e.projectSharedInfo={},!1;var r=t.docs[0].data();r["id"]=t.docs[0].id,e.projectSharedInfo=r,e.getProjectWithPhotos()}).catch(function(t){e.consoleData("error getting shared code information: "+t)})):e.getProjectWithPhotos()},created:function(){},methods:{getProjectWithPhotos:function(){var e=this;e.opened_project={},e.showLoader=!0;var t=Rr.projectsCollection.doc(e.projectId),r={};t.get().then(function(o){r=o.data(),r["id"]=o.id,r["photos"]=[],t.collection("photos").where("date_deleted","==",null).orderBy("date_created","desc").get().then(function(t){var o=0;t.forEach(function(e,t){r["photos"][o]=e.data(),r["photos"][o]["id"]=e.id,o++}),e.opened_project=r,e.getProjectMozaix(),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.consoleData("error getting photos: "+t)})}).catch(function(t){e.showLoader=!1,e.consoleData("error getting project "+t)})},requestDelete:function(e,t,r){var o=this,s=this;this.$swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#c31d8a",cancelButtonColor:"#b9acd2",confirmButtonText:"Yes, delete it!"}).then(function(a){if(a.value){s.showLoader=!0;o.$data.photos;var n=Rr.db.batch(),i=Rr.projectsCollection.doc(s.opened_project.id);i.collection("photos").doc(t).update({date_updated:new Date,date_deleted:new Date}).then(function(){}).catch(function(e){s.showLoader=!1,s.consoleData("error deleting photo: "+e)}),i.get().then(function(e){var t={date_updated:new Date,total_photos:parseInt(e.data().total_photos)-1};r&&(t["main_image_id"]=null,t["main_thumb_url"]=null),i.update(t).then(function(){s.opened_project.total_photos=parseInt(s.opened_project.total_photos)-1})}).catch(function(e){s.showLoader=!1,s.consoleData("error updating project: "+e)}),n.commit().then(function(){s.opened_project.photos&&s.opened_project.photos.length>0&&(s.opened_project.photos.splice(e,1),r&&(s.opened_project.main_image_id=null,s.opened_project.main_thumb_url=null)),s.showLoader=!1})}})},placeOrder:function(){var e=this;e.opened_project.photos&&e.opened_project.photos.length>=50?e.opened_project.main_thumb_url?e.$router.push({name:"ProjectOrderPage",params:e.order_route_params_obj}):e.simpleAlert({type:"warning",text:"You must select a main image before proceeding to checkout."}):this.$swal({type:"warning",text:"Your project must have at least 50 images before proceeding to checkout.",allowOutsideClick:!1,showCancelButton:!1,confirmButtonText:"OK"}).then(function(t){t.value&&e.$router.push({name:"ProjectEdit",params:{projectId:e.projectId}})})},checkReorderingProject:function(){var e=this;e.fb.usersCollection.doc(e.currentUser.uid).get().then(function(t){var r=t.data();r["uid"]=t.id,e.reorder_project=r.ordered_projects.some(function(t){return t==e.projectId})})},shareProject:function(){var e=this;e.$validator.validateAll().then(function(t){if(!t)return e.$helpers.consoleData("form Validation Fails while adding coupon"),!1;var r="https://api.photomozaix.com/api/project/"+e.shareProjectId+"/share",o={email:e.email,base_url:"https://store.photomozaix.com/",shared_by:e.currentUser.email};e.emptyOrNull(e.currentUser)||(o["first_name"]=e.currentUser.first_name,o["last_name"]=e.currentUser.last_name),e.showLoader=!0,e.$http.post(r,o).then(function(t){var r=t.body;if(r.success){var o=r.data.share_code,s=r.data.project_id,a=r.data.share_with,n={project_id:s,share_code:o,share_with:a,shared_by:e.currentUser.email,shared_by_id:e.currentUser.uid,used:!1};n=e.$helpers.addTimestamps(n),e.fb.projectSharedCollection.add(n).then(function(t){e.showLoader=!1,e.simpleAlert({type:"success",text:"Your project has been shared with "+a}),e.showLoader=!1,e.modalAction("hide",null,event)}).catch(function(t){e.showLoader=!1,e.consoleData("error sharing project: "+t)})}else e.showLoader=!1,e.simpleAlert({type:"error",text:r.errors[0]})},function(t){e.consoleData("error vue resource"),e.showLoader=!1,e.simpleAlert({type:"error",text:"Something went wrong. Please try again"})})})},modalAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this;t&&(o.shareProjectId=t),"show"==e&&o.$bvModal.show("addUpdateCouponModal"),"hide"==e&&(r&&(r.target.disabled=!1),o.email="",o.shareProjectId=null,o.$bvModal.hide("addUpdateCouponModal"))},getProjectMozaix:function(){var e=this;e.fb.ordersCollection.where("project_id","==",e.projectId).where("collage_uploaded","==",!0).where("date_deleted","==",null).get().then(function(t){var r=t.docs.length;if(r>0){var o=t.docs[0].data();o["id"]=t.docs[0].id,e.fb.ordersCollection.doc(o.id).collection("collages").where("date_deleted","==",null).orderBy("date_created","desc").get().then(function(t){var r=0;t.forEach(function(t){var s=t.data();s["id"]=t.id,e.collage_uploaded=!0;var a=e.s3_base_url+"order_collages/"+o.id+"/customer_"+s.name;e.mozaix.push(a),0==r&&(e.mozaix_thumb=e.s3_base_url+"order_collages/"+o.id+"/thumb_"+s.name),r=parseInt(r)+1})})}})},showMozaixGallery:function(){var e=this,t=JSON.stringify(e.mozaix);e.galleryImages=JSON.parse(t),e.galleryIndex=0},closeGallery:function(){var e=this;e.galleryIndex=null;var t=JSON.stringify(e.photos);e.galleryImages=JSON.parse(t)}}},qr=Yr,Vr=Object(p["a"])(qr,Tr,Br,!1,null,null,null),Qr=Vr.exports,Gr=(r("0628"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"orders"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),!e.showLoader&&e.myOrders.length>0?[r("b-alert",{attrs:{show:e.isFlashMessage("MyOrders"),dismissible:"",variant:e.$store.state.flashMessage.type},on:{dismissed:e.dismissAlert}},[e._v("\n          "+e._s(e.$store.state.flashMessage.message)+"\n      ")]),r("h1",[e._v("Your Orders")]),r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"themeTable cart"},[e._m(0),r("tbody",e._l(e.myOrders,function(t,o){return r("tr",[r("td",{staticClass:"order-number"},[e._v(e._s(t.order_no))]),r("td",{staticClass:"order-number"},[e._v(e._s(e._f("currency")(t.grand_total)))]),r("td",{staticClass:"order-number"},[e._v(e._s(e._f("currency")(t.total_discount)))]),r("td",{staticClass:"date-ordered"},[e._v(e._s(e._f("moment")(t.date_created.toDate(),"ddd, Do MMM  YYYY")))]),r("td",{staticClass:"order-status"},[r("span",{class:["Ordered"==t.status?"ordered":"completed"]},[e._v(e._s(t.status))])])])}),0)])])]:e._e(),!e.showLoader&&e.myOrders.length<=0?[r("div",{staticClass:"start-new-project"},[r("p",[e._v("You haven't ordered anything yet. Let's make something memorable! "),r("router-link",{staticClass:"button",attrs:{to:"/dashboard"}},[e._v("Start New Project")])],1)])]:e._e()],2)}),Zr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Order #")]),r("th",[e._v("Order Amount")]),r("th",[e._v("Discount")]),r("th",[e._v("Ordered Date")]),r("th",[e._v("Status")])])])}],Wr=(r("ee2e"),r("7230"),{name:"MyOrders",data:function(){return{currentUser:{},myOrders:[],start_at:null,start_after:null,per_page:50}},created:function(){var e=this;if(e.currentUser=e.$helpers.getCurrentUser(),e.$helpers.emptyOrNull(e.currentUser)){var t=e.$helpers.setMessage("danger","Your session has been expired. Please login again.","Login");e.$store.commit("setFlashMessage",t),e.logOutUser()}window.addEventListener("scroll",e.scrollListener),e.getOrders()},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getOrders()},getOrders:function(){var e=this;e.showLoader=!0;var t=e.fb.ordersCollection.where("date_deleted","==",null).where("user_uid","==",e.currentUser.uid).orderBy("date_created","desc");e.start_after&&(t=t.startAfter(e.start_after)),t.limit(e.per_page).get().then(function(t){var r=t.docs.length;r>0?(window.addEventListener("scroll",e.scrollListener),e.start_at=t.docs[0],e.start_after=t.docs[r-1]):window.removeEventListener("scroll",e.scrollListener),t.forEach(function(t){var r=t.data();r["id"]=t.id,e.myOrders.push(r)}),e.showLoader=!1}).catch(function(t){e.consoleData("error getting orders : "+t),e.showLoader=!1})}}}),Hr=Wr,Jr=Object(p["a"])(Hr,Gr,Zr,!1,null,null,null),Xr=Jr.exports,Kr=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dashboard"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[o("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),o("b-alert",{attrs:{show:e.isFlashMessage("Dashboard"),dismissible:"",variant:e.$store.state.flashMessage.type},on:{dismissed:e.dismissAlert}},[e._v("\n        "+e._s(e.$store.state.flashMessage.message)+"\n    ")]),o("h1",[e._v("Shared Projects")]),o("div",{staticClass:"start-new-project"},[o("p",[e._v("Ready to make something memorable?\n            "),o("button",{staticClass:"button",on:{click:e.createNewProject}},[e._v("Start New Project")])])]),e.projects.length>0?o("div",{staticClass:"project-grid"},e._l(e.projects,function(t,s){return o("div",{key:s,staticClass:"project",attrs:{id:t.id}},[o("router-link",{staticClass:"thumb_project",attrs:{to:{name:"Ordered"==t.status?"ProjectView":"ProjectEdit",params:{projectId:t.id}}}},[t.main_thumb_url?o("img",{attrs:{src:e.s3_base_url+t.id+"/thumb_"+t.main_image_name}}):o("img",{attrs:{src:r("35d4")}})]),o("p",{staticClass:"project-title"},[o("router-link",{attrs:{to:{name:"Ordered"==t.status?"ProjectView":"ProjectEdit",params:{projectId:t.id}}}},[e._v(e._s(e._f("capitalize")(t.title))+"\n                    ")]),o("br"),o("span",{staticClass:"text-muted"},[e._v("\n                        No. of Images: "),o("span",{staticClass:"no_count"},[e._v(e._s(t.total_photos))])])],1),o("div",{staticClass:"project-buttons"},[o("router-link",{staticClass:"project_action view_project",attrs:{to:{name:"ProjectView",params:{projectId:t.id}}}},[e._v("\n                         \n                    ")]),o("span",{staticClass:"project_action share_project",on:{click:function(r){return e.modalAction("show",t.id)}}},[e._v("\n                             \n                    ")])],1)],1)}),0):e._e(),0==e.showLoader&&e.projects.length<=0?o("div",[e._v("\n            No project exists\n        ")]):e._e(),o("b-modal",{ref:"addUpdateCouponModal",attrs:{id:"addUpdateCouponModal",title:"Share Project","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":""},on:{close:function(t){return e.modalAction("hide")}}},[o("div",{staticClass:"columns is-multiple mt-2"},[o("div",{staticClass:"column is-12 pb-0"},[o("b-form-group",{attrs:{label:"Email","label-for":"title","invalid-feedback":"Email is required"}},[o("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"input customInput",class:[e.errors.first("email")?"field_error":""],attrs:{name:"email",id:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.errors.first("email")?o("b-popover",{attrs:{target:"email",triggers:"hover",placement:"leftbottom",content:e.errors.first("email")}}):e._e()],1)],1)]),o("div",{staticClass:"columns is-multiple text-center"},[o("div",{staticClass:"column is-12 btnsContainter"},[o("b-button",{ref:"shareBtn",staticClass:"customButtonMedium width_200 mediumColor",attrs:{type:"button",variant:"success"},on:{click:function(t){return e.shareProject(t)}}},[e._v("Share")])],1)])])],1)},eo=[],to=(r("7514"),{name:"SharedWithMe",data:function(){return{loading:{type:Boolean},projects:[],hasOrder:{type:Boolean},currentUser:{},email:"",shareProjectId:null,s3_base_url:"https://s3.amazonaws.com/photomozaix-production/",start_at:null,start_after:null,per_page:20}},created:function(){var e=this;e.removeFlashMessage(e.$options.name),e.currentUser=e.$helpers.getCurrentUser(),e.$helpers.emptyOrNull(e.currentUser)&&e.$helpers.logOutUser(),window.addEventListener("scroll",e.scrollListener),e.getSharedProjects(),e.loading=!1},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getSharedProjects()},createNewProject:function(){var e=this,t=this,r=t.currentUser.uid,o="Untitled Project";o=o.toLowerCase();var s=t.getStringTerms(o),a=t.currentUser.email;a=a.toLowerCase();var n=t.getStringTerms(a),i=null,c=null;t.currentUser.first_name&&(i=t.currentUser.first_name+" "+t.currentUser.last_name,i=i.toLowerCase(),c=t.getStringTerms(i));var l={title:o,title_terms:s,user:r,user_email:a,email_terms:n,user_name:i,name_terms:c||[],total_photos:0,total_orders:0,completed_orders:0,main_thumb_url:null,main_image_id:null,main_image_name:null,status:"new"};l=t.$helpers.addTimestamps(l),t.fb.projectsCollection.add(l).then(function(t){var r=t.id;e.$router.push({name:"ProjectEdit",params:{projectId:r}})}).catch(function(r){t.consoleData(r),e.errorMsg=r.message})},getSharedProjects:function(){var e=this;this.currentUser.uid;e.showLoader=!0;var t=e.fb.projectSharedCollection.where("share_with","==",e.currentUser.email).where("date_deleted","==",null);e.start_after&&(t=t.startAfter(e.start_after)),t.limit(e.per_page).get().then(function(t){var r=t.docs.length;r>0?(window.addEventListener("scroll",e.scrollListener),e.start_at=t.docs[0],e.start_after=t.docs[r-1]):window.removeEventListener("scroll",e.scrollListener),t.forEach(function(t){t.exists&&e.fb.projectsCollection.doc(t.data().project_id).get().then(function(t){var r=t.data();r["id"]=t.id;var o=e.projects.find(function(e){return e.project_id==t.id});void 0===o&&e.projects.push(r)}).catch(function(t){e.consoleData("error getting project for shared: "+t)})}),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.consoleData("Error getting projects: "+t)})},modalAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this;t&&(o.shareProjectId=t),"show"==e&&o.$bvModal.show("addUpdateCouponModal"),"hide"==e&&(r&&(r.target.disabled=!1),o.email="",o.shareProjectId=null,o.$bvModal.hide("addUpdateCouponModal"))},shareProject:function(){var e=this;e.$validator.validateAll().then(function(t){if(!t)return e.$helpers.consoleData("form Validation Fails while adding coupon"),!1;var r="https://api.photomozaix.com/api/project/"+e.shareProjectId+"/share",o={email:e.email,base_url:"https://store.photomozaix.com/",shared_by:e.currentUser.email};e.emptyOrNull(e.currentUser)||(o["first_name"]=e.currentUser.first_name,o["last_name"]=e.currentUser.last_name),e.showLoader=!0,e.$http.post(r,o).then(function(t){var r=t.body;if(r.success){var o=r.data.share_code,s=r.data.project_id,a=r.data.share_with,n={project_id:s,share_code:o,share_with:a,shared_by:e.currentUser.email,shared_by_id:e.currentUser.uid,used:!1};n=e.$helpers.addTimestamps(n),e.fb.projectSharedCollection.add(n).then(function(t){e.showLoader=!1,e.simpleAlert({type:"success",text:"Your project has been shared with "+a}),e.showLoader=!1,e.modalAction("hide",null,event)}).catch(function(t){e.showLoader=!1,e.consoleData("error sharing project: "+t)})}else e.showLoader=!1,e.simpleAlert({type:"error",text:r.errors[0]})},function(t){e.consoleData("error vue resource"),e.showLoader=!1,e.simpleAlert({type:"error",text:"Something went wrong. Please try again"})})})}}}),ro=to,oo=Object(p["a"])(ro,Kr,eo,!1,null,null,null),so=oo.exports,ao=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.order?o("b-modal",{ref:"shippedSlipModal",attrs:{id:"shippedSlipModal",title:"Shipped Detail","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":""},on:{close:function(t){return e.modalAction("hide")}}},[o("table",{staticClass:"printTable",attrs:{width:"100%"}},[o("tr",{staticClass:"logoHere",staticStyle:{background:"#442e72"}},[o("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[o("img",{staticClass:"printLogoHere",attrs:{src:r("63a9"),alt:"Logo here"}})])]),o("tr",[o("td",[e._v("Order #")]),o("td",[e._v(e._s(e.order.order_no))])]),o("tr",[o("td",[e._v("Number Of Mozaix")]),o("td",[e._v(e._s(e.order.quantity))])]),o("tr",[o("td",[e._v("Production Method")]),o("td",{staticClass:"order-status"},[o("span",{class:e.order.express_production>0?"ordered":""},[e._v("\n                        "+e._s(e._f("uppercase")(e.order.express_production>0?"Express":"Standard"))+"\n                    ")])])]),o("tr",[o("td",[e._v("Shipping Method")]),o("td",{staticClass:"order-status"},[o("span",{class:"self_pick"==e.order.shipping_method?"store":"express"==e.order.shipping_method?"ordered":""},[e._v("\n                        "+e._s(e._f("uppercase")("self_pick"==e.order.shipping_method?"STORE PICK UP (DO NOT MAIL)":e.order.shipping_method))+"\n                    ")])])]),o("tr",[o("td",[e._v("Shipping Name")]),o("td",[e._v(e._s(e.order.first_name+" "+e.order.last_name))])]),o("tr",[o("td",[e._v("Shipping Address")]),o("td",[e._v(e._s(e.order.address))])]),o("tr",[o("td",[e._v("City")]),o("td",[e._v(e._s(e.order.city))])]),o("tr",[o("td",[e._v("State")]),o("td",[e._v(e._s(e.order.region))])]),o("tr",[o("td",[e._v("Zip Code")]),o("td",[e._v(e._s(e.order.zip_code))])]),o("tr",[o("td",[e._v("Country")]),o("td",[e._v(e._s(e.order.country))])]),o("tr",[o("td",[e._v("Customer Email")]),o("td",[e._v(e._s(e.order.order_email))])]),o("tr",[o("td",[e._v("Customer Phone Number")]),o("td",[e._v(e._s(e.order.phone_no))])]),o("tr",[o("td",{attrs:{colspan:"2"}},[o("p"),o("p"),o("p",[o("strong",[e._v("In case of any issues, Please contact on this Address/Phone number.")])])])]),o("tr",[o("td",[e._v("Contact Information")]),o("td",[e._v("PhotoMozaix 8300 Fairview Rd. Mint Hill, NC 28227 (704) 846-5588")])])]),o("div",{staticClass:"text-center mt-3"},[o("b-button",{ref:"updateBtn",staticClass:"customButtonMedium width_200 mediumColor mb-3",on:{click:e.printSlip}},[e._v("Print")])],1)]):e._e(),o("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[o("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),o("div",{staticClass:"flexElem panelHeader flexResponsive"},[o("div",{staticClass:"panelHeading"},[e._v("\n            Order Details Page\n        ")]),o("div",[o("span",{staticClass:"go_back_admin",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$router.go(-1)}}},[o("i",{staticClass:"fal fa-angle-left"}),e._v(" Go Back\n            ")])])]),o("div",{staticClass:"panelContent"},[e.order?[o("div",{staticClass:"columns mt-4 is-multiline"},[o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-mobile"},[e._m(0),o("div",{staticClass:"column is-four-fifths"},[o("span",[e._v(e._s(e.order.order_no+" / "+e.order.project_photos_count))])])])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-mobile"},[e._m(1),o("div",{staticClass:"column"},[o("span",[e._v(e._s(e.order.project_title))])])])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-mobile"},[e._m(2),o("div",{staticClass:"column"},[o("span",[e._v(e._s(e.order.discount_code?e.order.discount_code:"N/A"))])])])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-mobile"},[e._m(3),o("div",{staticClass:"column"},[o("span",[e._v(e._s(e._f("currency")(e.order.total_discount)))])])])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-mobile"},[e._m(4),o("div",{staticClass:"column order-status"},[o("span",{class:e.order.express_production>0?"ordered":""},[o("strong",{staticStyle:{color:"inherit"}},[e._v(e._s(e._f("uppercase")(e.order.express_production>0?"Express":"Standard")))])])])])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-mobile"},[e._m(5),o("div",{staticClass:"column order-status"},[o("span",{class:"self_pick"==e.order.shipping_method?"store":"express"==e.order.shipping_method?"ordered":""},[o("strong",{staticStyle:{color:"inherit"}},[e._v("\n                           "+e._s(e._f("uppercase")("self_pick"==e.order.shipping_method?"STORE PICK UP (DO NOT MAIL)":e.order.shipping_method))+"\n                       ")])])])])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-mobile"},[e._m(6),o("div",{staticClass:"column"},[o("span",[e._v(e._s(e._f("currency")(e.order.grand_total)))])])])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-mobile"},[e._m(7),o("div",{staticClass:"column"},[o("span",{staticClass:"text-primary",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.modalAction("show")}}},[e._v("Show & Print Slip")])])])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-multiline is-mobile"},[e._m(8),o("div",{staticClass:"column is-four-fifths"},[o("div",{staticClass:"box bg-light"},[e.emptyOrNull(e.selectedProduct)?e._e():[o("div",{staticClass:"flexElem spaceBetween"},[o("div",[e._v("Product:")]),o("div",[o("span",[e._v(e._s(e.selectedProduct.title))])])]),o("hr",{staticStyle:{background:"rgba(10, 10, 10, 0.1)"}}),o("div",{staticClass:"flexElem spaceBetween"},[e._m(9),o("div",[o("span",[o("strong",[e._v(e._s(e.selectedProduct.is_reorder?"Yes":"No"))])])])]),o("hr",{staticStyle:{background:"rgba(10, 10, 10, 0.1)"}})],o("div",{staticClass:"flexElem spaceBetween"},[o("div",[e._v("Quantity:")]),o("div",[o("span",[e._v(e._s(e.order.quantity))])])])],2)])])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-multiline is-mobile"},[e._m(10),o("div",{staticClass:"column is-four-fifths"},[o("b-form-textarea",{staticClass:"bg-light",attrs:{placeholder:"Add Comment",rows:"8"},model:{value:e.order.comment,callback:function(t){e.$set(e.order,"comment",t)},expression:"order.comment"}})],1)])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns is-multiline is-mobile"},[e._m(11),o("div",{staticClass:"column is-four-fifths"},[o("b-form-input",{staticClass:"input bg-light customInput",attrs:{name:"tracking_number",id:"Tracking Number"},model:{value:e.order.tracking_number,callback:function(t){e.$set(e.order,"tracking_number",t)},expression:"order.tracking_number"}})],1)])])]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-12"},[o("b-button",{staticClass:"customButtonMedium width_200 mediumColor",attrs:{name:"add_btn",variant:"info"},on:{click:e.saveInfo}},[e._v("Save")])],1)])]:e._e()],2)],1)},no=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-two-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Order # / Total Images:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-two-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Project Title:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-two-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Coupon Code:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-two-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Coupon Discount:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-two-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Production:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-two-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Delivery Method:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-two-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Total Paid:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-two-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Packing Slip:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-four-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Detail")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("strong",[e._v("Reorder:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-four-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Admin Comment")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-four-fifths"},[r("span",{staticStyle:{"font-weight":"500"}},[e._v("Tracking Number")])])}],io=(r("ee2e"),{name:"orderDetail",props:["orderId"],data:function(){return{order:null,tracking_number:"",comment:"",errorMsg:"",auth_user:{},selectedProduct:{}}},created:function(){var e=this;e.getOrderDetail()},methods:{getOrderDetail:function(){var e=this;e.showLoader=!0;var t=e.fb.ordersCollection.doc(e.orderId).get();t.then(function(t){if(t.exists){var r=t.data();null==r.date_deleted?(e.order=r,e.order["id"]=t.id,r.product_id?e.fb.productsCollection.doc(r.product_id).get().then(function(t){if(t.exists){var r=t.data();r["id"]=t.id,e.selectedProduct=r}e.showLoader=!1}).catch(function(t){e.consoleData("error getting product info : "+t),e.showLoader=!1}):e.showLoader=!1):(e.showLoader=!1,e.redirectBack())}else e.showLoader=!1,e.redirectBack()}).catch(function(t){e.consoleData("error getting order detail: "+t),e.showLoader=!1})},redirectBack:function(){var e=this;e.$swal.fire({type:"info",title:"Not Found",text:"The requested order not found.",allowOutsideClick:!1,showCancelButton:!1,confirmButtonText:"OK"}).then(function(t){t.value&&e.$router.go(-1)})},saveInfo:function(){var e=this;e.tracking_number=JSON.parse(JSON.stringify(e.order.tracking_number)),e.comment=JSON.parse(JSON.stringify(e.order.comment));var t={tracking_number:e.tracking_number,comment:e.comment,date_updated:new Date};e.showLoader=!0,e.fb.ordersCollection.doc(e.orderId).update(t).then(function(){e.showLoader=!1,e.$swal.fire({type:"success",title:"Updated",text:"The order detail updated successfully",allowOutsideClick:!1,showCancelButton:!1,confirmButtonText:"OK"}).then(function(e){e.value}).catch(function(t){e.showLoader=!1,e.consoleData("Error updating orderInfo")})})},modalAction:function(e){var t=this;"show"==e&&t.$bvModal.show("shippedSlipModal"),"hide"==e&&t.$bvModal.hide("shippedSlipModal")},printSlip:function(){window.print()}}}),co=io,lo=Object(p["a"])(co,ao,no,!1,null,null,null),uo=lo.exports,po=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("div",{staticClass:"flexElem panelHeader flexResponsive"},[r("div",{staticClass:"panelHeading"},[e._v("\n            Customers Listing\n        ")]),r("div",{staticClass:"flexElem flexResponsive"},[e.customers.length>0?r("div",{staticClass:"hasSearch"},[r("download-excel",{attrs:{fetch:e.fetchCustomers,"export-fields":e.customerExportableFields,name:"CustomersList","before-generate":e.startDownload,"before-finish":e.finishDownload}},[r("a",{staticClass:"action action_excel",attrs:{href:"#",title:"Export Customers"}})])],1):e._e(),e.customers.length>0?r("div",{staticClass:"hasSearch"},[r("download-excel",{attrs:{fetch:e.fetchCustomerOrders,data:e.customer_orders,"export-fields":e.exportableFields,name:"CustomerOrdersList","before-generate":e.startDownload,"before-finish":e.finishDownload}},[r("a",{staticClass:"action action_excel",attrs:{href:"#",title:"Export Customer Orders"}})])],1):e._e(),r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_name,expression:"search_name"}],staticClass:"inputControl searchIcon",attrs:{type:"text",autocomplete:"nope",placeholder:"Search Name"},domProps:{value:e.search_name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("search_name")},input:function(t){t.target.composing||(e.search_name=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("search_name")}}})]),r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_email,expression:"search_email"}],staticClass:"inputControl searchIcon",attrs:{type:"text",autocomplete:"nope",placeholder:"Search Email"},domProps:{value:e.search_email},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("search_email")},input:function(t){t.target.composing||(e.search_email=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("search_email")}}})]),r("vue-date",{attrs:{"data-vv-name":"search_date","input-class":"inputControl datepicker calendarIcon",placeholder:"Search With Created Date","clear-button":!0,"clear-button-icon":"fas fa-times"},on:{input:function(t){return e.search("search_date")}},model:{value:e.search_date,callback:function(t){e.search_date=t},expression:"search_date"}})],1)]),r("div",{staticClass:"panelContent"},[r("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll.x",value:e.draggable,expression:"draggable",modifiers:{x:!0}}],staticClass:"table-responsive"},[r("table",{staticClass:"themeTable"},[e._m(0),r("tbody",[e._l(e.customers,function(t,o){return r("tr",[r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                            "+e._s(t.email)+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                            "+e._s(t.first_name?t.first_name:"N/A")+"\n                        ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.last_name?t.last_name:"N/A")+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                            "+e._s(t.phone_no?t.phone_no.replace("+1 ",""):"N/A")+"\n                         ")])]),r("td",{staticClass:"text-center"},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                            "+e._s(t.abandoned_projects+" / "+t.ordered_projects)+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                            "+e._s(e._f("moment")(t.date_created.toDate(),"ddd, Do MMM  YYYY"))+"\n                         ")])]),r("td",[r("router-link",{staticClass:"action action_view",attrs:{to:{name:"CustomerDetail",params:{customerId:t.id}},title:"View Customer Detail"}})],1)])}),0==e.showLoader&&e.customers.length<=0?[e._m(1)]:e._e()],2)])])])])},mo=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Email")]),r("th",[e._v("First Name")]),r("th",[e._v("Last Name")]),r("th",[e._v("Phone No.")]),r("th",{staticClass:"text-center"},[e._v("Projects Started / Projects Ordered")]),r("th",[e._v("Created Date")]),r("th",[e._v("Actions")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",{attrs:{colspan:"7"}},[e._v("No Data Exists")])])}],ho=(r("a481"),r("96cf"),r("3b8d")),_o=r("1bdd"),fo={name:"CustomerListing",mixins:[cr.a.mixin],components:{"vue-date":x["a"],vueDropzone:te.a,"download-excel":_o["a"]},data:function(){return{customers:[],per_page:20,start_at:null,start_after:null,search_name:"",search_email:"",search_date:"",exportableFields:{"Order #":"order_id","Shipping Name":"complete_name","Shipping Address":"address","Phone Number":"phone_no",Email:"order_email","Number Of Images":"project_photos_count","Number Of Mozaix ordered":"quantity","Project Title":"project_title","Coupon Code":"discount_code","Coupon Discount":"total_discount","Total Price":"grand_total","Tracking Number":"tracking_number",Status:"status"},customerExportableFields:{"First Name":"first_name","Last Name":"last_name",Address:"address",City:"city",State:"region","Zip Code":"zip_code",Email:"email",Phone:"phone_no","Created Date":"date_created"},customer_orders:[],customers_export_array:[]}},created:function(){var e=this;window.addEventListener("scroll",e.scrollListener),e.getCustomers()},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getCustomers()},getCustomers:function(){var e=Object(ho["a"])(regeneratorRuntime.mark(function e(){var t,r,o,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,r=t.fb.usersCollection.where("date_deleted","==",null),r=t.addSearchQuery(r),r=r.orderBy("date_created","desc"),t.start_after&&(r=r.startAfter(t.start_after)),t.showLoader=!0,e.next=8,r.limit(t.per_page).get();case 8:if(o=e.sent,s=o.docs.length,!(s>0)){e.next=23;break}window.addEventListener("scroll",t.scrollListener),t.start_at=o.docs[0],t.start_after=o.docs[s-1],a=0;case 15:if(!(a<s)){e.next=21;break}return e.next=18,t.fetchCustomerProjects(o.docs[a]);case 18:a++,e.next=15;break;case 21:e.next=24;break;case 23:window.removeEventListener("scroll",t.scrollListener);case 24:t.showLoader=!1;case 25:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetchCustomerProjects:function(){var e=Object(ho["a"])(regeneratorRuntime.mark(function e(t){var r,o,s,a,n,i,c,l,d,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this,o=t.data(),o["id"]=t.id,"admin"==o.user_type){e.next=16;break}return s=r.fb.projectsCollection.where("date_deleted","==",null).where("user","==",t.id),e.next=7,s.get();case 7:if(a=e.sent,n=a.docs.length,i=0,c=0,n>0)for(l=0;l<n;l++)d=a.docs[l].data(),"new"==d.status&&(c=parseInt(c)+1),"Ordered"==d.status&&(i=parseInt(i)+1);u=o,u["abandoned_projects"]=c,u["ordered_projects"]=i,r.customers.push(u);case 16:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addSearchQuery:function(e){var t=this;if(t.search_name&&(e=e.where("name_terms","array-contains",t.search_name.toLowerCase())),t.search_email&&(e=e.where("email_terms","array-contains",t.search_email.toLowerCase())),t.search_date){var r=t.$helpers.formatDateQuery(t.search_date);e=e.where("date_created",">=",r.start_date).where("date_created","<=",r.end_date)}return e},search:function(e){var t=this;"search_name"==e&&(t.search_email="",t.search_date=""),"search_email"==e&&(t.search_name="",t.search_date=""),"search_date"==e&&(t.search_name="",t.search_email=""),t.customers=[],t.start_at=null,t.start_after=null,t.getCustomers()},fetchCustomerOrders:function(){var e=Object(ho["a"])(regeneratorRuntime.mark(function e(){var t,r,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this,r=0;case 2:if(!(r<t.customers.length)){e.next=11;break}return o=t.fb.ordersCollection.where("date_deleted","==",null).where("user_uid","==",t.customers[r].id).orderBy("date_created","desc"),e.next=6,o.get();case 6:s=e.sent,s.forEach(function(e){var r=e.data();r["id"]=e.id,r["complete_name"]=r.first_name+" "+r.last_name,r["total_discount"]=t.$options.filters.currency(r["total_discount"]),r["grand_total"]=t.$options.filters.currency(r["grand_total"]),t.customer_orders.push(r)});case 8:r++,e.next=2;break;case 11:if(!(t.customer_orders.length>0)){e.next=15;break}return e.abrupt("return",t.customer_orders);case 15:t.showLoader=!1,t.simpleAlert({type:"info",text:"No orders exists to export"});case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),startDownload:function(){this.showLoader=!0},finishDownload:function(){this.showLoader=!1},fetchCustomers:function(){var e=this,t=[];return e.customers.forEach(function(r,o){var s={};s["first_name"]=r.first_name?JSON.parse(JSON.stringify(r.first_name)):"N/A",s["last_name"]=r.last_name?JSON.parse(JSON.stringify(r.last_name)):"N/A",s["address"]=r.address?JSON.parse(JSON.stringify(r.address)):"N/A",s["city"]=r.city?JSON.parse(JSON.stringify(r.city)):"N/A",s["region"]=r.region?JSON.parse(JSON.stringify(r.region)):"N/A",s["zip_code"]=r.zip_code?JSON.parse(JSON.stringify(r.zip_code)):"N/A",s["email"]=r.email?JSON.parse(JSON.stringify(r.email)):"N/A",s["phone_no"]=r.phone_no?JSON.parse(JSON.stringify(r.phone_no)).replace("+1 ",""):"N/A";var a=JSON.stringify(e.$helpers.formatDate(r.date_created.toDate(),"ddd, Do MMM  YYYY"));s["date_created"]=JSON.parse(a),t.push(s)}),t}}},vo=fo,go=Object(p["a"])(vo,po,mo,!1,null,null,null),bo=go.exports,Co=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("b-modal",{ref:"addUpdateCouponModal",attrs:{id:"addUpdateCouponModal",title:"Upload Finished Mozaix","hide-footer":!0,"no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[e.serverErrors.length>0?r("div",[r("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showDismissibleAlert,callback:function(t){e.showDismissibleAlert=t},expression:"showDismissibleAlert"}},[r("ul",e._l(e.serverErrors,function(t){return r("li",[e._v(e._s(t))])}),0)])],1):e._e(),e.size_errors>0||e.type_errors>0?[r("b-alert",{attrs:{show:!0,dismissible:"",variant:"info"},on:{dismissed:e.hideDropzoneErrors}},[r("ul",[e.uploaded_files>0?r("li",[e._v("\n                        "+e._s("["+e.uploaded_files+"] ")+"\n                        "+e._s(1==e.uploaded_files?"file is uploaded.":"files are uploaded.")+"\n                    ")]):e._e(),e.size_errors>0?r("li",[e._v("\n                        "+e._s("The files with size less than 100 KB are not supported and the system did not upload ")+"\n                        "+e._s(1==e.size_errors?"this ":"these ")+"\n                        "+e._s("["+e.size_errors+"] ")+"\n                        "+e._s(1==e.size_errors?"File.":"Files.")+"\n                    ")]):e._e(),e.type_errors>0?r("li",[e._v("\n                        "+e._s("The supported file types are jpg and jpeg so ["+e.type_errors+"] unsupported ")+e._s(1==e.type_errors?"file type is not uploaded.":"file types are not uploaded.")+"\n                    ")]):e._e()])])]:e._e(),r("vue-dropzone",{ref:"customDropzone",attrs:{options:e.dropzoneOptions,useCustomSlot:!0,id:"photoUpload"},on:{"vdropzone-reset":e.cleanupDropzone,"vdropzone-mounted":e.vdropzoneMounted,"vdropzone-sending-multiple":e.vdropzoneSendingMultiple,"vdropzone-success-multiple":e.vdropzoneSuccessMultiple,"vdropzone-queue-complete":e.vdropzoneQueueComplete,"vdropzone-error-multiple":e.vdropzoneErrorMultiple,"vdropzone-files-added":e.vdropzoneFilesAdded}},[r("div",{staticClass:"dropzone-custom-content"},[r("p",[r("span",{staticClass:"subtitle dropzone-custom-title"},[e._v("Drag and drop to upload photos.")]),r("br"),e._v("\n                    …or click to select a file from your computer")]),r("br"),r("p",[e._v("Accepted file type: jpg, jpeg")]),r("br"),r("p",[r("strong",[e._v("Max "),r("big",[e._v("40")]),e._v(" photos at one time.")],1)])])]),r("div",{staticClass:"columns is-multiple text-center"},[r("div",{staticClass:"column is-12 btnsContainter"},[r("b-button",{ref:"closeBtn",staticClass:"customButtonMedium width_200 lightColor",on:{click:function(t){return e.modalAction("hide")}}},[e._v("Close")])],1)]),r("div",{staticClass:"uploadedThumbs"},[r("gallery",{attrs:{images:e.orderCollagesArray,index:e.galleryIndex},on:{close:function(t){e.galleryIndex=null}}}),e._l(e.orderCollagesThumbsArray,function(t,o){return r("div",{staticClass:"uploadedThumb"},[r("div",{staticClass:"overControls"},[r("span",{staticClass:"project_action view_project",on:{click:function(t){e.galleryIndex=o}}},[e._v(" ")]),r("span",{staticClass:"project_action delete_project",on:{click:function(t){return e.deleteImage(o)}}},[e._v(" ")])]),r("img",{attrs:{src:t,alt:""}})])})],2)],2),r("div",{staticClass:"flexElem panelHeader flexResponsive"},[r("div",{staticClass:"panelHeading"},[e._v("\n            Finished Orders Listing\n        ")]),r("div",{staticClass:"flexElem flexResponsive"},[e.orders.length>0?r("div",{},[r("download-excel",{attrs:{data:e.orders,"export-fields":e.exportableFields,name:"Fininshed Orders Export"}},[r("a",{staticClass:"action action_excel shah",attrs:{href:"#"}})])],1):e._e(),r("div",{staticClass:"hasSearch"},[r("b-form-select",{staticClass:"input inputControl customInput",staticStyle:{"min-width":"100px"},attrs:{name:"status",options:e.searchStatuses},on:{change:function(t){return e.search("status")}},model:{value:e.searchStatus,callback:function(t){e.searchStatus=t},expression:"searchStatus"}})],1),r("div",{staticClass:"hasSearch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_order_no,expression:"search_order_no"}],staticClass:"inputControl searchIcon",attrs:{type:"text",autocomplete:"nope",placeholder:"Search With Order Number"},domProps:{value:e.search_order_no},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search("order_no")},keypress:function(t){return e.isFloat(t)},input:function(t){t.target.composing||(e.search_order_no=t.target.value)}}}),r("span",{staticClass:"searchBtn",on:{click:function(t){return e.search("order_no")}}})]),r("vue-date",{attrs:{"data-vv-name":"valid_till","input-class":"inputControl datepicker calendarIcon",placeholder:"Search With Created Date","clear-button":!0,"clear-button-icon":"fas fa-times"},on:{input:function(t){return e.search("date")}},model:{value:e.searchDate,callback:function(t){e.searchDate=t},expression:"searchDate"}})],1)]),r("div",{staticClass:"panelContent"},[r("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll.x",value:e.draggable,expression:"draggable",modifiers:{x:!0}}],staticClass:"table-responsive"},[r("table",{staticClass:"themeTable fixedLayout"},[e._m(0),r("tbody",[e._l(e.orderBy(e.orders,"date_created",-1),function(t,o){return r("tr",[r("td",[e._v("\n                        "+e._s(t.first_name+" / "+t.order_no)+"\n                    ")]),r("td",[r("popper",{staticClass:"linkColor",staticStyle:{cursor:"pointer"},attrs:{trigger:"click",options:{placement:"right"}}},[r("div",{staticClass:"popper"},[r("p",[r("strong",[e._v("Name: ")]),e._v(e._s(t.first_name))]),r("p",[r("strong",[e._v("Email: ")]),e._v(e._s(t.order_email))]),r("p",[r("strong",[e._v("Phone No: ")]),e._v(e._s(t.phone_no?t.phone_no.replace("+1 ",""):t.phone_no))]),r("p",[r("strong",[e._v("Address: ")]),e._v(e._s(t.address))]),r("p",[r("strong",[e._v("City: ")]),e._v(e._s(t.city))]),r("p",[r("strong",[e._v("State: ")]),e._v(e._s(t.region))]),r("p",[r("strong",[e._v("Zip Code: ")]),e._v(e._s(t.zip_code))])]),r("span",{staticClass:"right",attrs:{slot:"reference"},slot:"reference"},[r("u",[e._v(e._s(t.order_email))])])])],1),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.project_title)+"\n                         ")])]),r("td",[r("router-link",{attrs:{to:{name:"OrderDetail",params:{orderId:t.id}}}},[e._v("\n                            "+e._s(t.quantity)+"\n                        ")])],1),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(t.project_photos_count?t.project_photos_count:"0")+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                           "+e._s(e._f("moment")(t.date_created.toDate(),"ddd, Do MMM  YYYY"))+"\n                         ")])]),r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[t.express_production>0?r("b-alert",{attrs:{variant:"danger",show:""}},[e._v(" Express 1-2")]):r("b-alert",{attrs:{show:""}},[e._v(" Standard 4-5")])],1)]),["Shipped"==e.getOrderStatus(o)?r("td",{staticClass:"order-status"},[r("span",{staticClass:"completed",on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v(e._s(t.status))])]):r("td",[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[r("b-form-select",{ref:"status-"+t.id,refInFor:!0,staticClass:"input customInput",staticStyle:{"min-width":"100px"},attrs:{name:"status",value:e.getOrderStatus(o),options:e.orderStatuses},on:{change:function(r){return e.changeStatus(r,o,t.id,t.status,t.project_id,t.user_uid)}}})],1)])],r("td",{staticClass:"order-status"},[r("span",{class:"self_pick"==t.shipping_method?"store":"express"==t.shipping_method?"ordered":"",on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                             "+e._s("self_pick"==t.shipping_method?"Store Pick Up":"express"==t.shipping_method?"Express":"Standard")+"\n                        ")])]),r("td",{staticClass:"order-status"},[r("router-link",{attrs:{to:{name:"AdminViewProject",params:{projectId:t.project_id}},title:"View Project"}},[e._v("\n                            "+e._s(t.project_id)+"\n                        ")])],1),r("td",[t.downloading?[r("CircleLoader",{attrs:{progress:t.progress}})]:e._e(),r("span",{staticClass:"action action_download",staticStyle:{cursor:"pointer"},attrs:{title:"Download images zip"},on:{click:function(r){return e.createZip(t.id,t.project_id,o,!1)}}}),t.collage_uploaded?r("span",{staticClass:"action action_mozaix",staticStyle:{cursor:"pointer"},attrs:{title:"Download Mozaix"},on:{click:function(r){return e.createZip(t.id,t.project_id,o,!0)}}}):e._e(),r("router-link",{staticClass:"action action_view",attrs:{to:{name:"AdminViewProject",params:{projectId:t.project_id}},title:"View Project"}}),r("span",{staticClass:"action action_forward",staticStyle:{cursor:"pointer"},attrs:{title:"Upload Mozaix"},on:{click:function(r){return e.uploadCollage(t.id,t.project_id,o)}}})],2)],2)}),0==e.showLoader&&e.orders.length<=0?[r("tr",[r("td",{attrs:{colspan:"11"}},[r("span",{on:{mouseover:function(t){e.draggable=!1},mouseout:function(t){e.draggable=!0}}},[e._v("\n                                No Data Exists\n                            ")])])])]:e._e()],2)])])])],1)},wo=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Customer Name / Order #")]),r("th",[e._v("Customer Email")]),r("th",[e._v("Project Title")]),r("th",[e._v("Number Of Mozaix")]),r("th",[e._v("Number Of Images")]),r("th",[e._v("Ordered Date")]),r("th",[e._v("Type Of Production")]),r("th",[e._v("Status")]),r("th",[e._v("Delivery Method")]),r("th",[e._v("Project ID")]),r("th",[e._v("Actions")])])])}],yo=r("21a6"),xo=r("7c39"),jo=r("0083"),Io={name:"FinishedOrders",mixins:[cr.a.mixin],components:{"vue-date":x["a"],vueDropzone:te.a,gallery:oe.a,CircleLoader:Mt,popper:dr.a,"download-excel":_o["a"]},data:function(){return{orders:[],errorMsg:"",per_page:20,search_order_no:"",searchDate:"",start_at:null,start_after:null,dropzoneOptions:{url:"https://api.photomozaix.com/api/upload/order/collage",addRemoveLinks:!1,method:"post",autoQueue:!0,autoProcessQueue:!0,uploadMultiple:!0,parallelUploads:"500",timeout:"3600000",maxFiles:40},activeOrderId:"",activeProjectId:"",serverErrors:[],active_dropzone:"",activeOrderIndex:"",orderCollagesArray:[],orderCollagesThumbsArray:[],orderCollages:[],galleryIndex:null,activeProject:null,s3_base_url:"https://s3.amazonaws.com/photomozaix-production/",size_errors:0,type_errors:0,uploaded_files:0,orderStatuses:[{value:"Printed",text:"Printed"},{value:"Shipped",text:"Shipped"}],searchStatuses:[{value:"Printed",text:"Printed"},{value:"Shipped",text:"Shipped"}],searchStatus:"Printed",exportableFields:{"Order #":"order_id","Shipping Name":"complete_name","Shipping Address":"address","Phone Number":"phone_no",Email:"order_email","Number Of Images":"project_photos_count","Number Of Mozaix ordered":"quantity","Project Title":"project_title","Coupon Code":"discount_code","Coupon Discount":"total_discount","Total Price":"grand_total","Tracking Number":"tracking_number",Status:"status"}}},created:function(){var e=this;window.addEventListener("scroll",e.scrollListener),e.getOrders()},methods:{scrollListener:function(){var e=this;e.$helpers.bottomOfWindow()&&0==e.showLoader&&e.getOrders()},getOrders:function(){var e=this,t=e.fb.ordersCollection.where("status","==",e.searchStatus).where("date_deleted","==",null);t=e.addSearchQuery(t),t=t.orderBy("date_created","desc"),e.start_after&&(t=t.startAfter(e.start_after)),e.showLoader=!0,t.limit(e.per_page).get().then(function(t){var r=t.docs.length;r>0?(window.addEventListener("scroll",e.scrollListener),e.start_at=t.docs[0],e.start_after=t.docs[r-1]):window.removeEventListener("scroll",e.scrollListener),t.forEach(function(t){var r=t.data();r["id"]=t.id,r["complete_name"]=r.first_name+" "+r.last_name,r["total_discount"]=e.$options.filters.currency(r["total_discount"]),r["grand_total"]=e.$options.filters.currency(r["grand_total"]),r["downloading"]=!1,r["downloaded"]=0,r["progress"]=0,r["message"]="Downloading...",e.orders.push(r)}),e.showLoader=!1}).catch(function(t){e.showLoader=!1,e.$helpers.consoleData("Error getting orders: "+t)})},addSearchQuery:function(e){var t=this;if(t.search_order_no&&(e=e.where("order_no","==",parseInt(t.search_order_no))),t.searchDate){var r=t.$helpers.formatDateQuery(t.searchDate);e=e.where("date_created",">=",r.start_date).where("date_created","<=",r.end_date)}return e},search:function(e){var t=this;"order_no"==e&&(t.searchDate=""),"date"==e&&(t.search_order_no=""),t.orders=[],t.start_at=null,t.start_after=null,t.getOrders()},uploadCollage:function(e,t,r){var o=this;o.activeOrderId=e,o.activeProjectId=t,o.activeOrderIndex=r,o.getCollageImages(e),o.modalAction("show")},modalAction:function(e){var t=this;"show"==e&&t.$bvModal.show("addUpdateCouponModal"),"hide"==e&&(t.activeOrderId="",t.activeProjectId="",t.activeOrderIndex="",t.size_errors=0,t.type_errors=0,t.uploaded_files=0,t.serverErrors=[],t.$refs["closeBtn"].disabled=!1,t.$bvModal.hide("addUpdateCouponModal"))},vdropzoneMounted:function(){var e=this;e.active_dropzone=e.$refs.customDropzone},vdropzoneSendingMultiple:function(e,t,r){var o=this;o.showLoader=!0,o.hideDropzoneErrors();var s=o.activeOrderId;r.append("orderId",s),o.$refs.closeBtn&&(o.$refs.closeBtn.disabled=!0)},vdropzoneSuccessMultiple:function(e,t){var r=this;if(0==t.success)r.serverErrors=t.errors,r.showDismissibleAlert=!0,r.active_dropzone.removeAllFiles(),r.$refs.closeBtn&&(r.$refs.closeBtn.disabled=!1);else{var o=t.data.uploaded_images,s=r.fb.db.batch(),a=r.fb.ordersCollection.doc(r.activeOrderId).collection("collages");o.forEach(function(e,t){s.set(a.doc(),r.$helpers.addTimestamps(e,!0)),r.orderCollagesArray.unshift(r.s3_base_url+"order_collages/"+r.activeOrderId+"/customer_"+e.name),r.orderCollagesThumbsArray.unshift(r.s3_base_url+"order_collages/"+r.activeOrderId+"/thumb_"+e.name)}),o.length>0&&r.fb.ordersCollection.doc(r.activeOrderId).update({date_updated:new Date,collage_uploaded:!0}).then(function(){r.orders[r.activeOrderIndex].collage_uploaded=!0,r.consoleData("collage status updated in order")}).catch(function(e){r.consoleData("Error updating collage status in order: "+e)}),s.commit().then(function(){r.consoleData("batch completed"),r.size_errors=t.data.size_errors,r.type_errors=t.data.type_errors,r.uploaded_files=t.data.uploaded_images.length,r.active_dropzone.removeAllFiles(),r.activeOrderIndex="",r.$refs.closeBtn&&(r.$refs.closeBtn.disabled=!1),r.simpleAlert({type:"success",text:"Collage uploaded successfully"})})}},vdropzoneQueueComplete:function(){var e=this;e.showLoader=!1},vdropzoneErrorMultiple:function(e,t,r){var o=this;o.showLoader=!1,o.$refs["cancelBtn"].disabled=!1,alert("error multiple")},cleanupDropzone:function(){this.consoleData("Cleaning up...")},getCollageImages:function(e){var t=this;t.orderCollagesArray=[],t.orderCollagesThumbsArray=[],t.orderCollages=[];var r=t.fb.ordersCollection.doc(e).collection("collages").where("date_deleted","==",null);r.get().then(function(r){r.forEach(function(r){var o=r.data();o["id"]=r.id;var s=t.s3_base_url+"order_collages/"+e+"/customer_"+o.name;t.orderCollagesArray.push(s),t.orderCollagesThumbsArray.push(t.s3_base_url+"order_collages/"+e+"/thumb_"+o.name),t.orderCollages.push(o)})})},deleteImage:function(e){var t=this;this.$swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#c31d8a",cancelButtonColor:"#b9acd2",confirmButtonText:"Yes, delete it!"}).then(function(r){if(r.value){t.showLoader=!0;var o=t.orderCollages[e].id;t.fb.ordersCollection.doc(t.activeOrderId).collection("collages").doc(o).update({date_deleted:new Date,date_updated:new Date}).then(function(){t.consoleData("collage deleted"),t.orderCollages.splice(e,1),t.orderCollagesArray.splice(e,1),t.orderCollagesThumbsArray.splice(e,1),t.showLoader=!1}).catch(function(e){t.showLoader=!1,t.consoleData("error deleting collage "+e)})}})},vdropzoneFilesAdded:function(e){},createZip:function(e,t,r,o){var s=this;if(t){var a=[];o?s.fb.ordersCollection.doc(e).collection("collages").where("date_deleted","==",null).get().then(function(e){e.forEach(function(e){var t=e.data().name;a.push({path:e.data().url,name:t})}),a.length>0?(s.orders[r].downloading=!0,$("body").addClass("loaderOpen"),s.downloadZip(a,t+".zip",a.length,r)):s.simpleAlert({type:"info",text:"No files to download"})}):s.fb.projectsCollection.doc(t).collection("photos").where("date_deleted","==",null).get().then(function(e){e.forEach(function(e){var t=e.data().name;e.data().is_main_img&&(t="main_"+e.data().name),a.push({path:e.data().url,name:t})}),a.length>0?(s.orders[r].downloading=!0,$("body").addClass("loaderOpen"),s.downloadZip(a,t+".zip",a.length,r)):s.simpleAlert({type:"info",text:"No files to download"})})}},downloadZip:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default.zip",r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=this,a=new xo;e.forEach(function(e,t){a.file(e.name,s.urlToPromise(e.path,r,o),{base64:!0,binary:!0})}),a.generateAsync({type:"blob"}).then(function(e){s.orders[o].message="Creating Zip...",s.orders[o].downloading=!1,s.orders[o].downloaded=0,s.orders[o].progress=0,$("body").removeClass("loaderOpen"),yo.saveAs(e,t)})},urlToPromise:function(e,t,r){var o=this;return new Promise(function(s,a){jo.getBinaryContent(e,function(e,n){if(e)a(e);else{var i=JSON.stringify(o.orders[r].downloaded);i=JSON.parse(i),i=parseInt(i)+1;var c=parseInt(i)/parseInt(t);c=parseFloat(c)*parseFloat("100"),o.orders[r].downloaded=i,o.orders[r].progress=parseInt(c);o.orders[r].id;s(n)}})})},hideDropzoneErrors:function(){var e=this;e.type_errors=0,e.size_errors=0,e.uploaded_files=0},changeStatus:function(e,t,r,o,s,a){var n=this,i={status:e,date_updated:new Date};"Shipped"==e?n.$swal({title:"Add Tracking Number",type:"info",input:"text",showCancelButton:!0,cancelButtonColor:"#b9acd2",inputValidator:function(e){if(!e)return"You need to write something!"}}).then(function(e){e.value?(n.showLoader=!0,i["tracking_number"]=e.value,n.fb.ordersCollection.doc(r).update(i).then(function(){n.consoleData("order status updated"),n.search();var e=n.fb.firestore.FieldValue.increment(1);n.fb.projectsCollection.doc(s).update({completed_orders:e}).then(function(){n.consoleData("completed order incremented"),n.fb.usersCollection.doc(a).update({completed_orders:e}).then(function(){n.consoleData("completed order incremented in users collection"),n.showLoader=!1}).catch(function(e){n.showLoader=!1,n.consoleData("error incrementing completed orders in users collection")})}).catch(function(e){n.showLoader=!1,n.consoleData("error incrementing completed orders")})}).catch(function(e){n.showLoader=!1,n.consoleData("error updating order status")})):n.$refs["status-"+r][0].$el.value=o}):(n.showLoader=!0,n.fb.ordersCollection.doc(r).update(i).then(function(){n.showLoader=!1,n.consoleData("order status updated1")}).catch(function(e){n.showLoader=!1,n.consoleData("error updating order status")}))},getOrderStatus:function(e){var t=this;return t.orders[e].status}}},ko=Io,Ao=Object(p["a"])(ko,Co,wo,!1,null,null,null),Do=Ao.exports,Mo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoader,expression:"showLoader"}],staticClass:"global_loader"},[r("vue-loaders",{attrs:{name:e.loaderName,color:"#7359a6",scale:"1"}})],1),r("div",{staticClass:"flexElem panelHeader spaceBetween flexResponsive"},[r("div",{staticClass:"panelHeading"},[e._v("\n            Customer Detail\n        ")]),r("div",[r("span",{staticClass:"go_back_admin",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$router.go(-1)}}},[r("i",{staticClass:"fal fa-angle-left"}),e._v(" Go Back\n            ")])])]),r("div",{staticClass:"panelContent"},[r("div",{staticClass:"box mt-5"},[e.customer_detail?[r("div",{staticClass:"columns is-multiline customerDetailData"},[r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("Email:")]),r("div",[e._v(e._s(e._f("capitalize")(e.customer_detail.email)))])])]),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("Password:")]),r("div",[e._v(e._s(e.customer_detail.password))])])]),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("First Name:")]),r("div",[e._v(e._s(e._f("capitalize")(e.customer_detail.first_name)))])])]),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("Last Name:")]),r("div",[e._v(e._s(e._f("capitalize")(e.customer_detail.last_name)))])])]),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("Address:")]),r("div",[e._v(e._s(e._f("capitalize")(e.customer_detail.address)))])])]),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("City:")]),r("div",[e._v(e._s(e._f("capitalize")(e.customer_detail.city)))])])]),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("State:")]),r("div",[e._v(e._s(e._f("capitalize")(e.customer_detail.region)))])])]),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("Country:")]),r("div",[e._v(e._s(e._f("capitalize")(e.customer_detail.country)))])])]),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("Zip:")]),r("div",[e._v(e._s(e.customer_detail.zip_code))])])]),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"flexElem"},[r("div",[e._v("Phone No:")]),r("div",[e._v(e._s(e.customer_detail.phone_no))])])])])]:e._e(),0==e.showLoader&&null==e.customer_detail?[e._v("User detail not available")]:e._e(),1==e.showLoader&&null==e.customer_detail?[e._v("Loading..")]:e._e()],2),r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"themeTable"},[e._m(0),r("tbody",[e._l(e.customer_orders,function(t,o){return r("tr",[t.is_order?[r("td",[r("router-link",{attrs:{to:{name:"AdminViewProject",params:{projectId:t.project_id}},title:"View Project"}},[e._v("\n                                "+e._s(t.project_id)+"\n                            ")])],1),r("td",[e._v("\n                            "+e._s(t.order_no)+"\n                        ")]),r("td",[e._v(e._s(e._f("capitalize")(t.project_title)))]),r("td",{staticClass:"text-center"},[e._v(e._s(t.project_photos_count))]),r("td",{staticClass:"text-center"},[e._v(e._s(t.quantity))]),r("td",{staticClass:"noTextBreak"},[e._v(e._s(e._f("moment")(t.date_created.toDate(),"ddd, Do MMM  YYYY")))]),r("td",{staticClass:"order-status"},[r("span",{class:"Shipped"==t.status?"completed":"Ordered"==t.status?"ordered":"printed"},[e._v("\n                            "+e._s(t.status)+"\n                            ")])])]:[r("td",[r("router-link",{attrs:{to:{name:"AdminViewProject",params:{projectId:t.project_id}},title:"View Project"}},[e._v("\n                                "+e._s(t.id)+"\n                            ")])],1),r("td",[e._v("\n                            N/A\n                        ")]),r("td",[e._v(e._s(e._f("capitalize")(t.title)))]),r("td",{staticClass:"text-center"},[e._v(e._s(t.total_photos))]),r("td",{staticClass:"text-center"},[e._v("N/A")]),r("td",{staticClass:"noTextBreak text-center"},[e._v("N/a")]),e._m(1,!0)]],2)}),0==e.showLoader&&e.customer_orders.length<=0?[e._m(2)]:e._e()],2)])])])])},Oo=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Project ID")]),r("th",[e._v("Order #")]),r("th",[e._v("Project Title")]),r("th",{staticClass:"text-center"},[e._v("No. of Images")]),r("th",{staticClass:"text-center"},[e._v("Quantity")]),r("th",{staticClass:"noTextBreak"},[e._v("Ordered Date")]),r("th",{staticClass:"noTextBreak"},[e._v("Status")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("td",{staticClass:"order-status "},[r("span",{staticClass:"abandoned"},[e._v("\n                                Abandoned\n                            ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",{attrs:{colspan:"8"}},[e._v("No Data Exists")])])}],Po={name:"CustomerDetail",props:["customerId"],data:function(){return{customer_detail:null,customer_orders:[],shipped_orders:0}},created:function(){var e=this;e.getCustomer(),e.getCustomerOrders()},methods:{getCustomer:function(){var e=this;e.fb.usersCollection.doc(e.customerId).get().then(function(t){if(t.exists){var r=t.data();r["id"]=t.id,e.customer_detail=r,e.showLoader=!1}else e.showLoader=!1,e.$swal.fire({title:"Not Found",text:"Requested user not found!",type:"info",allowOutsideClick:!1,confirmButtonText:"OK"}).then(function(t){t.value&&e.$router.go(-1)})}).catch(function(t){e.consoleData("error get customer detail: "+t),e.showLoader=!1})},getCustomerOrders:function(){var e=this;e.fb.ordersCollection.where("date_deleted","==",null).where("user_uid","==",e.customerId).orderBy("date_created","desc").get().then(function(t){e.fb.projectsCollection.where("user","==",e.customerId).where("status","==","new").where("date_deleted","==",null).get().then(function(r){t.forEach(function(t){var r=t.data();r["id"]=t.id,r["is_order"]=!0,"Shipped"==r.status&&(e.shipped_orders=parseInt(e.shipped_orders)+1),e.customer_orders.push(r)}),r.forEach(function(t){var r=t.data();r["id"]=t.id,r["project_id"]=t.id,r["is_order"]=!1,(r.status="new")&&e.customer_orders.push(r)})}).catch(function(t){e.consoleData("error getting abandoned orders: "+t)})}).catch(function(t){e.consoleData("error getting customer orders: "+t)})}}},Eo=Po,So=Object(p["a"])(Eo,Mo,Oo,!1,null,null,null),No=So.exports;r("ee2e");o["default"].use(s["a"]);var Lo=new s["a"]({mode:"history",routes:[{path:"/admin",name:"AdminDefaultContainer",component:st,meta:{requiresAuth:!0,component_name:"AdminDefaultContainer",allowedUsers:["admin"],title:"PhotoMozaix"},children:[{path:"dashboard",name:"AdminDashboard",component:vr,meta:{component_name:"AdminDashboard",title:"Admin Dashboard",allowedUsers:["admin"]}},{path:"finished/orders",name:"FinishedOrders",component:Do,meta:{component_name:"FinishedOrders",title:"Finished Orders",allowedUsers:["admin"]}},{path:"customers",name:"CustomerListing",component:bo,meta:{component_name:"CustomerListing",title:"Customer Listing",allowedUsers:["admin"]}},{path:"customer/:customerId/detail",name:"CustomerDetail",component:No,props:!0,meta:{component_name:"CustomerDetail",title:"Customer Detail",allowedUsers:["admin"]}},{path:"profile",name:"AdminProfile",component:xr,meta:{component_name:"AdminProfile",title:"Profile"}},{path:"projects",name:"AdminProjectListing",component:$t,meta:{component_name:"AdminProjectListing",title:"Project Listing"}},{path:"project/:projectId/orders",name:"ProjectOrderListing",component:Fr,props:!0,meta:{component_name:"ProjectOrderListing",title:"Project Listing"}},{path:"project/:projectId",name:"AdminViewProject",component:qt,props:!0,meta:{component_name:"AdminViewProject",title:"View Project"}},{path:"orders",name:"AdminOrders",component:Jt,meta:{component_name:"AdminOrders",title:"Orders Listing"}},{path:"order/:orderId/detail",name:"OrderDetail",component:uo,props:!0,meta:{component_name:"OrderDetail",title:"Order Detail",allowedUsers:["admin"]}},{path:"coupons",name:"AdminCouponListing",component:sr,meta:{component_name:"AdminCouponListing",title:"Coupons Listing"}},{path:"manage_product",name:"ManageProduct",component:Or,meta:{component_name:"ManageProduct",title:"Manage Products"}}]},{path:"/",name:"UserDefaultContainer",component:wt,meta:{requiresAuth:!0,component_name:"UserDefaultContainer",allowedUsers:["customer"],title:"PhotoMozaix"},children:[{path:"dashboard",name:"UserDashboard",component:C,meta:{requiresAuth:!0,title:"Project Dashboard | PhotoMozaix",allowedUsers:["customer"]}},{path:"shared/with/me",name:"SharedWithMe",component:so,meta:{requiresAuth:!0,title:"Shared Projects | PhotoMozaix",allowedUsers:["customer"]}},{path:"/my/orders",name:"MyOrders",component:Xr,meta:{requiresAuth:!0,title:"Your Orders | PhotoMozaix",allowedUsers:["customer"]}},{path:"project/:projectId/view",name:"ProjectView",component:Qr,props:!0,meta:{component_name:"ProjectView",title:"View Project"}},{path:"/checkout/:projectId/:shareCode?",name:"Checkout",component:D,props:!0,meta:{requiresAuth:!0,title:"Checkout Page | PhotoMozaix",allowedUsers:["customer"]},beforeEnter:function(e,t,r){var o=n["a"].getCurrentUser();if(n["a"].emptyOrNull(o)){var s=n["a"].setMessage("danger","Your session has been expired. Please login again.","Login");a["a"].commit("setFlashMessage",s),n["a"].logOutUser()}else r()}},{path:"/project/:projectId/edit",name:"ProjectEdit",component:ce,props:!0,meta:{requiresAuth:!0,title:"Edit Your Project | Project Dashboard | PhotoMozaix",allowedUsers:["customer"]},beforeEnter:function(e,t,o){var s=r("ee2e"),i=n["a"].getCurrentUser();if(n["a"].emptyOrNull(i)){var c=n["a"].setMessage("danger","Your session has been expired. Please login again.","Login");a["a"].commit("setFlashMessage",c),n["a"].logOutUser()}var l=s.db.collection("projects").doc(e.params.projectId);l.get().then(function(t){if(t.exists){var r=t.data();if(null==r.date_deleted)if(r.user==i.uid)"new"==r.status?o():o({name:"ProjectView",params:{projectId:e.params.projectId}});else if("customer"==i.user_type){var s=n["a"].setMessage("danger","Not authorized to perform this operation.","Dashboard");a["a"].commit("setFlashMessage",s),o("/dashboard")}else{var c=n["a"].setMessage("danger","Not authorized to perform this operation.","AdminDashboard");a["a"].commit("setFlashMessage",c),o("/admin/dashboard")}else if("customer"==i.user_type){var l=n["a"].setMessage("danger","Project not found","Dashboard");a["a"].commit("setFlashMessage",l),o("/dashboard")}else{var d=n["a"].setMessage("danger","Project not found","AdminDashboard");a["a"].commit("setFlashMessage",d),o("/admin/dashboard")}}else if("customer"==i.user_type){var u=n["a"].setMessage("danger","Project not found","Dashboard");a["a"].commit("setFlashMessage",u),o("/dashboard")}else{var p=n["a"].setMessage("danger","Project not found","AdminDashboard");a["a"].commit("setFlashMessage",p),o("/admin/dashboard")}}).catch(function(e){if("customer"==i.user_type){var t=n["a"].setMessage("danger",e,"Dashboard");a["a"].commit("setFlashMessage",t),o("/dashboard")}else{var r=n["a"].setMessage("danger",e,"AdminDashboard");a["a"].commit("setFlashMessage",r),o("/admin/dashboard")}})}}]},{path:"/",name:"RoutesAccessibleToUnauthenticatedUsers",component:wt,meta:{requiresNewUser:!0,component_name:"SimpleRoutesContainer",description:"These routes are accessible only if user not logged in"},children:[{path:"login",name:"LoginPage",component:Y,meta:{title:"Sign Into Your Account | PhotoMozaix"}},{path:"resetpassword",name:"resetpassword",component:J,props:function(e){return{query:e.query.oobCode}},meta:{title:"Reset Your Password | PhotoMozaix"}},{path:"/signup",name:"signup",component:h,alias:"/signup",meta:{title:"Create A New Account | PhotoMozaix"}}]},{path:"/",name:"PublicRoutes",component:wt,meta:{requiresAuth:!1,component_name:"PublicRoutes",description:"These routes are public accessible."},children:[{path:"shared/project/:projectId/:shareCode?",name:"OpenSharedProject",component:Qr,props:function(e){return{projectId:e.params.projectId,shareCode:e.params.shareCode,sharedProject:!0}},meta:{component_name:"OpenSharedProject",title:"Open Share Project"}},{path:"/order/project/:projectId/:shareCode?",name:"ProjectOrderPage",component:L,props:!0,meta:{requiresAuth:!1,title:"Checkout Page | PhotoMozaix",allowedUsers:["customer"]}}]},{path:"*",name:"NotFound",component:Se,meta:{title:"Page Not Found | PhotoMozaix"}}]});Lo.beforeEach(function(e,t,r){e.meta&&e.meta.title&&$("title").text(e.meta.title);var o=n["a"].getCurrentUser();if(n["a"].emptyOrNull(o)||o.user_type||(o.user_type="customer"),"/"==e.fullPath)if(n["a"].emptyOrNull(o)){var s=n["a"].setMessage("danger","Your session has been expired. Please login again.","Login");a["a"].commit("setFlashMessage",s),n["a"].logOutUser()}else"customer"==o.user_type?r("/dashboard"):r("/admin/dashboard");var i=null;if(e.matched.length>0&&(i=e.matched[0].meta),i)if(i.requiresAuth)if(n["a"].emptyOrNull(o)){var c=n["a"].setMessage("danger","Your session has been expired. Please login again.","Login");a["a"].commit("setFlashMessage",c),n["a"].logOutUser()}else if(i.allowedUsers){var l=i.allowedUsers.some(function(e){return e==o.user_type});l?r():"customer"==o.user_type?r("/dashboard"):r("/admin/dashboard")}else r();else i.requiresNewUser?n["a"].emptyOrNull(o)?r():"admin"==o.user_type?r("/admin/dashboard"):r("/dashboard"):r();else r()});t["a"]=Lo},4524:function(e,t,r){"use strict";var o=r("2b0e"),s=new o["default"];t["a"]=s},4678:function(e,t,r){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=a(e);return r(t)}function a(e){var t=o[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}s.keys=function(){return Object.keys(o)},s.resolve=a,e.exports=s,s.id="4678"},"477e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkFBNURCQjY4RTQ2MDExRTlBQTUwQTA5NEFEMzBDN0VFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkFBNURCQjY5RTQ2MDExRTlBQTUwQTA5NEFEMzBDN0VFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QUE1REJCNjZFNDYwMTFFOUFBNTBBMDk0QUQzMEM3RUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QUE1REJCNjdFNDYwMTFFOUFBNTBBMDk0QUQzMEM3RUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4mbPXaAAABR0lEQVR42ozSsUoDQRCA4duoISIRQZHYBWIv2lmJIoiRQCTY+QQRLC1TWWk6UbCw0gdIIaKNhY0pUgRrTWWhiFiJEPHOf2FWNuMGMvBxx97s3O3cmCRJIhvuKpFHDVMYwigOcO0SjDHR30YrjmOngDZ25d6gghcsuTy3L1TgFIcY8dasFTR0geHof7xhDK+4wZesfyOlk0MF0qhiXTZM2JNiB9ODFPjAFW7Veg5zOjkVKHAub9WxicYgBZ7xgEtvbR9d+bKeMH3mwMYdMlJwETM9G2UOQl9gYxLvMjx1tDAfzFRzsCdz0EXNm4E1JDhDHWm3zz/CEZcFHMvobmEDP9LYjvSmYpvMEYq6B/dyVhcn8v+fUMKy9+yCAtt6Dh7V6arS9TIK6lkrNEjZQIuKfZqcDf3GJpe2SvyUHoyr9VmOsGpvfgUYADA04LCX4FeTAAAAAElFTkSuQmCC"},"56d7":function(e,t,r){"use strict";r.r(t);r("a481"),r("28a5"),r("cadf"),r("551c"),r("f751"),r("097d");var o=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view")},a=[],n=(r("6b54"),r("f9e3"),r("2dd8"),{name:"app",created:function(){var e=this,t=parseInt("31")-1;t=6e4*parseInt(t),setInterval(function(){var t=e.$helpers.getCurrentUser();if(t=e.$helpers.removeColumnsFromUserObject(t),!e.$helpers.emptyOrNull(t))if(e.isAppIdle){var r=e.$helpers.setMessage("danger","Your session has been expired. Please login again.","Login");e.$store.commit("setFlashMessage",r),e.$eventHub.$emit("logout-user")}else{var o=e.AES.encrypt(JSON.stringify(t),"encrypted user");e.$cookies.set("currentUser",o.toString(),"31MIN")}},t)}}),i=n,c=(r("034f"),r("2877")),l=Object(c["a"])(i,s,a,!1,null,null,null),d=l.exports,u=r("41cb"),p=r("c0d6"),m=r("619c"),h=r("ce96"),_=r("5f5b"),f=(r("f5b8"),r("28dd")),v=r("7bb1"),g={en:{attributes:{price:"Price",min_quantity:"Minimum Quantity",max_quantity:"Maximum Quantity",standard_shipping:"Standard Shipping",express_shipping:"Express Shipping",title:"Title",code:"Code",value:"Value",max_use:"Max Use",valid_till:"Valid Till",cvv_code:"CVV Code",card_expiry:"Card Expiry",name_on_card:"Name On Card",credit_card_no:"Credit Card Number",zip_code:"Zip Code",address:"Address",country:"Country",region:"State",city:"City",first_name:"First Name",last_name:"Last Name",quantity:"Quantity",email:"Email",type:"Type",express_production:"Express Production",phone_no:"Phone Number"}}},b=g,C=r("487a"),w=r.n(C),y=r("a7c6"),x=r.n(y),j=r("2b27"),I=r.n(j),k=r("d21d"),A=r.n(k),D=(r("cc73"),r("6cf9")),M=(r("1e3f"),r("fb98"),r("2ead")),O=r.n(M),P=r("dcb8"),E=r.n(P),S=r("4524"),N=r("0628"),L=r.n(N),z=r("c3b3"),$=r.n(z),U=r("5b6c"),F=r.n(U),T=r("27d6");o["default"].use(m["a"]);var B={install:function(e,t){e.prototype.$helpers=h["a"]}};o["default"].use(B),o["default"].use(_["a"]),o["default"].use(f["a"]),v["a"].extend("maskCompleted",{params:[],validate:function(e){return!(e.indexOf("_")>-1)},getMessage:function(e){return"Invalid "+e+"."}}),v["a"].localize(b),o["default"].use(v["b"],{fieldsBagName:"vvFields"}),o["default"].use(w.a),o["default"].use(x.a),o["default"].use(I.a),r("184b"),o["default"].use(A.a),o["default"].use(D["a"]),T.load({typekit:{id:"hie3uwh"},timeout:2e3}),o["default"].use(O.a),o["default"].prototype.$eventHub=S["a"];var R=parseInt("31");R=6e4*parseInt(R);var Y={eventEmitter:S["a"],idleTime:R,store:p["b"]};o["default"].use(E.a,Y),o["default"].use(L.a),o["default"].use($.a,{});var q=r("7699").default;o["default"].use(q),o["default"].use(F.a);r("ee2e");if(o["default"].config.productionTip=!1,"http:"===window.location.protocol){var V=window.location.href.split("://")[1];V="https://"+V,window.location.replace(V)}else new o["default"]({router:u["a"],store:p["b"],render:function(e){return e(d)}}).$mount("#app")},"631a":function(e,t,r){e.exports=r.p+"img/authorize.45c0f3a2.jpg"},"63a9":function(e,t,r){e.exports=r.p+"img/admin-logo.87e609d6.png"},"64a9":function(e,t,r){},6776:function(e,t,r){e.exports=r.p+"img/footer_logos.c42e80a5.jpg"},"6e25":function(e,t,r){e.exports=r.p+"img/Qty-Copies-10.a7b1098c.png"},7230:function(e,t,r){"use strict";r.r(t),r.d(t,"checkout",function(){return n}),r.d(t,"product",function(){return i}),r.d(t,"productId1",function(){return c}),r.d(t,"product1Cost",function(){return l}),r.d(t,"productId2",function(){return d}),r.d(t,"product2Cost",function(){return u}),r.d(t,"productId3",function(){return p}),r.d(t,"product3Cost",function(){return m});var o=r("1683"),s=r.n(o),a=s.a.buildClient({domain:"photomozaix.myshopify.com",storefrontAccessToken:"27166b19f2f818f3be3fa04e94e2dffa"}),n=a.checkout,i=a.product,c="Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8xODY1NDUyMjk2NjA4MA==",l=59,d="Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8xODY1NDU2Njk3MzUwNA==",u=39,p="Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8xODY1NDYxMjI5MTY0OA==",m=29},"7abe":function(e,t,r){"use strict";var o=r("e53f"),s=r.n(o);s.a},"82ca":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVGODJDRUY0RTQ2MDExRTlCMzdERDFEQTA2MTVBNDJDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVGODJDRUY1RTQ2MDExRTlCMzdERDFEQTA2MTVBNDJDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUY4MkNFRjJFNDYwMTFFOUIzN0REMURBMDYxNUE0MkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUY4MkNFRjNFNDYwMTFFOUIzN0REMURBMDYxNUE0MkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4WplM7AAABRklEQVR42pzTPUuDMRDA8UQr1KE4CIKCLxQXQRB1ElzFUen2TF0cdVDRRbd26iL4ARzESVAQF4uLHYpQqosouogo4ubgYH2pT/xHLvAgja09+JWQctfLJdXGGIW4UmoDfSjgHVOYRVV5QmutbLIKw/AIV0jiGgajUH+xuVo6OKTgCSbxhVXcYgcJmN8/jlc6CGKy0Y0HXOIGGSxiH/EaBWx8/nzKEdLII8AB1uq1747gClhLqCLTSLIr0CLtrCCNZUwjqxoMN8Q71hN4QjvOEchepyf3gyHm3BDfJNlGBS/owAB6PLdQiQ5xC2WkUMBeM0Ncxz1yzQxxCCM4xiDG/jvEC9a78oDmsSADbBO1wjDER1fgjI3xyJd5bCKFfs9LtE95xt1Cq9x9VjroRRGniHluIYweYZj1Np7RhTmU6p6fv/O3AAMA8MZRnWiL3MYAAAAASUVORK5CYII="},"8b8a":function(e,t,r){e.exports=r.p+"img/Logos-Footer-GroupTravel.6a8e10b1.png"},"8ef2":function(e,t,r){e.exports=r.p+"img/Qty.1c9f86c1.png"},9627:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkNGRkU0QTAwRTQ2MDExRTk5ODc5RDBCRjUxNTI3Qjk4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkNGRkU0QTAxRTQ2MDExRTk5ODc5RDBCRjUxNTI3Qjk4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Q0ZGRTQ5RkVFNDYwMTFFOTk4NzlEMEJGNTE1MjdCOTgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Q0ZGRTQ5RkZFNDYwMTFFOTk4NzlEMEJGNTE1MjdCOTgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4bFfVQAAABQUlEQVR42pTTu0oDQRTG8YkEEtA0BgRRm3jprCwEK1GwyQMoGgWfQBAsAt5KW3sVTSP6BCIIVlZiYZtS1EbBIl4wZPR/8FsYllzchV+YS/bMmTOzznu/hDp+EvpGKWUd59w5Ki7Zs4x5p2hTcAlN2rtRBvb4hBk8YyDNzwyGrRNMWrAq6upnMIJU8J9dHFgGrVaYQ07tV1zH5i3zTdvLOh5i++vRWEPumtSgijXbQj8GY9FrGIqNFTGLN5xg9G+z3u9olXYVv9FpfQT3YNXm0v+o9j3GleWjxso4wnunAEW93IdpnVY3ttQ+67SFCj7V3g7Sz2DM2pZBuyyekA3uQgNfuieFqIh7itosg5zmNnS0NtaFLGpWXLtIE8S5xTEuYhlcYRH7OMQpelVAyywfrbTS4pMta34BL8H4JfI29yvAAPMXru0N6MHPAAAAAElFTkSuQmCC"},"96b5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkUyNEI2NDkwRTQ2MDExRTlCNTZFOUQxQjhGMDkwNkJDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkUyNEI2NDkxRTQ2MDExRTlCNTZFOUQxQjhGMDkwNkJDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTI0QjY0OEVFNDYwMTFFOUI1NkU5RDFCOEYwOTA2QkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTI0QjY0OEZFNDYwMTFFOUI1NkU5RDFCOEYwOTA2QkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7UNyW5AAABYklEQVR42nTTMUsDMRjG8btWRK1YwambIOLgrIiL6CYOOrZIwUkQB8cO4ujgUFyk+AEc3Nwc/AKlCiJIFzcdrCKoxWqllJ7/yBN5Oc7Ar7kklzd500sQRVHQ6/XiiojkFUMJ7wRubuh+HMoC1tCn+g37OMUF7vCOChpuQhiGQaAd7Gi1b7T0fKiV2mr7/i6m/A58ADdQMds7Ul9J9bQZa6KWFGDRvJTBpfoPYrmf4dkHcPn6kjPPn5gNkksGTd+wAb6QxgyuMaygI3rvAzfo2mg2wCOyqGISG9g14/cYRxupv15zBgXlGJp8Bw3fd4tO0hk0tN0TbGEJBTP+hE2UbBo2QCQDaqd1YL70qz5XffV7XiaFYtLn+o+qm+PmpswKrYS/zKWRj/W59OYwHz/ElYSVVjW2p/aY2uX4ZXog1ii20TGr1bCsC1TGur6XifhlyqFurrB3rJXzar8ga6/zjwADAIkc2brF51vuAAAAAElFTkSuQmCC"},ba78:function(e,t,r){e.exports=r.p+"img/Logos-Footer-PhotoVision.a12096be.png"},c0d6:function(e,t,r){"use strict";r.d(t,"b",function(){return d});r("6b54");var o=r("2b0e"),s=r("2f62"),a=r("ce96"),n=(r("41cb"),r("2b27")),i=r.n(n),c=(r("0628"),r("ee2e")),l=r("c198");r("f8d5");o["default"].use(s["a"]);var d=new s["a"].Store({state:{currentUser:{},userProfile:{},globalMessage:{},flashMessage:{},showSideBar:!0},actions:{clearData:function(e){var t=e.commit;t("setCurrentUser",{}),t("setUserProfile",{})},fetchUserProfile:function(e){var t=e.commit,r=e.state;c.usersCollection.doc(r.currentUser.uid).get().then(function(e){t("setUserProfile",e.data())}).catch(function(e){console.log(e)})}},mutations:{toggleSideBar:function(e,t){e.showSideBar=!e.showSideBar},setFlashMessage:function(e,t){e.flashMessage=t},clearFlashMessage:function(e){e.flashMessage={}},setCurrentUser:function(e,t){if(e.currentUser=t,a["a"].emptyOrNull(t))i.a.remove("currentUser");else{var r=a["a"].removeColumnsFromUserObject(t),o=l.encrypt(JSON.stringify(r),"encrypted user");i.a.set("currentUser",o.toString(),"31MIN")}},setUserProfile:function(e,t){e.userProfile=t},setGlobalMessage:function(e,t){e.globalMessage=t}}});t["a"]=d},c52e:function(e,t,r){e.exports=r.p+"img/Logos-Footer-CAV.37514230.png"},ce96:function(e,t,r){"use strict";r("8e6e"),r("28a5"),r("ac6a"),r("456d"),r("7f7f"),r("6b54");var o=r("bd86"),s=r("41cb"),a=r("c0d6"),n=r("2b27"),i=r.n(n),c=r("4524");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(r,!0).forEach(function(t){Object(o["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u=r("c1df"),p=r("c198"),m=r("f8d5");t["a"]={envKeys:{user_encryption_key:"encrypted user"},AES:p,UTF8:m,toggleSubMenu:function(){$(document).ready(function(){$(".hasChild").click(function(){$(this).next("ul").slideToggle(),$(this).toggleClass("open")})})},addAttributesToObject:function(e){return e.deleted_at=null,e.updated_at=new Date,e},getDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss";return u().format(e)},formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return u(e).format(t)},addTimestamps:function(e){return e["date_created"]=new Date,e["date_updated"]=new Date,e["date_deleted"]=null,e},setUserObject:function(e,t){var r={displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,photoURL:e.photoURL,uid:e.uid};return d({},r,{},t)},testHelper:function(){console.log("this is testing console")},getCurrentUser:function(){var e=this;if(i.a.isKey("currentUser")){var t=e.AES.decrypt(i.a.get("currentUser"),e.envKeys.user_encryption_key),r=JSON.parse(t.toString(e.UTF8));return r}var o={};return o},consoleData:function(e){console.log(e)},formatDateQuery:function(e){var t=new Date(e);t.setHours(0,0,0,0);var r=new Date(e);return r.setHours(23,59,59,999),{start_date:t,end_date:r}},bottomOfWindow:function(){var e=document.documentElement.scrollTop,t=window.innerHeight,r=document.documentElement.offsetHeight,o=Math.ceil(e)+t===r;return o},emptyOrNull:function(e){return null==e||("Object"==e.constructor.name?!(Object.keys(e).length>0):"Array"==e.constructor.name?!(e.length>0):"String"==e.constructor.name?!(e.length>0):(console.error("The checking value should be of type null, object, array, or string"),void console.error("The emptyOrNull method got "+e.constructor.name+"Instead of above mentioned types")))},getPreviousDate:function(){var e=new Date;return e.setDate(e.getDate()-1),e},logOutUser:function(){var e=this;e.consoleData("Logging out user..."),c["a"].$emit("logout-user"),a["a"].dispatch("clearData"),s["a"].push({name:"LoginPage"})},getStringTerms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=e.split(""),o=[];return r.forEach(function(e,s){for(var a=s;a<r.length;a++){var n=r.slice(s,a+1);n.length>t&&o.push(r.slice(s,a+1).join(""))}}),o},setMessage:function(e,t,r){return{type:e,message:t,component:r}},removeColumnsFromUserObject:function(e){return delete e.name_terms,delete e.email_terms,delete e.ordered_projects,e}}},cf05:function(e,t,r){e.exports=r.p+"img/logo.673bc0c1.png"},d470:function(e,t,r){e.exports=r.p+"img/Qty-Copies2.b4f76dfa.png"},d4a3:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkNFMEREOEZCRTQ2ODExRTk5QjhDRkUxMDQ1RTVBRDJFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkNFMEREOEZDRTQ2ODExRTk5QjhDRkUxMDQ1RTVBRDJFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Q0UwREQ4RjlFNDY4MTFFOTlCOENGRTEwNDVFNUFEMkUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Q0UwREQ4RkFFNDY4MTFFOTlCOENGRTEwNDVFNUFEMkUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4oAPwIAAABeUlEQVR42pTSzSuEURTH8RnGIKVRpGi8TZQFCklpJDvZSP4IO7ZW1taUUqwsKLHAlrWFKDSJvE2IZIz38fKM76nf1G2ScurTPNO999x7zr1+z/N8ih4M4g5+ePJXlAScPzV4xZYNYBdxjeUqqS8r6bibIIVqdGpyBGmNpeULORo3YTfBC45QqO8dlWUxjQt8oxWleERRIKumlCYlcIl75ONGOy/iWt9PeHATlKvudVSqDzNKYtGrRedIosBO4yZIqq5+Hb0OMWxjBW+4VZOtH+3WdL9zjUMYwaF2MY2IYgKrWMA78tSTuHuCCoSwgWVNrNVvBz517JCabFHlJjjAMT60yOIUaxhDEEu4wjPq0Zd9jfZwunWaeTUwrLGYSvJUgr2ZhJvAJjdhVo1MqQ9RXWWZ5jQ4TQ9mmtiCYT2OZpxpl4jKmMSe7j8TdmMpS9DFx6g63KYarRfFWrCph/RrWAJ7pvu6d9ttyvePsAT2IAZwgjnfP+NHgAEAYWl1kI41YLEAAAAASUVORK5CYII="},d8c4:function(e,t,r){e.exports=r.p+"img/Logos-Footer-Mozaix.3e407896.png"},e53f:function(e,t,r){},ed76:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI2M0I4QjQ5RTQ2MDExRTk5NTU1OTZCMDFFMkJGNDMyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI2M0I4QjRBRTQ2MDExRTk5NTU1OTZCMDFFMkJGNDMyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjYzQjhCNDdFNDYwMTFFOTk1NTU5NkIwMUUyQkY0MzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjYzQjhCNDhFNDYwMTFFOTk1NTU5NkIwMUUyQkY0MzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4ljXHwAAABMklEQVR42sTTv0vDQBTA8aT+hIKgnUQ7ukknpw4dHAQdiv+BgqNzlg51cLC09o/wX3AUHBxFFKHdHFoKgos6KKjVXvp96YscR9KlQw8+5N3l7qUvefXDMPQmGRlvwjHLL6hzPcRvyp5vfCIH31qfw4VvjJEaymjrDZn/6IYZ/GEVrzBWgk1ceiTowRtjD48p93ryDvIIrMz7uMeZzk/wnlBaEJ0lS0XKQFWzDnCFD+yig4Lz5JqeqcQLBV2Yxyme0ERdE9iHV3RvlNRNsKTzol5bOEYW12hgwYzGf4K4hJrzpA1dl/gGt/jCNo7sEiQIEt6wHLrT+FxL6WJL14KoBcZ8xgfsWPMS1tzPmNRIcYsv40Ubqo9njdftRpIEDYIDp5Ul6RuyWExp8VErT/3fOBRgALvkomsju0WdAAAAAElFTkSuQmCC"},ee2e:function(e,t,r){"use strict";r.r(t),r.d(t,"timestamp",function(){return n}),r.d(t,"db",function(){return c}),r.d(t,"auth",function(){return l}),r.d(t,"st",function(){return d}),r.d(t,"currentUser",function(){return m}),r.d(t,"ordersCollection",function(){return _}),r.d(t,"projectsCollection",function(){return f}),r.d(t,"couponsCollection",function(){return g}),r.d(t,"productsCollection",function(){return b}),r.d(t,"storageRef",function(){return p}),r.d(t,"usersCollection",function(){return v}),r.d(t,"EmailAuthProvider",function(){return u}),r.d(t,"firestore",function(){return i}),r.d(t,"projectSharedCollection",function(){return C}),r.d(t,"settingsCollection",function(){return w});var o=r("8aa5"),s=r.n(o),a=(r("e71f"),{apiKey:"AIzaSyDi2EOEun2nruXsvjjgGpf1JTcCDqphswE",authDomain:"photomozaix-f1186.firebaseapp.com",databaseURL:"https://photomozaix-f1186.firebaseio.com",projectId:"photomozaix-f1186",storageBucket:"photomozaix-f1186.appspot.com",messagingSenderId:"376168745478",appId:"1:376168745478:web:992f9a576a818ccbc0d187"});s.a.initializeApp(a);var n=s.a.firestore.Timestamp,i=s.a.firestore,c=s.a.firestore(),l=s.a.auth(),d=s.a.storage(),u=s.a.auth.EmailAuthProvider,p=s.a.storage().ref(),m=l.currentUser,h={};c.settings(h);var _=c.collection("orders"),f=c.collection("projects"),v=c.collection("users"),g=c.collection("coupons"),b=c.collection("products"),C=c.collection("projectSharedInfo"),w=c.collection("projectSetting")},fb98:function(e,t,r){}});
//# sourceMappingURL=app.7f91a577.js.map